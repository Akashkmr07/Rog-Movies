import{A as lx,B as Xn,C as as,D as Nf,E as bu,F as Rv,G as cx,H as ux,I as ce,J as xn,K as Ft,L as Mv,M as dx,N as Du,O as de,P as Kt,Q as Pf,R as Nv,S as Jn,T as ls,U as bi,V as Va,W as hx,X as Rn,Y as ct,a as q,b as ye,c as Sv,d as N,e as ex,f as Sf,g as tx,h as nx,i as H,j as Fa,k as Af,l as rx,m as ix,n as Ut,o as La,p as Cu,q as Av,r as sx,s as Lr,t as xv,u as xf,v as Rf,w as ox,x as Mf,y as St,z as ax}from"./chunk-ENPXWVWR.js";function fx(n,e){return Object.is(n,e)}var Lt=null,kf=!1,Of=1,Di=Symbol("SIGNAL");function Ne(n){let e=Lt;return Lt=n,e}function px(){return Lt}var Su={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ov(n){if(kf)throw new Error("");if(Lt===null)return;Lt.consumerOnSignalRead(n);let e=Lt.nextProducerIndex++;if(jf(Lt),e<Lt.producerNode.length&&Lt.producerNode[e]!==n&&Tu(Lt)){let t=Lt.producerNode[e];Vf(t,Lt.producerIndexOfThis[e])}Lt.producerNode[e]!==n&&(Lt.producerNode[e]=n,Lt.producerIndexOfThis[e]=Tu(Lt)?yx(n,Lt,e):0),Lt.producerLastReadVersion[e]=n.version}function oB(){Of++}function gx(n){if(!(Tu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Of)){if(!n.producerMustRecompute(n)&&!Lv(n)){n.dirty=!1,n.lastCleanEpoch=Of;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Of}}function mx(n){if(n.liveConsumerNode===void 0)return;let e=kf;kf=!0;try{for(let t of n.liveConsumerNode)t.dirty||aB(t)}finally{kf=e}}function _x(){return Lt?.consumerAllowSignalWrites!==!1}function aB(n){n.dirty=!0,mx(n),n.consumerMarkedDirty?.(n)}function Lf(n){return n&&(n.nextProducerIndex=0),Ne(n)}function Fv(n,e){if(Ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Tu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Lv(n){jf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(gx(t),r!==t.version))return!0}return!1}function Vv(n){if(jf(n),Tu(n))for(let e=0;e<n.producerNode.length;e++)Vf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yx(n,e,t){if(vx(n),n.liveConsumerNode.length===0&&wx(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=yx(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vf(n,e){if(vx(n),n.liveConsumerNode.length===1&&wx(n))for(let r=0;r<n.producerNode.length;r++)Vf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jf(i),i.producerIndexOfThis[r]=e}}function Tu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function vx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function wx(n){return n.producerNode!==void 0}function Ex(n){let e=Object.create(lB);e.computation=n;let t=()=>{if(gx(e),Ov(e),e.value===Ff)throw e.error;return e.value};return t[Di]=e,t}var Pv=Symbol("UNSET"),kv=Symbol("COMPUTING"),Ff=Symbol("ERRORED"),lB=ye(q({},Su),{value:Pv,dirty:!0,error:null,equal:fx,producerMustRecompute(n){return n.value===Pv||n.value===kv},producerRecomputeValue(n){if(n.value===kv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=kv;let t=Lf(n),r;try{r=n.computation()}catch(i){r=Ff,n.error=i}finally{Fv(n,t)}if(e!==Pv&&e!==Ff&&r!==Ff&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function cB(){throw new Error}var Ix=cB;function Cx(){Ix()}function bx(n){Ix=n}var uB=null;function Dx(n){let e=Object.create(Sx);e.value=n;let t=()=>(Ov(e),e.value);return t[Di]=e,t}function jv(n,e){_x()||Cx(),n.equal(n.value,e)||(n.value=e,dB(n))}function Tx(n,e){_x()||Cx(),jv(n,e(n.value))}var Sx=ye(q({},Su),{equal:fx,value:void 0});function dB(n){n.version++,oB(),mx(n),uB?.()}function fe(n){return typeof n=="function"}function ja(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Uf=ja(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Eo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var _t=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(s){e=s instanceof Uf?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Ax(s)}catch(o){e=e??[],o instanceof Uf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Uf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ax(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Eo(t,e)}remove(e){let{_finalizers:t}=this;t&&Eo(t,e),e instanceof n&&e._removeParent(this)}};_t.EMPTY=(()=>{let n=new _t;return n.closed=!0,n})();var Uv=_t.EMPTY;function Bf(n){return n instanceof _t||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function Ax(n){fe(n)?n():n.unsubscribe()}var _r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ua={setTimeout(n,e,...t){let{delegate:r}=Ua;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ua;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $f(n){Ua.setTimeout(()=>{let{onUnhandledError:e}=_r;if(e)e(n);else throw n})}function Io(){}var xx=Bv("C",void 0,void 0);function Rx(n){return Bv("E",void 0,n)}function Mx(n){return Bv("N",n,void 0)}function Bv(n,e,t){return{kind:n,value:e,error:t}}var Co=null;function Ba(n){if(_r.useDeprecatedSynchronousErrorHandling){let e=!Co;if(e&&(Co={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Co;if(Co=null,t)throw r}}else n()}function Nx(n){_r.useDeprecatedSynchronousErrorHandling&&Co&&(Co.errorThrown=!0,Co.error=n)}var bo=class extends _t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bf(e)&&e.add(this)):this.destination=pB}static create(e,t,r){return new Ti(e,t,r)}next(e){this.isStopped?Hv(Mx(e),this):this._next(e)}error(e){this.isStopped?Hv(Rx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hv(xx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},hB=Function.prototype.bind;function $v(n,e){return hB.call(n,e)}var qv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hf(r)}else Hf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hf(t)}}},Ti=class extends bo{constructor(e,t,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&_r.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$v(e.next,s),error:e.error&&$v(e.error,s),complete:e.complete&&$v(e.complete,s)}):i=e}this.destination=new qv(i)}};function Hf(n){_r.useDeprecatedSynchronousErrorHandling?Nx(n):$f(n)}function fB(n){throw n}function Hv(n,e){let{onStoppedNotification:t}=_r;t&&Ua.setTimeout(()=>t(n,e))}var pB={closed:!0,next:Io,error:fB,complete:Io};var $a=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qt(n){return n}function zv(...n){return Gv(n)}function Gv(n){return n.length===0?Qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=mB(t)?t:new Ti(t,r,i);return Ba(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Px(r),new r((i,s)=>{let o=new Ti({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[$a](){return this}pipe(...t){return Gv(t)(this)}toPromise(t){return t=Px(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Px(n){var e;return(e=n??_r.Promise)!==null&&e!==void 0?e:Promise}function gB(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}function mB(n){return n&&n instanceof bo||gB(n)&&Bf(n)}function Wv(n){return fe(n?.lift)}function he(n){return e=>{if(Wv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new Kv(n,e,t,r,i)}var Kv=class extends bo{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ha(){return he((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var qa=class extends ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _t;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_t.EMPTY)}return e}refCount(){return Ha()(this)}};var kx=ja(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class n extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new qf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new kx}next(t){Ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Uv:(this.currentObservers=null,s.push(t),new _t(()=>{this.currentObservers=null,Eo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ve;return t.source=this,t}}return n.create=(e,t)=>new qf(e,t),n})(),qf=class extends it{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Uv}};var Yt=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Au={now(){return(Au.delegate||Date).now()},delegate:void 0};var zf=class extends it{constructor(e=1/0,t=1/0,r=Au){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}};var Gf=class extends _t{constructor(e,t){super()}schedule(e,t=0){return this}};var xu={setInterval(n,e,...t){let{delegate:r}=xu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=xu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var za=class extends Gf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return xu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&xu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Eo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ga=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ga.now=Au.now;var Wa=class extends Ga{constructor(e,t=Ga.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Si=new Wa(za);var Wf=class extends za{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Kf=class extends Wa{};var Qv=new Kf(Wf);var pn=new ve(n=>n.complete());function Ox(n){return n&&fe(n.schedule)}function Yv(n){return n[n.length-1]}function Ka(n){return fe(Yv(n))?n.pop():void 0}function Vr(n){return Ox(Yv(n))?n.pop():void 0}function Fx(n,e){return typeof Yv(n)=="number"?n.pop():e}var Qf=n=>n&&typeof n.length=="number"&&typeof n!="function";function Yf(n){return fe(n?.then)}function Zf(n){return fe(n[$a])}function Xf(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function Jf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _B(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ep=_B();function tp(n){return fe(n?.[ep])}function np(n){return tx(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Sf(t.read());if(i)return yield Sf(void 0);yield yield Sf(r)}}finally{t.releaseLock()}})}function rp(n){return fe(n?.getReader)}function He(n){if(n instanceof ve)return n;if(n!=null){if(Zf(n))return yB(n);if(Qf(n))return vB(n);if(Yf(n))return wB(n);if(Xf(n))return Lx(n);if(tp(n))return EB(n);if(rp(n))return IB(n)}throw Jf(n)}function yB(n){return new ve(e=>{let t=n[$a]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vB(n){return new ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function wB(n){return new ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$f)})}function EB(n){return new ve(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Lx(n){return new ve(e=>{CB(n,e).catch(t=>e.error(t))})}function IB(n){return Lx(np(n))}function CB(n,e){var t,r,i,s;return ex(this,void 0,void 0,function*(){try{for(t=nx(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Mn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function jn(n,e=0){return he((t,r)=>{t.subscribe(ue(r,i=>Mn(r,n,()=>r.next(i),e),()=>Mn(r,n,()=>r.complete(),e),i=>Mn(r,n,()=>r.error(i),e)))})}function yr(n,e=0){return he((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Vx(n,e){return He(n).pipe(yr(e),jn(e))}function jx(n,e){return He(n).pipe(yr(e),jn(e))}function Ux(n,e){return new ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Bx(n,e){return new ve(t=>{let r;return Mn(t,e,()=>{r=n[ep](),Mn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function ip(n,e){if(!n)throw new Error("Iterable cannot be null");return new ve(t=>{Mn(t,e,()=>{let r=n[Symbol.asyncIterator]();Mn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $x(n,e){return ip(np(n),e)}function Hx(n,e){if(n!=null){if(Zf(n))return Vx(n,e);if(Qf(n))return Ux(n,e);if(Yf(n))return jx(n,e);if(Xf(n))return ip(n,e);if(tp(n))return Bx(n,e);if(rp(n))return $x(n,e)}throw Jf(n)}function be(n,e){return e?Hx(n,e):He(n)}function se(...n){let e=Vr(n);return be(n,e)}function Qa(n,e){let t=fe(n)?n:()=>n,r=i=>i.error(t());return new ve(e?i=>e.schedule(r,0,i):r)}function Zv(n){return!!n&&(n instanceof ve||fe(n.lift)&&fe(n.subscribe))}var Ai=ja(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function re(n,e){return he((t,r)=>{let i=0;t.subscribe(ue(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:bB}=Array;function DB(n,e){return bB(e)?n(...e):n(e)}function sp(n){return re(e=>DB(n,e))}var{isArray:TB}=Array,{getPrototypeOf:SB,prototype:AB,keys:xB}=Object;function op(n){if(n.length===1){let e=n[0];if(TB(e))return{args:e,keys:null};if(RB(e)){let t=xB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function RB(n){return n&&typeof n=="object"&&SB(n)===AB}function ap(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ru(...n){let e=Vr(n),t=Ka(n),{args:r,keys:i}=op(n);if(r.length===0)return be([],e);let s=new ve(MB(r,e,i?o=>ap(i,o):Qt));return t?s.pipe(sp(t)):s}function MB(n,e,t=Qt){return r=>{qx(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)qx(e,()=>{let u=be(n[l],e),d=!1;u.subscribe(ue(r,h=>{s[l]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function qx(n,e,t){n?Mn(t,n,e):e()}function zx(n,e,t,r,i,s,o,a){let l=[],u=0,d=0,h=!1,g=()=>{h&&!l.length&&!u&&e.complete()},m=C=>u<r?y(C):l.push(C),y=C=>{s&&e.next(C),u++;let b=!1;He(t(C,d++)).subscribe(ue(e,V=>{i?.(V),s?m(V):e.next(V)},()=>{b=!0},void 0,()=>{if(b)try{for(u--;l.length&&u<r;){let V=l.shift();o?Mn(e,o,()=>y(V)):y(V)}g()}catch(V){e.error(V)}}))};return n.subscribe(ue(e,m,()=>{h=!0,g()})),()=>{a?.()}}function At(n,e,t=1/0){return fe(e)?At((r,i)=>re((s,o)=>e(r,s,i,o))(He(n(r,i))),t):(typeof e=="number"&&(t=e),he((r,i)=>zx(r,i,n,t)))}function cs(n=1/0){return At(Qt,n)}function Gx(){return cs(1)}function Ya(...n){return Gx()(be(n,Vr(n)))}function lp(n){return new ve(e=>{He(n()).subscribe(e)})}function Xv(...n){let e=Ka(n),{args:t,keys:r}=op(n),i=new ve(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let d=0;d<o;d++){let h=!1;He(t[d]).subscribe(ue(s,g=>{h||(h=!0,u--),a[d]=g},()=>l--,void 0,()=>{(!l||!h)&&(u||s.next(r?ap(r,a):a),s.complete())}))}});return e?i.pipe(sp(e)):i}function Za(...n){let e=Vr(n),t=Fx(n,1/0),r=n;return r.length?r.length===1?He(r[0]):cs(t)(be(r,e)):pn}function Zt(n,e){return he((t,r)=>{let i=0;t.subscribe(ue(r,s=>n.call(e,s,i++)&&r.next(s)))})}function us(n){return he((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ue(t,void 0,void 0,o=>{s=He(n(o,us(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Wx(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(ue(o,d=>{let h=u++;l=a?n(l,d,h):(a=!0,d),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Do(n,e){return fe(e)?At(n,e,1):At(n,1)}function Jv(n,e=Si){return he((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=s;s=null,r.next(u)}};function l(){let u=o+n,d=e.now();if(d<u){i=this.schedule(void 0,u-d),r.add(i);return}a()}t.subscribe(ue(r,u=>{s=u,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function ds(n){return he((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xi(n){return n<=0?()=>pn:he((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ew(n){return re(()=>n)}function Mu(n,e=Qt){return n=n??NB,he((t,r)=>{let i,s=!0;t.subscribe(ue(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function NB(n,e){return n===e}function cp(n=PB){return he((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function PB(){return new Ai}function Nu(n){return he((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function er(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Zt((i,s)=>n(i,s,r)):Qt,xi(1),t?ds(e):cp(()=>new Ai))}function Xa(n){return n<=0?()=>pn:he((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tw(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Zt((i,s)=>n(i,s,r)):Qt,Xa(1),t?ds(e):cp(()=>new Ai))}function Pu(){return he((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function jr(n,e){return he(Wx(n,e,arguments.length>=2,!0))}function ku(n={}){let{connector:e=()=>new it,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,u=0,d=!1,h=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=l=void 0,d=h=!1},y=()=>{let C=o;m(),C?.unsubscribe()};return he((C,b)=>{u++,!h&&!d&&g();let V=l=l??e();b.add(()=>{u--,u===0&&!h&&!d&&(a=nw(y,i))}),V.subscribe(b),!o&&u>0&&(o=new Ti({next:B=>V.next(B),error:B=>{h=!0,g(),a=nw(m,t,B),V.error(B)},complete:()=>{d=!0,g(),a=nw(m,r),V.complete()}}),He(C).subscribe(o))})(s)}}function nw(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Ti({next:()=>{r.unsubscribe(),n()}});return He(e(...t)).subscribe(r)}function up(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,ku({connector:()=>new zf(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function rw(n){return he((e,t)=>{let r=!1,i=0;e.subscribe(ue(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}function To(...n){let e=Vr(n);return he((t,r)=>{(e?Ya(n,t,e):Ya(n,t)).subscribe(r)})}function qe(n,e){return he((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ue(r,l=>{i?.unsubscribe();let u=0,d=s++;He(n(l,d)).subscribe(i=ue(r,h=>r.next(e?e(l,h,d,u++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function dp(n,e){return fe(e)?qe(()=>n,e):qe(()=>n)}function iw(n){return he((e,t)=>{He(n).subscribe(ue(t,()=>t.complete(),Io)),!t.closed&&e.subscribe(t)})}function xt(n,e,t){let r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Qt}function sw(...n){let e=Ka(n);return he((t,r)=>{let i=n.length,s=new Array(i),o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)He(n[l]).subscribe(ue(r,u=>{s[l]=u,!a&&!o[l]&&(o[l]=!0,(a=o.every(Qt))&&(o=null))},Io));t.subscribe(ue(r,l=>{if(a){let u=[l,...s];r.next(e?e(...u):u)}}))})}var OR="https://g.co/ng/security#xss",te=class extends Error{constructor(e,t){super(uE(e,t)),this.code=e}};function uE(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function qu(n){return{toString:n}.toString()}var hp="__parameters__";function kB(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function FR(n,e,t){return qu(()=>{let r=kB(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,u,d){let h=l.hasOwnProperty(hp)?l[hp]:Object.defineProperty(l,hp,{value:[]})[hp];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xt=globalThis;function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function OB(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function mn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(mn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Kx(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var FB=ze({__forward_ref__:ze});function Kr(n){return n.__forward_ref__=Kr,n.toString=function(){return mn(this())},n}function gn(n){return LR(n)?n():n}function LR(n){return typeof n=="function"&&n.hasOwnProperty(FB)&&n.__forward_ref__===Kr}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ze(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xp(n){return Qx(n,jR)||Qx(n,UR)}function VR(n){return Xp(n)!==null}function Qx(n,e){return n.hasOwnProperty(e)?n[e]:null}function LB(n){let e=n&&(n[jR]||n[UR]);return e||null}function Yx(n){return n&&(n.hasOwnProperty(Zx)||n.hasOwnProperty(VB))?n[Zx]:null}var jR=ze({\u0275prov:ze}),Zx=ze({\u0275inj:ze}),UR=ze({ngInjectableDef:ze}),VB=ze({ngInjectorDef:ze}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function BR(n){return n&&!!n.\u0275providers}var jB=ze({\u0275cmp:ze}),UB=ze({\u0275dir:ze}),BB=ze({\u0275pipe:ze}),$B=ze({\u0275mod:ze}),Cp=ze({\u0275fac:ze}),Fu=ze({__NG_ELEMENT_ID__:ze}),Xx=ze({__NG_ENV_ID__:ze});function Jp(n){return typeof n=="string"?n:n==null?"":String(n)}function HB(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Jp(n)}function qB(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new te(-200,n)}function dE(n,e){throw new te(-201,!1)}var Ee=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ee||{}),ww;function $R(){return ww}function Nn(n){let e=ww;return ww=n,e}function HR(n,e,t){let r=Xp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ee.Optional)return null;if(e!==void 0)return e;dE(n,"Injector")}var zB={},Vu=zB,Ew="__NG_DI_FLAG__",bp="ngTempTokenPath",GB="ngTokenPath",WB=/\n/gm,KB="\u0275",Jx="__source",rl;function QB(){return rl}function hs(n){let e=rl;return rl=n,e}function YB(n,e=Ee.Default){if(rl===void 0)throw new te(-203,!1);return rl===null?HR(n,void 0,e):rl.get(n,e&Ee.Optional?null:void 0,e)}function L(n,e=Ee.Default){return($R()||YB)(gn(n),e)}function W(n,e=Ee.Default){return L(n,eg(e))}function eg(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Iw(n){let e=[];for(let t=0;t<n.length;t++){let r=gn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,s=Ee.Default;for(let o=0;o<r.length;o++){let a=r[o],l=ZB(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(L(i,s))}else e.push(L(r))}return e}function qR(n,e){return n[Ew]=e,n.prototype[Ew]=e,n}function ZB(n){return n[Ew]}function XB(n,e,t,r){let i=n[bp];throw e[Jx]&&i.unshift(e[Jx]),n.message=JB(`
`+n.message,i,t,r),n[GB]=i,n[bp]=null,n}function JB(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==KB?n.slice(2):n;let i=mn(e);if(Array.isArray(e))i=e.map(mn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):mn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(WB,`
  `)}`}var Lo=qR(FR("Optional"),8);var tg=qR(FR("SkipSelf"),4);function xo(n,e){let t=n.hasOwnProperty(Cp);return t?n[Cp]:null}function hE(n,e){n.forEach(t=>Array.isArray(t)?hE(t,e):e(t))}function zR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Dp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function e$(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function t$(n,e,t){let r=zu(n,e);return r>=0?n[r|1]=t:(r=~r,e$(n,r,e,t)),r}function ow(n,e){let t=zu(n,e);if(t>=0)return n[t|1]}function zu(n,e){return n$(n,e,1)}function n$(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var sl={},tr=[],ol=new K(""),GR=new K("",-1),WR=new K(""),Tp=class{get(e,t=Vu){if(t===Vu){let r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return t}},KR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(KR||{}),$r=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}($r||{}),gs=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gs||{});function r$(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Cw(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];i$(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function QR(n){return n===3||n===4||n===6}function i$(n){return n.charCodeAt(0)===64}function ju(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?eR(n,t,i,null,e[++r]):eR(n,t,i,null,null))}}return n}function eR(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var YR="ng-template";function s$(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&r$(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(fE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function fE(n){return n.type===4&&n.value!==YR}function o$(n,e,t){let r=n.type===4&&!t?YR:n.value;return e===r}function a$(n,e,t){let r=4,i=n.attrs,s=i!==null?u$(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!vr(r)&&!vr(l))return!1;if(o&&vr(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!o$(n,l,t)||l===""&&e.length===1){if(vr(r))return!1;o=!0}}else if(r&8){if(i===null||!s$(n,i,l,t)){if(vr(r))return!1;o=!0}}else{let u=e[++a],d=l$(l,i,fE(n),t);if(d===-1){if(vr(r))return!1;o=!0;continue}if(u!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&u!==h){if(vr(r))return!1;o=!0}}}}return vr(r)||o}function vr(n){return(n&1)===0}function l$(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return d$(e,n)}function c$(n,e,t=!1){for(let r=0;r<e.length;r++)if(a$(n,e[r],t))return!0;return!1}function u$(n){for(let e=0;e<n.length;e++){let t=n[e];if(QR(t))return e}return n.length}function d$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function tR(n,e){return n?":not("+e.trim()+")":e}function h$(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!vr(o)&&(e+=tR(s,i),i=""),r=o,s=s||!vr(r);t++}return i!==""&&(e+=tR(s,i)),e}function f$(n){return n.map(h$).join(",")}function p$(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!vr(i))break;i=s}r++}return{attrs:e,classes:t}}function vt(n){return qu(()=>{let e=tM(n),t=ye(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===KR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$r.Emulated,styles:n.styles||tr,_:null,schemas:n.schemas||null,tView:null,id:""});nM(t);let r=n.dependencies;return t.directiveDefs=rR(r,!1),t.pipeDefs=rR(r,!0),t.id=_$(t),t})}function g$(n){return ms(n)||ZR(n)}function m$(n){return n!==null}function Xe(n){return qu(()=>({type:n.type,bootstrap:n.bootstrap||tr,declarations:n.declarations||tr,imports:n.imports||tr,exports:n.exports||tr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nR(n,e){if(n==null)return sl;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=gs.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==gs.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Et(n){return qu(()=>{let e=tM(n);return nM(e),e})}function ng(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ms(n){return n[jB]||null}function ZR(n){return n[UB]||null}function XR(n){return n[BB]||null}function JR(n){let e=ms(n)||ZR(n)||XR(n);return e!==null?e.standalone:!1}function eM(n,e){let t=n[$B]||null;if(!t&&e===!0)throw new Error(`Type ${mn(n)} does not have '\u0275mod' property.`);return t}function tM(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||sl,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||tr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nR(n.inputs,e),outputs:nR(n.outputs),debugInfo:null}}function nM(n){n.features?.forEach(e=>e(n))}function rR(n,e){if(!n)return null;let t=e?XR:g$;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(m$)}function _$(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function y$(...n){return{\u0275providers:rM(!0,n),\u0275fromNgModule:!0}}function rM(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return hE(e,o=>{let a=o;bw(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iM(i,s),t}function iM(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];pE(i,s=>{e(s,r)})}}function bw(n,e,t,r){if(n=gn(n),!n)return!1;let i=null,s=Yx(n),o=!s&&ms(n);if(!s&&!o){let l=n.ngModule;if(s=Yx(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)bw(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{hE(s.imports,d=>{bw(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&iM(u,e)}if(!a){let u=xo(i)||(()=>new i);e({provide:i,useFactory:u,deps:tr},i),e({provide:WR,useValue:i,multi:!0},i),e({provide:ol,useValue:()=>L(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=n;pE(l,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function pE(n,e){for(let t of n)BR(t)&&(t=t.\u0275providers),Array.isArray(t)?pE(t,e):e(t)}var v$=ze({provide:String,useValue:ze});function sM(n){return n!==null&&typeof n=="object"&&v$ in n}function w$(n){return!!(n&&n.useExisting)}function E$(n){return!!(n&&n.useFactory)}function al(n){return typeof n=="function"}function I$(n){return!!n.useClass}var rg=new K(""),vp={},C$={},aw;function gE(){return aw===void 0&&(aw=new Tp),aw}var Un=class{},Uu=class extends Un{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tw(e,o=>this.processProvider(o)),this.records.set(GR,Ja(void 0,this)),i.has("environment")&&this.records.set(Un,Ja(void 0,this));let s=this.records.get(rg);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(WR,tr,Ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=hs(this),r=Nn(void 0),i;try{return e()}finally{hs(t),Nn(r)}}get(e,t=Vu,r=Ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xx))return e[Xx](this);r=eg(r);let i,s=hs(this),o=Nn(void 0);try{if(!(r&Ee.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=A$(e)&&Xp(e);u&&this.injectableDefInScope(u)?l=Ja(Dw(e),vp):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&Ee.Self?gE():this.parent;return t=r&Ee.Optional&&t===Vu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[bp]=a[bp]||[]).unshift(mn(e)),s)throw a;return XB(a,e,"R3InjectorError",this.source)}else throw a}finally{Nn(o),hs(s)}}resolveInjectorInitializers(){let e=Ne(null),t=hs(this),r=Nn(void 0),i;try{let s=this.get(ol,tr,Ee.Self);for(let o of s)o()}finally{hs(t),Nn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(mn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(e){e=gn(e);let t=al(e)?e:gn(e&&e.provide),r=D$(e);if(!al(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ja(void 0,vp,!0),i.factory=()=>Iw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ne(null);try{return t.value===vp&&(t.value=C$,t.value=t.factory()),typeof t.value=="object"&&t.value&&S$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=gn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Dw(n){let e=Xp(n),t=e!==null?e.factory:xo(n);if(t!==null)return t;if(n instanceof K)throw new te(204,!1);if(n instanceof Function)return b$(n);throw new te(204,!1)}function b$(n){if(n.length>0)throw new te(204,!1);let t=LB(n);return t!==null?()=>t.factory(n):()=>new n}function D$(n){if(sM(n))return Ja(void 0,n.useValue);{let e=oM(n);return Ja(e,vp)}}function oM(n,e,t){let r;if(al(n)){let i=gn(n);return xo(i)||Dw(i)}else if(sM(n))r=()=>gn(n.useValue);else if(E$(n))r=()=>n.useFactory(...Iw(n.deps||[]));else if(w$(n))r=()=>L(gn(n.useExisting));else{let i=gn(n&&(n.useClass||n.provide));if(T$(n))r=()=>new i(...Iw(n.deps));else return xo(i)||Dw(i)}return r}function Ja(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function T$(n){return!!n.deps}function S$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function A$(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Tw(n,e){for(let t of n)Array.isArray(t)?Tw(t,e):t&&BR(t)?Tw(t.\u0275providers,e):e(t)}function Qr(n,e){n instanceof Uu&&n.assertNotDestroyed();let t,r=hs(n),i=Nn(void 0);try{return e()}finally{hs(r),Nn(i)}}function aM(){return $R()!==void 0||QB()!=null}function x$(n){if(!aM())throw new te(-203,!1)}function R$(n){let e=Xt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function M$(n){return typeof n=="function"}var Ni=0,Se=1,pe=2,_n=3,wr=4,Ir=5,Sp=6,Ap=7,Er=8,ll=9,Hr=10,Rt=11,Bu=12,iR=13,_l=14,qr=15,cl=16,el=17,ul=18,ig=19,lM=20,fs=21,lw=22,nr=23,zr=25,cM=1;var Ro=7,xp=8,Rp=9,rr=10,Mp=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Mp||{});function ps(n){return Array.isArray(n)&&typeof n[cM]=="object"}function Pi(n){return Array.isArray(n)&&n[cM]===!0}function uM(n){return(n.flags&4)!==0}function sg(n){return n.componentOffset>-1}function mE(n){return(n.flags&1)===1}function _s(n){return!!n.template}function Sw(n){return(n[pe]&512)!==0}var Aw=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function dM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ki(){return hM}function hM(n){return n.type.prototype.ngOnChanges&&(n.setInput=P$),N$}ki.ngInherit=!0;function N$(){let n=pM(this),e=n?.current;if(e){let t=n.previous;if(t===sl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function P$(n,e,t,r,i){let s=this.declaredInputs[r],o=pM(n)||k$(n,{previous:sl,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new Aw(u&&u.currentValue,t,l===sl),dM(n,e,i,t)}var fM="__ngSimpleChanges__";function pM(n){return n[fM]||null}function k$(n,e){return n[fM]=e}var sR=null;var Ur=function(n,e,t){sR?.(n,e,t)},O$="svg",F$="math";function Gr(n){for(;Array.isArray(n);)n=n[Ni];return n}function gM(n,e){return Gr(e[n])}function ir(n,e){return Gr(e[n.index])}function mM(n,e){return n.data[e]}function L$(n,e){return n[e]}function ws(n,e){let t=e[n];return ps(t)?t:t[Ni]}function _E(n){return(n[pe]&128)===128}function V$(n){return Pi(n[_n])}function Np(n,e){return e==null?null:n[e]}function _M(n){n[el]=0}function yM(n){n[pe]&1024||(n[pe]|=1024,_E(n)&&ag(n))}function j$(n,e){for(;n>0;)e=e[_l],n--;return e}function og(n){return!!(n[pe]&9216||n[nr]?.dirty)}function xw(n){n[Hr].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),og(n)&&ag(n)}function ag(n){n[Hr].changeDetectionScheduler?.notify(0);let e=Mo(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!_E(e)));)e=Mo(e)}function vM(n,e){if((n[pe]&256)===256)throw new te(911,!1);n[fs]===null&&(n[fs]=[]),n[fs].push(e)}function U$(n,e){if(n[fs]===null)return;let t=n[fs].indexOf(e);t!==-1&&n[fs].splice(t,1)}function Mo(n){let e=n[_n];return Pi(e)?e[_n]:e}var Ae={lFrame:AM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wM=!1;function B$(){return Ae.lFrame.elementDepthCount}function $$(){Ae.lFrame.elementDepthCount++}function H$(){Ae.lFrame.elementDepthCount--}function EM(){return Ae.bindingsEnabled}function q$(){return Ae.skipHydrationRootTNode!==null}function z$(n){return Ae.skipHydrationRootTNode===n}function G$(){Ae.skipHydrationRootTNode=null}function Le(){return Ae.lFrame.lView}function yn(){return Ae.lFrame.tView}function Pn(n){return Ae.lFrame.contextLView=n,n[Er]}function kn(n){return Ae.lFrame.contextLView=null,n}function vn(){let n=IM();for(;n!==null&&n.type===64;)n=n.parent;return n}function IM(){return Ae.lFrame.currentTNode}function W$(){let n=Ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Gu(n,e){let t=Ae.lFrame;t.currentTNode=n,t.isParent=e}function CM(){return Ae.lFrame.isParent}function K$(){Ae.lFrame.isParent=!1}function bM(){return wM}function oR(n){wM=n}function lg(){let n=Ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Q$(n){return Ae.lFrame.bindingIndex=n}function cg(){return Ae.lFrame.bindingIndex++}function Y$(n){let e=Ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Z$(){return Ae.lFrame.inI18n}function X$(n,e){let t=Ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rw(e)}function J$(){return Ae.lFrame.currentDirectiveIndex}function Rw(n){Ae.lFrame.currentDirectiveIndex=n}function e4(n){let e=Ae.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function DM(n){Ae.lFrame.currentQueryIndex=n}function t4(n){let e=n[Se];return e.type===2?e.declTNode:e.type===1?n[Ir]:null}function TM(n,e,t){if(t&Ee.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Ee.Host);)if(i=t4(s),i===null||(s=s[_l],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ae.lFrame=SM();return r.currentTNode=e,r.lView=n,!0}function yE(n){let e=SM(),t=n[Se];Ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function SM(){let n=Ae.lFrame,e=n===null?null:n.child;return e===null?AM(n):e}function AM(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xM(){let n=Ae.lFrame;return Ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var RM=xM;function vE(){let n=xM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function n4(n){return(Ae.lFrame.contextLView=j$(n,Ae.lFrame.contextLView))[Er]}function yl(){return Ae.lFrame.selectedIndex}function No(n){Ae.lFrame.selectedIndex=n}function ug(){let n=Ae.lFrame;return mM(n.tView,n.selectedIndex)}function r4(){return Ae.lFrame.currentNamespace}var MM=!0;function wE(){return MM}function EE(n){MM=n}function i4(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=hM(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function IE(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function wp(n,e,t){NM(n,e,3,t)}function Ep(n,e,t,r){(n[pe]&3)===t&&NM(n,e,t,r)}function cw(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function NM(n,e,t,r){let i=r!==void 0?n[el]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[el]+=65536),(a<s||s==-1)&&(s4(n,t,e,l),n[el]=(n[el]&4294901760)+l+2),l++}function aR(n,e){Ur(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),Ur(5,n,e)}}function s4(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[pe]>>14<n[el]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,aR(a,s)):aR(a,s)}var il=-1,Po=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function o4(n){return n instanceof Po}function a4(n){return(n.flags&8)!==0}function l4(n){return(n.flags&16)!==0}var uw={},Mw=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=eg(r);let i=this.injector.get(e,uw,r);return i!==uw||t===uw?i:this.parentInjector.get(e,t,r)}};function PM(n){return n!==il}function Pp(n){return n&32767}function c4(n){return n>>16}function kp(n,e){let t=c4(n),r=e;for(;t>0;)r=r[_l],t--;return r}var Nw=!0;function Op(n){let e=Nw;return Nw=n,e}var u4=256,kM=u4-1,OM=5,d4=0,Br={};function h4(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Fu)&&(r=t[Fu]),r==null&&(r=t[Fu]=d4++);let i=r&kM,s=1<<i;e.data[n+(i>>OM)]|=s}function Fp(n,e){let t=FM(n,e);if(t!==-1)return t;let r=e[Se];r.firstCreatePass&&(n.injectorIndex=e.length,dw(r.data,n),dw(e,null),dw(r.blueprint,null));let i=CE(n,e),s=n.injectorIndex;if(PM(i)){let o=Pp(i),a=kp(i,e),l=a[Se].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function dw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function FM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function CE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=BM(i),r===null)return il;if(t++,i=i[_l],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return il}function Pw(n,e,t){h4(n,e,t)}function f4(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(QR(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function LM(n,e,t){if(t&Ee.Optional||n!==void 0)return n;dE(e,"NodeInjector")}function VM(n,e,t,r){if(t&Ee.Optional&&r===void 0&&(r=null),!(t&(Ee.Self|Ee.Host))){let i=n[ll],s=Nn(void 0);try{return i?i.get(e,r,t&Ee.Optional):HR(e,r,t&Ee.Optional)}finally{Nn(s)}}return LM(r,e,t)}function jM(n,e,t,r=Ee.Default,i){if(n!==null){if(e[pe]&2048&&!(r&Ee.Self)){let o=y4(n,e,t,r,Br);if(o!==Br)return o}let s=UM(n,e,t,r,Br);if(s!==Br)return s}return VM(e,t,r,i)}function UM(n,e,t,r,i){let s=m4(t);if(typeof s=="function"){if(!TM(e,n,r))return r&Ee.Host?LM(i,t,r):VM(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Ee.Optional))dE(t);else return o}finally{RM()}}else if(typeof s=="number"){let o=null,a=FM(n,e),l=il,u=r&Ee.Host?e[qr][Ir]:null;for((a===-1||r&Ee.SkipSelf)&&(l=a===-1?CE(n,e):e[a+8],l===il||!cR(r,!1)?a=-1:(o=e[Se],a=Pp(l),e=kp(l,e)));a!==-1;){let d=e[Se];if(lR(s,a,d.data)){let h=p4(a,e,t,o,r,u);if(h!==Br)return h}l=e[a+8],l!==il&&cR(r,e[Se].data[a+8]===u)&&lR(s,a,e)?(o=d,a=Pp(l),e=kp(l,e)):a=-1}}return i}function p4(n,e,t,r,i,s){let o=e[Se],a=o.data[n+8],l=r==null?sg(a)&&Nw:r!=o&&(a.type&3)!==0,u=i&Ee.Host&&s===a,d=g4(a,o,t,l,u);return d!==null?dl(e,o,d,a):Br}function g4(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,u=n.directiveEnd,d=s>>20,h=r?a:a+d,g=i?a+d:u;for(let m=h;m<g;m++){let y=o[m];if(m<l&&t===y||m>=l&&y.type===t)return m}if(i){let m=o[l];if(m&&_s(m)&&m.type===t)return l}return null}function dl(n,e,t,r){let i=n[t],s=e.data;if(o4(i)){let o=i;o.resolving&&qB(HB(s[t]));let a=Op(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?Nn(o.injectImpl):null,d=TM(n,r,Ee.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&i4(t,s[t],e)}finally{u!==null&&Nn(u),Op(a),o.resolving=!1,RM()}}return i}function m4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Fu)?n[Fu]:void 0;return typeof e=="number"?e>=0?e&kM:_4:e}function lR(n,e,t){let r=1<<n;return!!(t[e+(n>>OM)]&r)}function cR(n,e){return!(n&Ee.Self)&&!(n&Ee.Host&&e)}var Ao=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return jM(this._tNode,this._lView,e,eg(r),t)}};function _4(){return new Ao(vn(),Le())}function Vo(n){return qu(()=>{let e=n.prototype.constructor,t=e[Cp]||kw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Cp]||kw(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function kw(n){return LR(n)?()=>{let e=kw(gn(n));return e&&e()}:xo(n)}function y4(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[pe]&2048&&!(o[pe]&512);){let a=UM(s,o,t,r|Ee.Self,Br);if(a!==Br)return a;let l=s.parent;if(!l){let u=o[lM];if(u){let d=u.get(t,Br,r);if(d!==Br)return d}l=BM(o),o=o[_l]}s=l}return i}function BM(n){let e=n[Se],t=e.type;return t===2?e.declTNode:t===1?n[Ir]:null}function bE(n){return f4(vn(),n)}function uR(n,e=null,t=null,r){let i=$M(n,e,t,r);return i.resolveInjectorInitializers(),i}function $M(n,e=null,t=null,r,i=new Set){let s=[t||tr,y$(n)];return r=r||(typeof n=="object"?void 0:mn(n)),new Uu(s,e||gE(),r||null,i)}var Bn=class n{static{this.THROW_IF_NOT_FOUND=Vu}static{this.NULL=new Tp}static create(e,t){if(Array.isArray(e))return uR({name:""},t,e,"");{let r=e.name??"";return uR({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=X({token:n,providedIn:"any",factory:()=>L(GR)})}static{this.__NG_ELEMENT_ID__=-1}};var v4=new K("");v4.__NG_ELEMENT_ID__=n=>{let e=vn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&Ee.Optional)return null;throw new te(204,!1)};var w4="ngOriginalError";function hw(n){return n[w4]}var HM=!0,DE=(()=>{class n{static{this.__NG_ELEMENT_ID__=E4}static{this.__NG_ENV_ID__=t=>t}}return n})(),Ow=class extends DE{constructor(e){super(),this._lView=e}onDestroy(e){return vM(this._lView,e),()=>U$(this._lView,e)}};function E4(){return new Ow(Le())}var vl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Fw=class extends it{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,aM()&&(this.destroyRef=W(DE,{optional:!0})??void 0,this.pendingTasks=W(vl,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof _t&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},yt=Fw;function Lp(...n){}function qM(n){let e,t;function r(){n=Lp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function dR(n){return queueMicrotask(()=>n()),()=>{n=Lp}}var TE="isAngularZone",Vp=TE+"_ID",I4=0,De=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=HM}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,D4(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(TE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,C4,Lp,Lp);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},C4={};function SE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function b4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qM(()=>{n.callbackScheduled=!1,Lw(n),n.isCheckStableRunning=!0,SE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Lw(n)}function D4(n){let e=()=>{b4(n)},t=I4++;n._inner=n._inner.fork({name:"angular",properties:{[TE]:!0,[Vp]:t,[Vp+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(T4(l))return r.invokeTask(s,o,a,l);try{return hR(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),fR(n)}},onInvoke:(r,i,s,o,a,l,u)=>{try{return hR(n),r.invoke(s,o,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!S4(l)&&e(),fR(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Lw(n),SE(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Lw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function hR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fR(n){n._nesting--,SE(n)}var jp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function T4(n){return zM(n,"__ignore_ng_zone__")}function S4(n){return zM(n,"__scheduler_tick__")}function zM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function A4(n="zone.js",e){return n==="noop"?new jp:n==="zone.js"?new De(e):n}var Ri=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&hw(e);for(;t&&hw(t);)t=hw(t);return t||null}},x4=new K("",{providedIn:"root",factory:()=>{let n=W(De),e=W(Ri);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function R4(){return dg(vn(),Le())}function dg(n,e){return new Yr(ir(n,e))}var Yr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=R4}}return n})();function GM(n){return(n.flags&128)===128}var WM=new Map,M4=0;function N4(){return M4++}function P4(n){WM.set(n[ig],n)}function Vw(n){WM.delete(n[ig])}var pR="__ngContext__";function ko(n,e){ps(e)?(n[pR]=e[ig],P4(e)):n[pR]=e}function KM(n){return YM(n[Bu])}function QM(n){return YM(n[wr])}function YM(n){for(;n!==null&&!Pi(n);)n=n[wr];return n}var jw;function ZM(n){jw=n}function k4(){if(jw!==void 0)return jw;if(typeof document<"u")return document;throw new te(210,!1)}var hg=new K("",{providedIn:"root",factory:()=>O4}),O4="ng",AE=new K(""),Bt=new K("",{providedIn:"platform",factory:()=>"unknown"});var xE=new K("",{providedIn:"root",factory:()=>k4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var F4="h",L4="b";var V4=()=>null;function RE(n,e,t=!1){return V4(n,e,t)}var XM=!1,j4=new K("",{providedIn:"root",factory:()=>XM});var fp;function U4(){if(fp===void 0&&(fp=null,Xt.trustedTypes))try{fp=Xt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fp}function B4(n){return U4()?.createScriptURL(n)||n}var pp;function $4(){if(pp===void 0&&(pp=null,Xt.trustedTypes))try{pp=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return pp}function gR(n){return $4()?.createScriptURL(n)||n}var Up=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${OR})`}};function Wu(n){return n instanceof Up?n.changingThisBreaksApplicationSecurity:n}function ME(n,e){let t=H4(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${OR})`)}return t===e}function H4(n){return n instanceof Up&&n.getTypeName()||null}var q4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function JM(n){return n=String(n),n.match(q4)?n:"unsafe:"+n}var fg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(fg||{});function wn(n){let e=nN();return e?e.sanitize(fg.URL,n)||"":ME(n,"URL")?Wu(n):JM(Jp(n))}function z4(n){let e=nN();if(e)return gR(e.sanitize(fg.RESOURCE_URL,n)||"");if(ME(n,"ResourceURL"))return gR(Wu(n));throw new te(904,!1)}function eN(n){return B4(n[0])}function G4(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?z4:wn}function tN(n,e,t){return G4(e,t)(n)}function nN(){let n=Le();return n&&n[Hr].sanitizer}function rN(n){return n instanceof Function?n():n}function W4(n){return(n??W(Bn)).get(Bt)==="browser"}var Wr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wr||{}),K4;function NE(n,e){return K4(n,e)}function tl(n,e,t,r,i){if(r!=null){let s,o=!1;Pi(r)?s=r:ps(r)&&(o=!0,r=r[Ni]);let a=Gr(r);n===0&&t!==null?i==null?lN(e,t,a):Bp(e,t,a,i||null,!0):n===1&&t!==null?Bp(e,t,a,i||null,!0):n===2?cH(e,a,o):n===3&&e.destroyNode(a),s!=null&&dH(e,n,s,t,i)}}function Q4(n,e){return n.createText(e)}function Y4(n,e,t){n.setValue(e,t)}function iN(n,e,t){return n.createElement(e,t)}function Z4(n,e){sN(n,e),e[Ni]=null,e[Ir]=null}function X4(n,e,t,r,i,s){r[Ni]=i,r[Ir]=e,pg(n,r,t,1,i,s)}function sN(n,e){e[Hr].changeDetectionScheduler?.notify(9),pg(n,e,e[Rt],2,null,null)}function J4(n){let e=n[Bu];if(!e)return fw(n[Se],n);for(;e;){let t=null;if(ps(e))t=e[Bu];else{let r=e[rr];r&&(t=r)}if(!t){for(;e&&!e[wr]&&e!==n;)ps(e)&&fw(e[Se],e),e=e[_n];e===null&&(e=n),ps(e)&&fw(e[Se],e),t=e&&e[wr]}e=t}}function eH(n,e,t,r){let i=rr+r,s=t.length;r>0&&(t[i-1][wr]=e),r<s-rr?(e[wr]=t[i],zR(t,rr+r,e)):(t.push(e),e[wr]=null),e[_n]=t;let o=e[cl];o!==null&&t!==o&&oN(o,e);let a=e[ul];a!==null&&a.insertView(n),xw(e),e[pe]|=128}function oN(n,e){let t=n[Rp],r=e[_n];if(ps(r))n[pe]|=Mp.HasTransplantedViews;else{let i=r[_n][qr];e[qr]!==i&&(n[pe]|=Mp.HasTransplantedViews)}t===null?n[Rp]=[e]:t.push(e)}function PE(n,e){let t=n[Rp],r=t.indexOf(e);t.splice(r,1)}function Uw(n,e){if(n.length<=rr)return;let t=rr+e,r=n[t];if(r){let i=r[cl];i!==null&&i!==n&&PE(i,r),e>0&&(n[t-1][wr]=r[wr]);let s=Dp(n,rr+e);Z4(r[Se],r);let o=s[ul];o!==null&&o.detachView(s[Se]),r[_n]=null,r[wr]=null,r[pe]&=-129}return r}function aN(n,e){if(!(e[pe]&256)){let t=e[Rt];t.destroyNode&&pg(n,e,t,3,null,null),J4(e)}}function fw(n,e){if(e[pe]&256)return;let t=Ne(null);try{e[pe]&=-129,e[pe]|=256,e[nr]&&Vv(e[nr]),nH(n,e),tH(n,e),e[Se].type===1&&e[Rt].destroy();let r=e[cl];if(r!==null&&Pi(e[_n])){r!==e[_n]&&PE(r,e);let i=e[ul];i!==null&&i.detachView(n)}Vw(e)}finally{Ne(t)}}function tH(n,e){let t=n.cleanup,r=e[Ap];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Ap]=null);let i=e[fs];if(i!==null){e[fs]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function nH(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Po)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Ur(4,a,l);try{l.call(a)}finally{Ur(5,a,l)}}else{Ur(4,i,s);try{s.call(i)}finally{Ur(5,i,s)}}}}}function rH(n,e,t){return iH(n,e.parent,t)}function iH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ni];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===$r.None||s===$r.Emulated)return null}return ir(r,t)}}function Bp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function lN(n,e,t){n.appendChild(e,t)}function mR(n,e,t,r,i){r!==null?Bp(n,e,t,r,i):lN(n,e,t)}function cN(n,e){return n.parentNode(e)}function sH(n,e){return n.nextSibling(e)}function oH(n,e,t){return lH(n,e,t)}function aH(n,e,t){return n.type&40?ir(n,t):null}var lH=aH,_R;function kE(n,e,t,r){let i=rH(n,r,e),s=e[Rt],o=r.parent||e[Ir],a=oH(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)mR(s,i,t[l],a,!1);else mR(s,i,t,a,!1);_R!==void 0&&_R(s,r,e,t,i)}function Ou(n,e){if(e!==null){let t=e.type;if(t&3)return ir(e,n);if(t&4)return Bw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ou(n,r);{let i=n[e.index];return Pi(i)?Bw(-1,i):Gr(i)}}else{if(t&128)return Ou(n,e.next);if(t&32)return NE(e,n)()||Gr(n[e.index]);{let r=uN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mo(n[qr]);return Ou(i,r)}else return Ou(n,e.next)}}}return null}function uN(n,e){if(e!==null){let r=n[qr][Ir],i=e.projection;return r.projection[i]}return null}function Bw(n,e){let t=rr+n+1;if(t<e.length){let r=e[t],i=r[Se].firstChild;if(i!==null)return Ou(r,i)}return e[Ro]}function cH(n,e,t){n.removeChild(null,e,t)}function OE(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(o&&e===0&&(a&&ko(Gr(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)OE(n,e,t.child,r,i,s,!1),tl(e,n,i,a,s);else if(l&32){let u=NE(t,r),d;for(;d=u();)tl(e,n,i,d,s);tl(e,n,i,a,s)}else l&16?uH(n,e,r,t,i,s):tl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function pg(n,e,t,r,i,s){OE(t,r,n.firstChild,e,i,s,!1)}function uH(n,e,t,r,i,s){let o=t[qr],l=o[Ir].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let d=l[u];tl(e,n,i,d,s)}else{let u=l,d=o[_n];GM(r)&&(u.flags|=128),OE(n,e,u,d,i,s,!0)}}function dH(n,e,t,r,i){let s=t[Ro],o=Gr(t);s!==o&&tl(e,n,r,s,i);for(let a=rr;a<t.length;a++){let l=t[a];pg(l[Se],l,n,e,r,s)}}function hH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Wr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wr.Important),n.setStyle(t,r,i,s))}}function fH(n,e,t){n.setAttribute(e,"style",t)}function dN(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function hN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Cw(n,e,r),i!==null&&dN(n,e,i),s!==null&&fH(n,e,s)}var Oi={};function $(n=1){fN(yn(),Le(),yl()+n,!1)}function fN(n,e,t,r){if(!r)if((e[pe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&wp(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Ep(e,s,0,t)}No(t)}function ee(n,e=Ee.Default){let t=Le();if(t===null)return L(n,e);let r=vn();return jM(r,t,gn(n),e)}function pN(){let n="invalid";throw new Error(n)}function gN(n,e,t,r,i,s){let o=Ne(null);try{let a=null;i&gs.SignalBased&&(a=e[r][Di]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gs.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):dM(e,a,r,s)}finally{Ne(o)}}function pH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)No(~i);else{let s=i,o=t[++r],a=t[++r];X$(o,s);let l=e[s];a(2,l)}}}finally{No(-1)}}function gg(n,e,t,r,i,s,o,a,l,u,d){let h=e.blueprint.slice();return h[Ni]=i,h[pe]=r|4|128|8|64,(u!==null||n&&n[pe]&2048)&&(h[pe]|=2048),_M(h),h[_n]=h[_l]=n,h[Er]=t,h[Hr]=o||n&&n[Hr],h[Rt]=a||n&&n[Rt],h[ll]=l||n&&n[ll]||null,h[Ir]=s,h[ig]=N4(),h[Sp]=d,h[lM]=u,h[qr]=e.type==2?n[qr]:h,h}function mg(n,e,t,r,i){let s=n.data[e];if(s===null)s=gH(n,e,t,r,i),Z$()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=W$();s.injectorIndex=o===null?-1:o.injectorIndex}return Gu(s,!0),s}function gH(n,e,t,r,i){let s=IM(),o=CM(),a=o?s:s&&s.parent,l=n.data[e]=wH(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function mN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function _N(n,e,t,r,i){let s=yl(),o=r&2;try{No(-1),o&&e.length>zr&&fN(n,e,zr,!1),Ur(o?2:0,i),t(r,i)}finally{No(s),Ur(o?3:1,i)}}function yN(n,e,t){if(uM(e)){let r=Ne(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{Ne(r)}}}function vN(n,e,t){EM()&&(TH(n,e,t,ir(t,e)),(t.flags&64)===64&&bN(n,e,t))}function wN(n,e,t=ir){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function EN(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=FE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function FE(n,e,t,r,i,s,o,a,l,u,d){let h=zr+r,g=h+i,m=mH(h,g),y=typeof u=="function"?u():u;return m[Se]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:d}}function mH(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Oi);return t}function _H(n,e,t,r){let s=r.get(j4,XM)||t===$r.ShadowDom,o=n.selectRootElement(e,s);return yH(o),o}function yH(n){vH(n)}var vH=()=>null;function wH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return q$()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yR(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=gs.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}n===0?vR(r,t,u,a,l):vR(r,t,u,a)}return r}function vR(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function EH(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,u=null;for(let d=r;d<i;d++){let h=s[d],g=t?t.get(h):null,m=g?g.inputs:null,y=g?g.outputs:null;l=yR(0,h.inputs,d,l,m),u=yR(1,h.outputs,d,u,y);let C=l!==null&&o!==null&&!fE(e)?LH(l,d,o):null;a.push(C)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function IH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function LE(n,e,t,r,i,s,o,a){let l=ir(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(VE(n,t,d,r,i),sg(e)&&CH(t,e.index)):e.type&3?(r=IH(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function CH(n,e){let t=ws(e,n);t[pe]&16||(t[pe]|=64)}function IN(n,e,t,r){if(EM()){let i=r===null?null:{"":-1},s=AH(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&CN(n,e,t,o,i,a),i&&xH(t,r,i)}t.mergedAttrs=ju(t.mergedAttrs,t.attrs)}function CN(n,e,t,r,i,s){for(let u=0;u<r.length;u++)Pw(Fp(t,e),n,r[u].type);MH(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=mN(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=ju(t.mergedAttrs,d.hostAttrs),NH(n,t,e,l,d),RH(l,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}EH(n,t,s)}function bH(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;DH(o)!=a&&o.push(a),o.push(t,r,s)}}function DH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function TH(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;sg(t)&&PH(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fp(t,e),ko(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let l=n.data[a],u=dl(e,n,a,t);if(ko(u,e),o!==null&&FH(e,a-i,u,l,t,o),_s(l)){let d=ws(t.index,e);d[Er]=dl(e,n,a,t)}}}function bN(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=J$();try{No(s);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Rw(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&SH(l,u)}}finally{No(-1),Rw(o)}}function SH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function AH(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(c$(e,o.selectors,!1))if(r||(r=[]),_s(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;$w(n,e,l)}else r.unshift(o),$w(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function $w(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function xH(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new te(-301,!1);r.push(e[i],s)}}}function RH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_s(e)&&(t[""]=n)}}function MH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function NH(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=xo(i.type,!0)),o=new Po(s,_s(i),ee);n.blueprint[r]=o,t[r]=o,bH(n,e,r,mN(n,t,i.hostVars,Oi),i)}function PH(n,e,t){let r=ir(e,n),i=EN(t),s=n[Hr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=_g(n,gg(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function kH(n,e,t,r,i,s){let o=ir(n,e);OH(e[Rt],o,s,n.value,t,r,i)}function OH(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Jp(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function FH(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],d=o[a++],h=o[a++];gN(r,t,l,u,d,h)}}function LH(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function DN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function TN(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];DM(s),a.contentQueries(2,e[o],o)}}}finally{Ne(r)}}}function _g(n,e){return n[Bu]?n[iR][wr]=e:n[Bu]=e,n[iR]=e,e}function Hw(n,e,t){DM(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function VH(n){return n[Ap]??=[]}function jH(n){return n.cleanup??=[]}function SN(n,e){let t=n[ll],r=t?t.get(Ri,null):null;r&&r.handleError(e)}function VE(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=t[s++],u=e[o],d=n.data[o];gN(d,u,r,a,l,i)}}function UH(n,e,t){let r=gM(e,n);Y4(n[Rt],r,t)}function BH(n,e){let t=ws(e,n),r=t[Se];$H(r,t);let i=t[Ni];i!==null&&t[Sp]===null&&(t[Sp]=RE(i,t[ll])),jE(r,t,t[Er])}function $H(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function jE(n,e,t){yE(e);try{let r=n.viewQuery;r!==null&&Hw(1,r,t);let i=n.template;i!==null&&_N(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ul]?.finishViewCreation(n),n.staticContentQueries&&TN(n,e),n.staticViewQueries&&Hw(2,n.viewQuery,t);let s=n.components;s!==null&&HH(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,vE()}}function HH(n,e){for(let t=0;t<e.length;t++)BH(n,e[t])}function qH(n,e,t,r){let i=Ne(null);try{let s=e.tView,a=n[pe]&4096?4096:16,l=gg(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[cl]=u;let d=n[ul];return d!==null&&(l[ul]=d.createEmbeddedView(s)),jE(s,l,t),l}finally{Ne(i)}}function wR(n,e){return!e||e.firstChild===null||GM(n)}function zH(n,e,t,r=!0){let i=e[Se];if(eH(i,e,n,t),r){let o=Bw(t,n),a=e[Rt],l=cN(a,n[Ro]);l!==null&&X4(i,n[Ir],a,e,l,o)}let s=e[Sp];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function $p(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Gr(s)),Pi(s)&&GH(s,r);let o=t.type;if(o&8)$p(n,e,t.child,r);else if(o&32){let a=NE(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=uN(e,t);if(Array.isArray(a))r.push(...a);else{let l=Mo(e[qr]);$p(l[Se],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function GH(n,e){for(let t=rr;t<n.length;t++){let r=n[t],i=r[Se].firstChild;i!==null&&$p(r[Se],r,i,e)}n[Ro]!==n[Ni]&&e.push(n[Ro])}var AN=[];function WH(n){return n[nr]??KH(n)}function KH(n){let e=AN.pop()??Object.create(YH);return e.lView=n,e}function QH(n){n.lView[nr]!==n&&(n.lView=null,AN.push(n))}var YH=ye(q({},Su),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ag(n.lView)},consumerOnSignalRead(){this.lView[nr]=this}});function ZH(n){let e=n[nr]??Object.create(XH);return e.lView=n,e}var XH=ye(q({},Su),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Mo(n.lView);for(;e&&!xN(e[Se]);)e=Mo(e);e&&yM(e)},consumerOnSignalRead(){this.lView[nr]=this}});function xN(n){return n.type!==2}var JH=100;function RN(n,e=!0,t=0){let r=n[Hr],i=r.rendererFactory,s=!1;s||i.begin?.();try{e3(n,t)}catch(o){throw e&&SN(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function e3(n,e){let t=bM();try{oR(!0),qw(n,e);let r=0;for(;og(n);){if(r===JH)throw new te(103,!1);r++,qw(n,1)}}finally{oR(t)}}function t3(n,e,t,r){let i=e[pe];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Hr].inlineEffectRunner?.flush(),yE(e);let a=!0,l=null,u=null;s||(xN(n)?(u=WH(e),l=Lf(u)):px()===null?(a=!1,u=ZH(e),l=Lf(u)):e[nr]&&(Vv(e[nr]),e[nr]=null));try{_M(e),Q$(n.bindingStartIndex),t!==null&&_N(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&wp(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Ep(e,m,0,null),cw(e,0)}if(o||n3(e),MN(e,0),n.contentQueries!==null&&TN(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&wp(e,m)}else{let m=n.contentHooks;m!==null&&Ep(e,m,1),cw(e,1)}pH(n,e);let h=n.components;h!==null&&PN(e,h,0);let g=n.viewQuery;if(g!==null&&Hw(2,g,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&wp(e,m)}else{let m=n.viewHooks;m!==null&&Ep(e,m,2),cw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lw]){for(let m of e[lw])m();e[lw]=null}s||(e[pe]&=-73)}catch(d){throw s||ag(e),d}finally{u!==null&&(Fv(u,l),a&&QH(u)),vE()}}function MN(n,e){for(let t=KM(n);t!==null;t=QM(t))for(let r=rr;r<t.length;r++){let i=t[r];NN(i,e)}}function n3(n){for(let e=KM(n);e!==null;e=QM(e)){if(!(e[pe]&Mp.HasTransplantedViews))continue;let t=e[Rp];for(let r=0;r<t.length;r++){let i=t[r];yM(i)}}}function r3(n,e,t){let r=ws(e,n);NN(r,t)}function NN(n,e){_E(n)&&qw(n,e)}function qw(n,e){let r=n[Se],i=n[pe],s=n[nr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Lv(s)),o||=!1,s&&(s.dirty=!1),n[pe]&=-9217,o)t3(r,n,r.template,n[Er]);else if(i&8192){MN(n,1);let a=r.components;a!==null&&PN(n,a,1)}}function PN(n,e,t){for(let r=0;r<e.length;r++)r3(n,e[r],t)}function UE(n,e){let t=bM()?64:1088;for(n[Hr].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=Mo(n);if(Sw(n)&&!r)return n;n=r}return null}var Oo=class{get rootNodes(){let e=this._lView,t=e[Se];return $p(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Er]}set context(e){this._lView[Er]=e}get destroyed(){return(this._lView[pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_n];if(Pi(e)){let t=e[xp],r=t?t.indexOf(this):-1;r>-1&&(Uw(e,r),Dp(t,r))}this._attachedToViewContainer=!1}aN(this._lView[Se],this._lView)}onDestroy(e){vM(this._lView,e)}markForCheck(){UE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){xw(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,RN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Sw(this._lView),t=this._lView[cl];t!==null&&!e&&PE(t,this._lView),sN(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Sw(this._lView),r=this._lView[cl];r!==null&&!t&&oN(r,this._lView),xw(this._lView)}},yg=(()=>{class n{static{this.__NG_ELEMENT_ID__=o3}}return n})(),i3=yg,s3=class extends i3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=qH(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Oo(i)}};function o3(){return a3(vn(),Le())}function a3(n,e){return n.type&4?new s3(e,n,dg(n,e)):null}var Hie=new RegExp(`^(\\d+)*(${L4}|${F4})*(.*)`);var l3=()=>null;function ER(n,e){return l3(n,e)}var hl=class{},BE=new K("",{providedIn:"root",factory:()=>!1});var kN=new K(""),ON=new K(""),zw=class{},Hp=class{};function c3(n){let e=Error(`No component factory found for ${mn(n)}.`);return e[u3]=n,e}var u3="ngComponent";var Gw=class{resolveComponentFactory(e){throw c3(e)}},fl=class{static{this.NULL=new Gw}},pl=class{},Fi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>d3()}}return n})();function d3(){let n=Le(),e=vn(),t=ws(e.index,n);return(ps(t)?t:n)[Rt]}var h3=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>null})}}return n})();function Ww(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Kx(i,a);else if(s==2){let l=a,u=e[++o];r=Kx(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var qp=class extends fl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ms(e);return new gl(t,this.ngModule)}};function IR(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gs.None;e?t.push({propName:o,templateName:r,isSignal:(a&gs.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function f3(n){let e=n.toLowerCase();return e==="svg"?O$:e==="math"?F$:null}var gl=class extends Hp{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=IR(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return IR(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=f$(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ne(null);try{i=i||this.ngModule;let o=i instanceof Un?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Mw(e,o):e,l=a.get(pl,null);if(l===null)throw new te(407,!1);let u=a.get(h3,null),d=a.get(hl,null),h={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:d},g=l.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=r?_H(g,r,this.componentDef.encapsulation,a):iN(g,m,f3(m)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let b=null;y!==null&&(b=RE(y,a,!0));let V=FE(0,null,null,1,0,null,null,null,null,null,null),B=gg(null,V,null,C,null,null,h,g,a,null,b);yE(B);let O,z,oe=null;try{let J=this.componentDef,I,v=null;J.findHostDirectiveDefs?(I=[],v=new Map,J.findHostDirectiveDefs(J,I,v),I.push(J)):I=[J];let w=p3(B,y);oe=g3(w,y,J,I,B,h,g),z=mM(V,zr),y&&y3(g,J,y,r),t!==void 0&&v3(z,this.ngContentSelectors,t),O=_3(oe,J,I,v,B,[w3]),jE(V,B,null)}catch(J){throw oe!==null&&Vw(oe),Vw(B),J}finally{vE()}return new Kw(this.componentType,O,dg(z,B),B,z)}finally{Ne(s)}}},Kw=class extends zw{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Oo(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;VE(s[Se],s,i,e,t),this.previousInputValues.set(e,t);let o=ws(this._tNode.index,s);UE(o,1)}}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function p3(n,e){let t=n[Se],r=zr;return n[r]=e,mg(t,r,2,"#host",null)}function g3(n,e,t,r,i,s,o){let a=i[Se];m3(r,n,e,o);let l=null;e!==null&&(l=RE(e,i[ll]));let u=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=gg(i,EN(t),null,d,i[n.index],n,s,u,null,null,l);return a.firstCreatePass&&$w(a,n,r.length-1),_g(i,h),i[n.index]=h}function m3(n,e,t,r){for(let i of n)e.mergedAttrs=ju(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ww(e,e.mergedAttrs,!0),t!==null&&hN(r,t,e))}function _3(n,e,t,r,i,s){let o=vn(),a=i[Se],l=ir(o,i);CN(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,g=dl(i,a,h,o);ko(g,i)}bN(a,i,o),l&&ko(l,i);let u=dl(i,a,o.directiveStart+o.componentOffset,o);if(n[Er]=i[Er]=u,s!==null)for(let d of s)d(u,e);return yN(a,o,i),u}function y3(n,e,t,r){if(r)Cw(n,t,["ng-version","18.2.8"]);else{let{attrs:i,classes:s}=p$(e.selectors[0]);i&&Cw(n,t,i),s&&s.length>0&&dN(n,t,s.join(" "))}}function v3(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function w3(){let n=vn();IE(Le()[Se],n)}var wl=(()=>{class n{static{this.__NG_ELEMENT_ID__=E3}}return n})();function E3(){let n=vn();return C3(n,Le())}var I3=wl,FN=class extends I3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return dg(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=CE(this._hostTNode,this._hostLView);if(PM(e)){let t=kp(e,this._hostLView),r=Pp(e),i=t[Se].data[r+8];return new Ao(i,t)}else return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=CR(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ER(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,wR(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!M$(e),a;if(o)a=t;else{let y=t||{};a=y.index,r=y.injector,i=y.projectableNodes,s=y.environmentInjector||y.ngModuleRef}let l=o?e:new gl(ms(e)),u=r||this.parentInjector;if(!s&&l.ngModule==null){let C=(o?u:this.parentInjector).get(Un,null);C&&(s=C)}let d=ms(l.componentType??{}),h=ER(this._lContainer,d?.id??null),g=h?.firstChild??null,m=l.create(u,i,g,s);return this.insertImpl(m.hostView,a,wR(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(V$(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[_n],u=new FN(l,l[Ir],l[_n]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return zH(o,i,s,r),e.attachToViewContainerRef(),zR(pw(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=CR(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Uw(this._lContainer,t);r&&(Dp(pw(this._lContainer),t),aN(r[Se],r))}detach(e){let t=this._adjustIndex(e,-1),r=Uw(this._lContainer,t);return r&&Dp(pw(this._lContainer),t)!=null?new Oo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function CR(n){return n[xp]}function pw(n){return n[xp]||(n[xp]=[])}function C3(n,e){let t,r=e[n.index];return Pi(r)?t=r:(t=DN(r,e,null,n),e[n.index]=t,_g(e,t)),D3(t,e,n,r),new FN(t,n,e)}function b3(n,e){let t=n[Rt],r=t.createComment(""),i=ir(e,n),s=cN(t,i);return Bp(t,s,r,sH(t,i),!1),r}var D3=A3,T3=()=>!1;function S3(n,e,t){return T3(n,e,t)}function A3(n,e,t,r){if(n[Ro])return;let i;t.type&8?i=Gr(r):i=b3(e,t),n[Ro]=i}var bR=new Set;function Ku(n){bR.has(n)||(bR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function x3(n){return typeof n=="function"&&n[Di]!==void 0}function El(n,e){Ku("NgSignals");let t=Dx(n),r=t[Di];return e?.equal&&(r.equal=e.equal),t.set=i=>jv(r,i),t.update=i=>Tx(r,i),t.asReadonly=R3.bind(t),t}function R3(){let n=this[Di];if(n.readonlyFn===void 0){let e=()=>this();e[Di]=n,n.readonlyFn=e}return n.readonlyFn}function LN(n){return x3(n)&&typeof n.set=="function"}function M3(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(O3))}return s}return zp.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,g)=>{a.push(""),o.push(r(h).then(m=>{a[u+g]=m,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let l=Promise.all(o).then(()=>F3(s));e.push(l)}),P3(),Promise.all(e).then(()=>{})}var zp=new Map,N3=new Set;function P3(){let n=zp;return zp=new Map,n}function k3(){return zp.size===0}function O3(n){return typeof n=="string"?n:n.text()}function F3(n){N3.delete(n)}function L3(n){return Object.getPrototypeOf(n.prototype).constructor}function sr(n){let e=L3(n.type),t=!0,r=[n];for(;e;){let i;if(_s(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=gp(n.inputs),o.inputTransforms=gp(n.inputTransforms),o.declaredInputs=gp(n.declaredInputs),o.outputs=gp(n.outputs);let a=i.hostBindings;a&&$3(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&U3(n,l),u&&B3(n,u),V3(n,i),OB(n.outputs,i.outputs),_s(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===sr&&(t=!1)}}e=Object.getPrototypeOf(e)}j3(r)}function V3(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function j3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ju(i.hostAttrs,t=ju(t,i.hostAttrs))}}function gp(n){return n===sl?{}:n===tr?[]:n}function U3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function B3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function $3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function $E(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var ys=class{},$u=class{};var Gp=class extends ys{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qp(this);let s=eM(e);this._bootstrapComponents=rN(s.bootstrap),this._r3Injector=$M(e,t,[{provide:ys,useValue:this},{provide:fl,useValue:this.componentFactoryResolver},...r],mn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wp=class extends $u{constructor(e){super(),this.moduleType=e}create(e){return new Gp(this.moduleType,e,[])}};function H3(n,e,t){return new Gp(n,e,t,!1)}var Qw=class extends ys{constructor(e){super(),this.componentFactoryResolver=new qp(this),this.instance=null;let t=new Uu([...e.providers,{provide:ys,useValue:this},{provide:fl,useValue:this.componentFactoryResolver}],e.parent||gE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vg(n,e,t=null){return new Qw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function VN(n){return HE(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function q3(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function HE(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function qE(n,e,t){return n[e]=t}function z3(n,e){return n[e]}function vs(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function G3(n,e,t,r){let i=vs(n,e,t);return vs(n,e+1,r)||i}function W3(n){return(n.flags&32)===32}function K3(n,e,t,r,i,s,o,a,l){let u=e.consts,d=mg(e,n,4,o||null,a||null);IN(e,t,d,Np(u,l)),IE(e,d);let h=d.tView=FE(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function Q3(n,e,t,r,i,s,o,a,l,u){let d=t+zr,h=e.firstCreatePass?K3(d,e,n,r,i,s,o,a,l):e.data[d];Gu(h,!1);let g=Y3(e,n,h,t);wE()&&kE(e,n,g,h),ko(g,n);let m=DN(g,n,g,h);return n[d]=m,_g(n,m),S3(m,h,n),mE(h)&&vN(e,n,h),l!=null&&wN(n,h,u),h}function Ge(n,e,t,r,i,s,o,a){let l=Le(),u=yn(),d=Np(u.consts,s);return Q3(l,u,n,e,t,r,i,d,o,a),Ge}var Y3=Z3;function Z3(n,e,t,r){return EE(!0),e[Rt].createComment("")}var nl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(nl||{}),jN=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Yw=class n{constructor(){this.ngZone=W(De),this.scheduler=W(hl),this.errorHandler=W(Ri,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[nl.EarlyRead,nl.Write,nl.MixedReadWrite,nl.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}},Zw=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function zE(n,e){!e?.injector&&x$(zE);let t=e?.injector??W(Bn);return W4(t)?(Ku("NgAfterNextRender"),J3(n,t,e,!0)):eq}function X3(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function J3(n,e,t,r){let i=e.get(jN);i.impl??=e.get(Yw);let s=t?.phase??nl.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(DE):null,a=new Zw(i.impl,X3(n,s),r,o);return i.impl.register(a),a}var eq={destroy(){}};function wg(n,e,t,r){let i=Le(),s=cg();if(vs(i,s,e)){let o=yn(),a=ug();kH(a,i,n,e,t,r)}return wg}function UN(n,e,t,r){return vs(n,cg(),t)?e+Jp(t)+r:Oi}function mp(n,e){return n<<17|e<<2}function Fo(n){return n>>17&32767}function tq(n){return(n&2)==2}function nq(n,e){return n&131071|e<<17}function Xw(n){return n|2}function ml(n){return(n&131068)>>2}function gw(n,e){return n&-131069|e<<2}function rq(n){return(n&1)===1}function Jw(n){return n|1}function iq(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Fo(o),l=ml(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||zu(h,d)>0)&&(u=!0)}else d=t;if(i)if(l!==0){let g=Fo(n[a+1]);n[r+1]=mp(g,a),g!==0&&(n[g+1]=gw(n[g+1],r)),n[a+1]=nq(n[a+1],r)}else n[r+1]=mp(a,0),a!==0&&(n[a+1]=gw(n[a+1],r)),a=r;else n[r+1]=mp(l,0),a===0?a=r:n[l+1]=gw(n[l+1],r),l=r;u&&(n[r+1]=Xw(n[r+1])),DR(n,d,r,!0),DR(n,d,r,!1),sq(e,d,n,r,s),o=mp(a,l),s?e.classBindings=o:e.styleBindings=o}function sq(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&zu(s,e)>=0&&(t[r+1]=Jw(t[r+1]))}function DR(n,e,t,r){let i=n[t+1],s=e===null,o=r?Fo(i):ml(i),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],u=n[o+1];oq(l,e)&&(a=!0,n[o+1]=r?Jw(u):Xw(u)),o=r?Fo(u):ml(u)}a&&(n[t+1]=r?Xw(i):Jw(i))}function oq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?zu(n,e)>=0:!1}function ie(n,e,t){let r=Le(),i=cg();if(vs(r,i,e)){let s=yn(),o=ug();LE(s,o,r,n,e,r[Rt],t,!1)}return ie}function TR(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";VE(n,t,s[o],o,r)}function Eg(n,e){return aq(n,e,null,!0),Eg}function aq(n,e,t,r){let i=Le(),s=yn(),o=Y$(2);if(s.firstUpdatePass&&cq(s,n,o,r),e!==Oi&&vs(i,o,e)){let a=s.data[yl()];pq(s,a,i,i[Rt],n,i[o+1]=gq(e,t),r,o)}}function lq(n,e){return e>=n.expandoStartIndex}function cq(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[yl()],o=lq(n,t);mq(s,r)&&e===null&&!o&&(e=!1),e=uq(i,s,e,r),iq(i,s,e,t,o,r)}}function uq(n,e,t,r){let i=e4(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=mw(null,n,e,t,r),t=Hu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=mw(i,n,e,t,r),s===null){let l=dq(n,e,r);l!==void 0&&Array.isArray(l)&&(l=mw(null,n,e,l[1],r),l=Hu(l,e.attrs,r),hq(n,e,r,l))}else s=fq(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function dq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ml(r)!==0)return n[Fo(r)]}function hq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Fo(i)]=r}function fq(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Hu(r,o,t)}return Hu(r,e.attrs,t)}function mw(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Hu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Hu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),t$(n,o,t?!0:e[++s]))}return n===void 0?null:n}function pq(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],d=rq(u)?SR(l,e,t,i,ml(u),o):void 0;if(!Kp(d)){Kp(s)||tq(u)&&(s=SR(l,null,t,i,a,o));let h=gM(yl(),t);hH(r,o,h,i,s)}}function SR(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),d=u?l[1]:l,h=d===null,g=t[i+1];g===Oi&&(g=h?tr:void 0);let m=h?ow(g,r):d===r?g:void 0;if(u&&!Kp(m)&&(m=ow(l,r)),Kp(m)&&(a=m,o))return a;let y=n[i+1];i=o?Fo(y):ml(y)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=ow(l,r))}return a}function Kp(n){return n!==void 0}function gq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=mn(Wu(n)))),n}function mq(n,e){return(n.flags&(e?8:16))!==0}function _q(n,e,t,r,i,s){let o=e.consts,a=Np(o,i),l=mg(e,n,2,r,a);return IN(e,t,l,Np(o,s)),l.attrs!==null&&Ww(l,l.attrs,!1),l.mergedAttrs!==null&&Ww(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function A(n,e,t,r){let i=Le(),s=yn(),o=zr+n,a=i[Rt],l=s.firstCreatePass?_q(o,s,i,e,t,r):s.data[o],u=yq(s,i,l,a,e,n);i[o]=u;let d=mE(l);return Gu(l,!0),hN(a,u,l),!W3(l)&&wE()&&kE(s,i,u,l),B$()===0&&ko(u,i),$$(),d&&(vN(s,i,l),yN(s,l,i)),r!==null&&wN(i,l),A}function R(){let n=vn();CM()?K$():(n=n.parent,Gu(n,!1));let e=n;z$(e)&&G$(),H$();let t=yn();return t.firstCreatePass&&(IE(t,n),uM(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&a4(e)&&TR(t,e,Le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&l4(e)&&TR(t,e,Le(),e.stylesWithoutHost,!1),R}function le(n,e,t,r){return A(n,e,t,r),R(),le}var yq=(n,e,t,r,i,s)=>(EE(!0),iN(r,i,r4()));function Il(){return Le()}var So=void 0;function vq(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var wq=["en",[["a","p"],["AM","PM"],So],[["AM","PM"],So,So],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],So,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],So,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",So,"{1} 'at' {0}",So],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",vq],_w={};function or(n){let e=Eq(n),t=AR(e);if(t)return t;let r=e.split("-")[0];if(t=AR(r),t)return t;if(r==="en")return wq;throw new te(701,!1)}function AR(n){return n in _w||(_w[n]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[n]),_w[n]}var It=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(It||{});function Eq(n){return n.toLowerCase().replace(/_/g,"-")}var Qp="en-US";var Iq=Qp;function Cq(n){typeof n=="string"&&(Iq=n.toLowerCase().replace(/_/g,"-"))}var bq=(n,e,t)=>{};function We(n,e,t,r){let i=Le(),s=yn(),o=vn();return BN(s,i,i[Rt],o,n,e,r),We}function Dq(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Ap],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function BN(n,e,t,r,i,s,o){let a=mE(r),u=n.firstCreatePass&&jH(n),d=e[Er],h=VH(e),g=!0;if(r.type&3||o){let C=ir(r,e),b=o?o(C):C,V=h.length,B=o?z=>o(Gr(z[r.index])):r.index,O=null;if(!o&&a&&(O=Dq(n,e,i,r.index)),O!==null){let z=O.__ngLastListenerFn__||O;z.__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,g=!1}else{s=RR(r,e,d,s),bq(C,i,s);let z=t.listen(b,i,s);h.push(s,z),u&&u.push(i,B,V,V+1)}}else s=RR(r,e,d,s);let m=r.outputs,y;if(g&&m!==null&&(y=m[i])){let C=y.length;if(C)for(let b=0;b<C;b+=2){let V=y[b],B=y[b+1],oe=e[V][B].subscribe(s),J=h.length;h.push(s,oe),u&&u.push(i,r.index,J,-(J+1))}}}function xR(n,e,t,r){let i=Ne(null);try{return Ur(6,e,t),t(r)!==!1}catch(s){return SN(n,s),!1}finally{Ur(7,e,t),Ne(i)}}function RR(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?ws(n.index,e):e;UE(o,5);let a=xR(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=xR(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function $t(n=1){return n4(n)}function jo(n,e,t){return $N(n,"",e,"",t),jo}function $N(n,e,t,r,i){let s=Le(),o=UN(s,e,t,r);if(o!==Oi){let a=yn(),l=ug();LE(a,l,s,n,o,s[Rt],i,!1)}return $N}function Tq(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function F(n,e=""){let t=Le(),r=yn(),i=n+zr,s=r.firstCreatePass?mg(r,i,1,e,null):r.data[i],o=Sq(r,t,s,e,n);t[i]=o,wE()&&kE(r,t,o,s),Gu(s,!1)}var Sq=(n,e,t,r,i)=>(EE(!0),Q4(e[Rt],r));function ut(n){return Jt("",n,""),ut}function Jt(n,e,t){let r=Le(),i=UN(r,n,e,t);return i!==Oi&&UH(r,yl(),i),Jt}function Es(n,e,t){LN(e)&&(e=e());let r=Le(),i=cg();if(vs(r,i,e)){let s=yn(),o=ug();LE(s,o,r,n,e,r[Rt],t,!1)}return Es}function Uo(n,e){let t=LN(n);return t&&n.set(e),t}function Is(n,e){let t=Le(),r=yn(),i=vn();return BN(r,t,t[Rt],i,n,e),Is}function Aq(n,e,t){let r=yn();if(r.firstCreatePass){let i=_s(n);eE(t,r.data,r.blueprint,i,!0),eE(e,r.data,r.blueprint,i,!1)}}function eE(n,e,t,r,i){if(n=gn(n),Array.isArray(n))for(let s=0;s<n.length;s++)eE(n[s],e,t,r,i);else{let s=yn(),o=Le(),a=vn(),l=al(n)?n:gn(n.provide),u=oM(n),d=a.providerIndexes&1048575,h=a.directiveStart,g=a.providerIndexes>>20;if(al(n)||!n.multi){let m=new Po(u,i,ee),y=vw(l,e,i?d:d+g,h);y===-1?(Pw(Fp(a,o),s,l),yw(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[y]=m,o[y]=m)}else{let m=vw(l,e,d+g,h),y=vw(l,e,d,d+g),C=m>=0&&t[m],b=y>=0&&t[y];if(i&&!b||!i&&!C){Pw(Fp(a,o),s,l);let V=Mq(i?Rq:xq,t.length,i,r,u);!i&&b&&(t[y].providerFactory=V),yw(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),o.push(V)}else{let V=HN(t[i?y:m],u,!i&&r);yw(s,n,m>-1?m:y,V)}!i&&r&&b&&t[y].componentProviders++}}}function yw(n,e,t,r){let i=al(e),s=I$(e);if(i||s){let l=(s?gn(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,l]):u[d+1].push(r,l)}else u.push(t,l)}}}function HN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function xq(n,e,t,r){return tE(this.multi,[])}function Rq(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=dl(t,t[Se],this.providerFactory.index,r);s=a.slice(0,o),tE(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],tE(i,s);return s}function tE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Mq(n,e,t,r,i){let s=new Po(n,t,ee);return s.multi=[],s.index=e,s.componentProviders=0,HN(s,i,r&&!t),s}function Cs(n,e=[]){return t=>{t.providersResolver=(r,i)=>Aq(r,i?i(n):n,e)}}var Nq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rM(!1,t.type),i=r.length>0?vg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(L(Un))})}}return n})();function qN(n){Ku("NgStandalone"),n.getStandaloneInjector=e=>e.get(Nq).getOrCreateStandaloneInjector(n)}function Ht(n,e,t){let r=lg()+n,i=Le();return i[r]===Oi?qE(i,r,t?e.call(t):e()):z3(i,r)}function GE(n,e,t,r){return GN(Le(),lg(),n,e,t,r)}function Cl(n,e,t,r,i){return Pq(Le(),lg(),n,e,t,r,i)}function zN(n,e){let t=n[e];return t===Oi?void 0:t}function GN(n,e,t,r,i,s){let o=e+t;return vs(n,o,i)?qE(n,o+1,s?r.call(s,i):r(i)):zN(n,o+1)}function Pq(n,e,t,r,i,s,o){let a=e+t;return G3(n,a,i,s)?qE(n,a+2,o?r.call(o,i,s):r(i,s)):zN(n,a+2)}function Ig(n,e){let t=yn(),r,i=n+zr;t.firstCreatePass?(r=kq(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=xo(r.type,!0)),o,a=Nn(ee);try{let l=Op(!1),u=s();return Op(l),Tq(t,Le(),i,u),u}finally{Nn(a)}}function kq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Cg(n,e,t){let r=n+zr,i=Le(),s=L$(i,r);return Oq(i,r)?GN(i,lg(),e,s.transform,t,s):s.transform(t)}function Oq(n,e){return n[Se].data[e].pure}var _p=null;function Fq(n){_p!==null&&(n.defaultEncapsulation!==_p.defaultEncapsulation||n.preserveWhitespaces!==_p.preserveWhitespaces)||(_p=n)}var Mi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},WN=new Mi("18.2.8");var bg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var WE=new K(""),Qu=new K(""),Dg=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,KE||(Lq(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(De),L(Tg),L(Qu))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Tg=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return KE?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Lq(n){KE=n}var KE;function Bo(n){return!!n&&typeof n.then=="function"}function KN(n){return!!n&&typeof n.subscribe=="function"}var Sg=new K(""),QN=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=W(Sg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Bo(s))t.push(s);else if(KN(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QE=new K("");function Vq(){bx(()=>{throw new te(600,!1)})}function jq(n){return n.isBoundToModule}var Uq=10;function Bq(n,e,t){try{let r=t();return Bo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function YN(n,e){return Array.isArray(e)?e.reduce(YN,n):q(q({},n),e)}var bs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(x4),this.afterRenderManager=W(jN),this.zonelessEnabled=W(BE),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new it,this.afterTick=new it,this.componentTypes=[],this.components=[],this.isStable=W(vl).hasPendingTasks.pipe(re(t=>!t)),this._injector=W(Un)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Hp;if(!this._injector.get(QN).done){let g=!i&&JR(t),m=!1;throw new te(405,m)}let o;i?o=t:o=this._injector.get(fl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=jq(o)?void 0:this._injector.get(ys),l=r||o.selector,u=o.create(Bn.NULL,[],l,a),d=u.location.nativeElement,h=u.injector.get(WE,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Ip(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new te(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ne(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(pl,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Uq;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)$q(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>og(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ip(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(QE,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ip(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ip(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $q(n,e,t,r){if(!t&&!og(n))return;RN(n,e,t&&!r?0:1)}var nE=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ag=(()=>{class n{compileModuleSync(t){return new Wp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=eM(t),s=rN(i.declarations).reduce((o,a)=>{let l=ms(a);return l&&o.push(new gl(l)),o},[]);return new nE(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hq=new K("");function qq(n,e,t){let r=new Wp(t);return Promise.resolve(r)}function MR(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var zq=(()=>{class n{constructor(){this.zone=W(De),this.changeDetectionScheduler=W(hl),this.applicationRef=W(bs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Gq({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(ye(q({},ZN()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:ol,multi:!0,useFactory:()=>{let r=W(zq,{optional:!0});return()=>r.initialize()}},{provide:ol,multi:!0,useFactory:()=>{let r=W(Wq);return()=>{r.initialize()}}},e===!0?{provide:kN,useValue:!0}:[],{provide:ON,useValue:t??HM}]}function ZN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Wq=(()=>{class n{constructor(){this.subscription=new _t,this.initialized=!1,this.zone=W(De),this.pendingTasks=W(vl)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Kq=(()=>{class n{constructor(){this.appRef=W(bs),this.taskService=W(vl),this.ngZone=W(De),this.zonelessEnabled=W(BE),this.disableScheduling=W(kN,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new _t,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vp):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(W(ON,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof jp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?dR:qM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,dR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qq(){return typeof $localize<"u"&&$localize.locale||Qp}var xg=new K("",{providedIn:"root",factory:()=>W(xg,Ee.Optional|Ee.SkipSelf)||Qq()});var Yp=new K("");function yp(n){return!n.moduleRef}function Yq(n){let e=yp(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{yp(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ri,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),yp(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Yp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Yp);o.add(s),n.moduleRef.onDestroy(()=>{Ip(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return Bq(r,t,()=>{let s=e.get(QN);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(xg,Qp);if(Cq(o||Qp),yp(n)){let a=e.get(bs);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Zq(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Zq(n,e){let t=n.injector.get(bs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new te(-403,!1);e.push(n)}var XN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,s=()=>A4(r?.ngZone,ye(q({},ZN({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),o=r?.ignoreChangesOutsideZone,a=[Gq({ngZoneFactory:s,ignoreChangesOutsideZone:o}),{provide:hl,useExisting:Kq}],l=H3(t.moduleType,this.injector,a);return Yq({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=YN({},r);return qq(this.injector,i,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Yp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(Bn))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Lu=null,JN=new K("");function Xq(n){if(Lu&&!Lu.get(JN,!1))throw new te(400,!1);Vq(),Lu=n;let e=n.get(XN);return tz(n),e}function YE(n,e,t=[]){let r=`Platform: ${e}`,i=new K(r);return(s=[])=>{let o=eP();if(!o||o.injector.get(JN,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):Xq(Jq(a,r))}return ez(i)}}function Jq(n=[],e){return Bn.create({name:e,providers:[{provide:rg,useValue:"platform"},{provide:Yp,useValue:new Set([()=>Lu=null])},...n]})}function ez(n){let e=eP();if(!e)throw new te(401,!1);return e}function eP(){return Lu?.get(XN)??null}function tz(n){n.get(AE,null)?.forEach(t=>t())}function ZE(){return!1}var Ds=(()=>{class n{static{this.__NG_ELEMENT_ID__=nz}}return n})();function nz(n){return rz(vn(),Le(),(n&16)===16)}function rz(n,e,t){if(sg(n)&&!t){let r=ws(n.index,e);return new Oo(r,r)}else if(n.type&175){let r=e[qr];return new Oo(r,e)}return null}var rE=class{constructor(){}supports(e){return VN(e)}create(e){return new iE(e)}},iz=(n,e)=>e,iE=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||iz}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<NR(r,i,s)?t:r,a=NR(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=l-i;if(u!=d){for(let g=0;g<u;g++){let m=g<s.length?s[g]:s[g]=0,y=m+g;d<=y&&y<u&&(s[g]=m+1)}let h=o.previousIndex;s[h]=d-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!VN(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,q3(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new sE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},sE=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},oE=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Zp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new oE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function NR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var aE=class{constructor(){}supports(e){return e instanceof Map||HE(e)}create(){return new lE}},lE=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||HE(e)))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new cE(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},cE=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function PR(){return new XE([new rE])}var XE=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:PR})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||PR()),deps:[[n,new tg,new Lo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function kR(){return new JE([new aE])}var JE=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:kR})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||kR()),deps:[[n,new tg,new Lo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new te(901,!1)}}return n})();var tP=YE(null,"core",[]),nP=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(bs))}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({})}}return n})();function $o(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function bl(n,e){Ku("NgSignals");let t=Ex(n);return e?.equal&&(t[Di].equal=e.equal),t}function Zr(n){let e=Ne(null);try{return n()}finally{Ne(e)}}function rP(n){let e=ms(n);if(!e)return null;let t=new gl(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var uP=null;function Xr(){return uP}function dP(n){uP??=n}var Vg=class{};var On=new K(""),l0=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>W(sz),providedIn:"platform"})}}return n})(),hP=new K(""),sz=(()=>{class n extends l0{constructor(){super(),this._doc=W(On),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xr().getBaseHref(this._doc)}onPopState(t){let r=Xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function c0(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function iP(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Vi(n){return n&&n[0]!=="?"?"?"+n:n}var Ui=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>W(u0),providedIn:"root"})}}return n})(),fP=new K(""),u0=(()=>{class n extends Ui{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(On).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return c0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Vi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Vi(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Vi(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(l0),L(fP,8))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pP=(()=>{class n extends Ui{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=c0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Vi(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Vi(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(l0),L(fP,8))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Dl=(()=>{class n{constructor(t){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=lz(iP(sP(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Vi(r))}normalize(t){return n.stripTrailingSlash(az(this._basePath,sP(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Vi}static{this.joinWithSlash=c0}static{this.stripTrailingSlash=iP}static{this.\u0275fac=function(r){return new(r||n)(L(Ui))}}static{this.\u0275prov=X({token:n,factory:()=>oz(),providedIn:"root"})}}return n})();function oz(){return new Dl(L(Ui))}function az(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function sP(n){return n.replace(/\/index.html$/,"")}function lz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var En=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(En||{}),Ke=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ke||{}),$n=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}($n||{}),Ts={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function cz(n){return or(n)[It.LocaleId]}function uz(n,e,t){let r=or(n),i=[r[It.DayPeriodsFormat],r[It.DayPeriodsStandalone]],s=ar(i,e);return ar(s,t)}function dz(n,e,t){let r=or(n),i=[r[It.DaysFormat],r[It.DaysStandalone]],s=ar(i,e);return ar(s,t)}function hz(n,e,t){let r=or(n),i=[r[It.MonthsFormat],r[It.MonthsStandalone]],s=ar(i,e);return ar(s,t)}function fz(n,e){let r=or(n)[It.Eras];return ar(r,e)}function Rg(n,e){let t=or(n);return ar(t[It.DateFormat],e)}function Mg(n,e){let t=or(n);return ar(t[It.TimeFormat],e)}function Ng(n,e){let r=or(n)[It.DateTimeFormat];return ar(r,e)}function Bg(n,e){let t=or(n),r=t[It.NumberSymbols][e];if(typeof r>"u"){if(e===Ts.CurrencyDecimal)return t[It.NumberSymbols][Ts.Decimal];if(e===Ts.CurrencyGroup)return t[It.NumberSymbols][Ts.Group]}return r}function gP(n){if(!n[It.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[It.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pz(n){let e=or(n);return gP(e),(e[It.ExtraData][2]||[]).map(r=>typeof r=="string"?e0(r):[e0(r[0]),e0(r[1])])}function gz(n,e,t){let r=or(n);gP(r);let i=[r[It.ExtraData][0],r[It.ExtraData][1]],s=ar(i,e)||[];return ar(s,t)||[]}function ar(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function e0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var mz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pg={},_z=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ji=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ji||{}),je=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(je||{}),Ve=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ve||{});function yz(n,e,t,r){let i=Sz(n);e=Li(t,e)||e;let o=[],a;for(;e;)if(a=_z.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let l=i.getTimezoneOffset();r&&(l=_P(r,l),i=Tz(i,r,!0));let u="";return o.forEach(d=>{let h=bz(d);u+=h?h(i,t,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function jg(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Li(n,e){let t=cz(n);if(Pg[t]??={},Pg[t][e])return Pg[t][e];let r="";switch(e){case"shortDate":r=Rg(n,$n.Short);break;case"mediumDate":r=Rg(n,$n.Medium);break;case"longDate":r=Rg(n,$n.Long);break;case"fullDate":r=Rg(n,$n.Full);break;case"shortTime":r=Mg(n,$n.Short);break;case"mediumTime":r=Mg(n,$n.Medium);break;case"longTime":r=Mg(n,$n.Long);break;case"fullTime":r=Mg(n,$n.Full);break;case"short":let i=Li(n,"shortTime"),s=Li(n,"shortDate");r=kg(Ng(n,$n.Short),[i,s]);break;case"medium":let o=Li(n,"mediumTime"),a=Li(n,"mediumDate");r=kg(Ng(n,$n.Medium),[o,a]);break;case"long":let l=Li(n,"longTime"),u=Li(n,"longDate");r=kg(Ng(n,$n.Long),[l,u]);break;case"full":let d=Li(n,"fullTime"),h=Li(n,"fullDate");r=kg(Ng(n,$n.Full),[d,h]);break}return r&&(Pg[t][e]=r),r}function kg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Cr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function vz(n,e){return Cr(n,3).substring(0,e)}function Mt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=wz(n,s);if((t>0||a>-t)&&(a+=t),n===je.Hours)a===0&&t===-12&&(a=12);else if(n===je.FractionalSeconds)return vz(a,e);let l=Bg(o,Ts.MinusSign);return Cr(a,e,l,r,i)}}function wz(n,e){switch(n){case je.FullYear:return e.getFullYear();case je.Month:return e.getMonth();case je.Date:return e.getDate();case je.Hours:return e.getHours();case je.Minutes:return e.getMinutes();case je.Seconds:return e.getSeconds();case je.FractionalSeconds:return e.getMilliseconds();case je.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Je(n,e,t=En.Format,r=!1){return function(i,s){return Ez(i,s,n,e,t,r)}}function Ez(n,e,t,r,i,s){switch(t){case Ve.Months:return hz(e,i,r)[n.getMonth()];case Ve.Days:return dz(e,i,r)[n.getDay()];case Ve.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let u=pz(e),d=gz(e,i,r),h=u.findIndex(g=>{if(Array.isArray(g)){let[m,y]=g,C=o>=m.hours&&a>=m.minutes,b=o<y.hours||o===y.hours&&a<y.minutes;if(m.hours<y.hours){if(C&&b)return!0}else if(C||b)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return uz(e,i,r)[o<12?0:1];case Ve.Eras:return fz(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function Og(n){return function(e,t,r){let i=-1*r,s=Bg(t,Ts.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ji.Short:return(i>=0?"+":"")+Cr(o,2,s)+Cr(Math.abs(i%60),2,s);case ji.ShortGMT:return"GMT"+(i>=0?"+":"")+Cr(o,1,s);case ji.Long:return"GMT"+(i>=0?"+":"")+Cr(o,2,s)+":"+Cr(Math.abs(i%60),2,s);case ji.Extended:return r===0?"Z":(i>=0?"+":"")+Cr(o,2,s)+":"+Cr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var Iz=0,Lg=4;function Cz(n){let e=jg(n,Iz,1).getDay();return jg(n,0,1+(e<=Lg?Lg:Lg+7)-e)}function mP(n){let e=n.getDay(),t=e===0?-3:Lg-e;return jg(n.getFullYear(),n.getMonth(),n.getDate()+t)}function t0(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=mP(t),o=Cz(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Cr(i,n,Bg(r,Ts.MinusSign))}}function Fg(n,e=!1){return function(t,r){let s=mP(t).getFullYear();return Cr(s,n,Bg(r,Ts.MinusSign),e)}}var n0={};function bz(n){if(n0[n])return n0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Je(Ve.Eras,Ke.Abbreviated);break;case"GGGG":e=Je(Ve.Eras,Ke.Wide);break;case"GGGGG":e=Je(Ve.Eras,Ke.Narrow);break;case"y":e=Mt(je.FullYear,1,0,!1,!0);break;case"yy":e=Mt(je.FullYear,2,0,!0,!0);break;case"yyy":e=Mt(je.FullYear,3,0,!1,!0);break;case"yyyy":e=Mt(je.FullYear,4,0,!1,!0);break;case"Y":e=Fg(1);break;case"YY":e=Fg(2,!0);break;case"YYY":e=Fg(3);break;case"YYYY":e=Fg(4);break;case"M":case"L":e=Mt(je.Month,1,1);break;case"MM":case"LL":e=Mt(je.Month,2,1);break;case"MMM":e=Je(Ve.Months,Ke.Abbreviated);break;case"MMMM":e=Je(Ve.Months,Ke.Wide);break;case"MMMMM":e=Je(Ve.Months,Ke.Narrow);break;case"LLL":e=Je(Ve.Months,Ke.Abbreviated,En.Standalone);break;case"LLLL":e=Je(Ve.Months,Ke.Wide,En.Standalone);break;case"LLLLL":e=Je(Ve.Months,Ke.Narrow,En.Standalone);break;case"w":e=t0(1);break;case"ww":e=t0(2);break;case"W":e=t0(1,!0);break;case"d":e=Mt(je.Date,1);break;case"dd":e=Mt(je.Date,2);break;case"c":case"cc":e=Mt(je.Day,1);break;case"ccc":e=Je(Ve.Days,Ke.Abbreviated,En.Standalone);break;case"cccc":e=Je(Ve.Days,Ke.Wide,En.Standalone);break;case"ccccc":e=Je(Ve.Days,Ke.Narrow,En.Standalone);break;case"cccccc":e=Je(Ve.Days,Ke.Short,En.Standalone);break;case"E":case"EE":case"EEE":e=Je(Ve.Days,Ke.Abbreviated);break;case"EEEE":e=Je(Ve.Days,Ke.Wide);break;case"EEEEE":e=Je(Ve.Days,Ke.Narrow);break;case"EEEEEE":e=Je(Ve.Days,Ke.Short);break;case"a":case"aa":case"aaa":e=Je(Ve.DayPeriods,Ke.Abbreviated);break;case"aaaa":e=Je(Ve.DayPeriods,Ke.Wide);break;case"aaaaa":e=Je(Ve.DayPeriods,Ke.Narrow);break;case"b":case"bb":case"bbb":e=Je(Ve.DayPeriods,Ke.Abbreviated,En.Standalone,!0);break;case"bbbb":e=Je(Ve.DayPeriods,Ke.Wide,En.Standalone,!0);break;case"bbbbb":e=Je(Ve.DayPeriods,Ke.Narrow,En.Standalone,!0);break;case"B":case"BB":case"BBB":e=Je(Ve.DayPeriods,Ke.Abbreviated,En.Format,!0);break;case"BBBB":e=Je(Ve.DayPeriods,Ke.Wide,En.Format,!0);break;case"BBBBB":e=Je(Ve.DayPeriods,Ke.Narrow,En.Format,!0);break;case"h":e=Mt(je.Hours,1,-12);break;case"hh":e=Mt(je.Hours,2,-12);break;case"H":e=Mt(je.Hours,1);break;case"HH":e=Mt(je.Hours,2);break;case"m":e=Mt(je.Minutes,1);break;case"mm":e=Mt(je.Minutes,2);break;case"s":e=Mt(je.Seconds,1);break;case"ss":e=Mt(je.Seconds,2);break;case"S":e=Mt(je.FractionalSeconds,1);break;case"SS":e=Mt(je.FractionalSeconds,2);break;case"SSS":e=Mt(je.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Og(ji.Short);break;case"ZZZZZ":e=Og(ji.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Og(ji.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Og(ji.Long);break;default:return null}return n0[n]=e,e}function _P(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Dz(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Tz(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=_P(e,i);return Dz(n,r*(s-i))}function Sz(n){if(oP(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return jg(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(mz))return Az(r)}let e=new Date(n);if(!oP(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function Az(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,l,u),e}function oP(n){return n instanceof Date&&!isNaN(n.valueOf())}function yP(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var r0=/\s+/,aP=[],vP=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=aP,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(r0):aP}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(r0):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(r0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(ee(Yr),ee(Fi))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var i0=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ss=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new i0(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),lP(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);lP(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ee(wl),ee(yg),ee(XE))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function lP(n,e){n.context.$implicit=e.item}var As=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new s0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cP("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cP("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ee(wl),ee(yg))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),s0=class{constructor(){this.$implicit=null,this.ngIf=null}};function cP(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${mn(e)}'.`)}var wP=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:Wr.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(ee(Yr),ee(JE),ee(Fi))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function EP(n,e){return new te(2100,!1)}var xz=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,IP=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw EP(n,t);return t.replace(xz,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=ng({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var Rz="mediumDate",Mz=new K(""),Nz=new K(""),CP=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??Rz,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return yz(t,o,s||this.locale,a)}catch(o){throw EP(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(ee(xg,16),ee(Mz,24),ee(Nz,24))}}static{this.\u0275pipe=ng({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var bP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({})}}return n})(),d0="browser",Pz="server";function kz(n){return n===d0}function Ho(n){return n===Pz}var DP=(()=>{class n{static{this.\u0275prov=X({token:n,providedIn:"root",factory:()=>kz(W(Bt))?new o0(W(On),window):new a0})}}return n})(),o0=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Oz(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Oz(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var a0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ug=class{};var p0=class extends Vg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},g0=class n extends p0{static makeCurrent(){dP(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Lz();return t==null?null:Vz(t)}resetBaseElement(){Yu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yP(document.cookie,e)}},Yu=null;function Lz(){return Yu=Yu||document.querySelector("base"),Yu?Yu.getAttribute("href"):null}function Vz(n){return new URL(n,document.baseURI).pathname}var m0=class{addToWindow(e){Xt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new te(5103,!1);return s},Xt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Xt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Xt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Xt.frameworkStabilizers||(Xt.frameworkStabilizers=[]),Xt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Xr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},jz=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),_0=new K(""),xP=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(_0),L(De))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),$g=class{constructor(e){this._doc=e}},h0="ng-app-id",RP=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ho(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${h0}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(h0),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(h0,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(On),L(hg),L(xE,8),L(Bt))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),f0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},v0=/%COMP%/g,MP="%COMP%",Uz=`_nghost-${MP}`,Bz=`_ngcontent-${MP}`,$z=!0,Hz=new K("",{providedIn:"root",factory:()=>$z});function qz(n){return Bz.replace(v0,n)}function zz(n){return Uz.replace(v0,n)}function NP(n,e){return e.map(t=>t.replace(v0,n))}var TP=(()=>{class n{constructor(t,r,i,s,o,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ho(a),this.defaultRenderer=new Zu(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===$r.ShadowDom&&(r=ye(q({},r),{encapsulation:$r.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Hg?i.applyToHost(t):i instanceof Xu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case $r.Emulated:s=new Hg(l,u,r,this.appId,d,o,a,h);break;case $r.ShadowDom:return new y0(l,u,t,r,o,a,this.nonce,h);default:s=new Xu(l,u,r,d,o,a,h);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(xP),L(RP),L(hg),L(Hz),L(On),L(Bt),L(De),L(xE))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),Zu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(f0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=f0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=f0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wr.DashCase|Wr.Important)?e.style.setProperty(t,r,i&Wr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Xr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function SP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var y0=class extends Zu{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=NP(i.id,i.styles);for(let d of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xu=class extends Zu{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?NP(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hg=class extends Xu{constructor(e,t,r,i,s,o,a,l){let u=i+"-"+r.id;super(e,t,r,s,o,a,l,u),this.contentAttr=qz(u),this.hostAttr=zz(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Gz=(()=>{class n extends $g{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(On))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})(),AP=["alt","control","meta","shift"],Wz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Qz=(()=>{class n extends $g{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),AP.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Wz[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AP.forEach(o=>{if(o!==i){let a=Kz[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(On))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function Yz(){g0.makeCurrent()}function Zz(){return new Ri}function Xz(){return ZM(document),document}var Jz=[{provide:Bt,useValue:d0},{provide:AE,useValue:Yz,multi:!0},{provide:On,useFactory:Xz,deps:[]}],PP=YE(tP,"browser",Jz),eG=new K(""),tG=[{provide:Qu,useClass:m0,deps:[]},{provide:WE,useClass:Dg,deps:[De,Tg,Qu]},{provide:Dg,useClass:Dg,deps:[De,Tg,Qu]}],nG=[{provide:rg,useValue:"root"},{provide:Ri,useFactory:Zz,deps:[]},{provide:_0,useClass:Gz,multi:!0,deps:[On,De,Bt]},{provide:_0,useClass:Qz,multi:!0,deps:[On]},TP,RP,xP,{provide:pl,useExisting:TP},{provide:Ug,useClass:jz,deps:[]},[]],kP=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:hg,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(eG,12))}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({providers:[...nG,...tG],imports:[bP,nP]})}}return n})();var OP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(On))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var we="primary",hd=Symbol("RouteTitle"),b0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ml(n){return new b0(n)}function rG(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function iG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jr(n[t],e[t]))return!1;return!0}function Jr(n,e){let t=n?D0(n):void 0,r=e?D0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!WP(n[i],e[i]))return!1;return!0}function D0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function KP(n){return n.length>0?n[n.length-1]:null}function Ms(n){return Zv(n)?n:Bo(n)?be(Promise.resolve(n)):se(n)}var sG={exact:YP,subset:ZP},QP={exact:oG,subset:aG,ignored:()=>!0};function LP(n,e,t){return sG[t.paths](n.root,e.root,t.matrixParams)&&QP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function oG(n,e){return Jr(n,e)}function YP(n,e,t){if(!zo(n.segments,e.segments)||!Gg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YP(n.children[r],e.children[r],t))return!1;return!0}function aG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WP(n[t],e[t]))}function ZP(n,e,t){return XP(n,e,e.segments,t)}function XP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!zo(i,t)||e.hasChildren()||!Gg(i,t,r))}else if(n.segments.length===t.length){if(!zo(n.segments,t)||!Gg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!ZP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!zo(n.segments,i)||!Gg(n.segments,i,r)||!n.children[we]?!1:XP(n.children[we],e,s,r)}}function Gg(n,e,t){return e.every((r,i)=>QP[t](n[i].parameters,r.parameters))}var $i=class{constructor(e=new Ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ml(this.queryParams),this._queryParamMap}toString(){return uG.serialize(this)}},Ue=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wg(this)}},qo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ml(this.parameters),this._parameterMap}toString(){return e1(this)}};function lG(n,e){return zo(n,e)&&n.every((t,r)=>Jr(t.parameters,e[r].parameters))}function zo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function cG(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var fd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>new Nl,providedIn:"root"})}}return n})(),Nl=class{parse(e){let t=new S0(e);return new $i(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ju(e.root,!0)}`,r=fG(e.queryParams),i=typeof e.fragment=="string"?`#${dG(e.fragment)}`:"";return`${t}${r}${i}`}},uG=new Nl;function Wg(n){return n.segments.map(e=>e1(e)).join("/")}function Ju(n,e){if(!n.hasChildren())return Wg(n);if(e){let t=n.children[we]?Ju(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${Ju(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=cG(n,(r,i)=>i===we?[Ju(n.children[we],!1)]:[`${i}:${Ju(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${Wg(n)}/${t[0]}`:`${Wg(n)}/(${t.join("//")})`}}function JP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qg(n){return JP(n).replace(/%3B/gi,";")}function dG(n){return encodeURI(n)}function T0(n){return JP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kg(n){return decodeURIComponent(n)}function VP(n){return Kg(n.replace(/\+/g,"%20"))}function e1(n){return`${T0(n.path)}${hG(n.parameters)}`}function hG(n){return Object.entries(n).map(([e,t])=>`;${T0(e)}=${T0(t)}`).join("")}function fG(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${qg(t)}=${qg(i)}`).join("&"):`${qg(t)}=${qg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var pG=/^[^\/()?;#]+/;function w0(n){let e=n.match(pG);return e?e[0]:""}var gG=/^[^\/()?;=#]+/;function mG(n){let e=n.match(gG);return e?e[0]:""}var _G=/^[^=?&#]+/;function yG(n){let e=n.match(_G);return e?e[0]:""}var vG=/^[^&#]+/;function wG(n){let e=n.match(vG);return e?e[0]:""}var S0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new Ue(e,t)),r}parseSegment(){let e=w0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new qo(Kg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=mG(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=w0(this.remaining);i&&(r=i,this.capture(r))}e[Kg(t)]=Kg(r)}parseQueryParam(e){let t=yG(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=wG(this.remaining);o&&(r=o,this.capture(r))}let i=VP(t),s=VP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=w0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[we]:new Ue([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function t1(n){return n.segments.length>0?new Ue([],{[we]:n}):n}function n1(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=n1(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ue(n.segments,e);return EG(t)}function EG(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new Ue(n.segments.concat(e.segments),e.children)}return n}function Go(n){return n instanceof $i}function IG(n,e,t=null,r=null){let i=r1(n);return i1(i,e,t,r)}function r1(n){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let a=new Ue(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=t1(r);return e??i}function i1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return E0(i,i,i,t,r);let s=CG(e);if(s.toRoot())return E0(i,i,new Ue([],{}),t,r);let o=bG(s,i,n),a=o.processChildren?nd(o.segmentGroup,o.index,s.commands):o1(o.segmentGroup,o.index,s.commands);return E0(i,o.segmentGroup,a,t,r)}function Qg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function sd(n){return typeof n=="object"&&n!=null&&n.outlets}function E0(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;n===e?o=t:o=s1(n,e,t);let a=t1(n1(o));return new $i(a,s,i)}function s1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=s1(s,e,t)}),new Ue(n.segments,r)}var Yg=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qg(r[0]))throw new te(4003,!1);let i=r.find(sd);if(i&&i!==KP(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CG(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Yg(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Yg(t,e,r)}var Al=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function bG(n,e,t){if(n.isAbsolute)return new Al(e,!0,0);if(!t)return new Al(e,!1,NaN);if(t.parent===null)return new Al(t,!0,0);let r=Qg(n.commands[0])?0:1,i=t.segments.length-1+r;return DG(t,i,n.numberOfDoubleDots)}function DG(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Al(r,!1,i-s)}function TG(n){return sd(n[0])?n[0].outlets:{[we]:n}}function o1(n,e,t){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return nd(n,e,t);let r=SG(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ue(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new Ue(n.segments.slice(r.pathIndex),n.children),nd(s,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?A0(n,e,t):r.match?nd(n,0,i):A0(n,e,t)}function nd(n,e,t){if(t.length===0)return new Ue(n.segments,{});{let r=TG(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=nd(n.children[we],e,t);return new Ue(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=o1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ue(n.segments,i)}}function SG(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(sd(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!UP(l,u,o))return s;r+=2}else{if(!UP(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function A0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(sd(s)){let l=AG(s.outlets);return new Ue(r,l)}if(i===0&&Qg(t[0])){let l=n.segments[e];r.push(new qo(l.path,jP(t[0]))),i++;continue}let o=sd(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Qg(a)?(r.push(new qo(o,jP(a))),i+=2):(r.push(new qo(o,{})),i++)}return new Ue(r,{})}function AG(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=A0(new Ue([],{}),0,r))}),e}function jP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function UP(n,e,t){return n==t.path&&Jr(e,t.parameters)}var rd="imperative",qt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(qt||{}),lr=class{constructor(e,t){this.id=e,this.url=t}},Pl=class extends lr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=qt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ei=class extends lr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=qt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qn||{}),Zg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Zg||{}),Bi=class extends lr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=qt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rs=class extends lr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=qt.NavigationSkipped}},od=class extends lr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=qt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xg=class extends lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},x0=class extends lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R0=class extends lr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},M0=class extends lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},N0=class extends lr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P0=class{constructor(e){this.route=e,this.type=qt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},k0=class{constructor(e){this.route=e,this.type=qt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},O0=class{constructor(e){this.snapshot=e,this.type=qt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},F0=class{constructor(e){this.snapshot=e,this.type=qt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L0=class{constructor(e){this.snapshot=e,this.type=qt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},V0=class{constructor(e){this.snapshot=e,this.type=qt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jg=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=qt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ad=class{},kl=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function xG(n,e){return n.providers&&!n._injector&&(n._injector=vg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function br(n){return n.outlet||we}function RG(n,e){let t=n.filter(r=>br(r)===e);return t.push(...n.filter(r=>br(r)!==e)),t}function pd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var j0=class{get injector(){return pd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new gd(this.rootInjector),this.attachRef=null}},gd=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new j0(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(Un))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),em=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=U0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=U0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=B0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return B0(e,this._root).map(t=>t.value)}};function U0(n,e){if(n===e.value)return e;for(let t of e.children){let r=U0(n,t);if(r)return r}return null}function B0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=B0(n,t);if(r.length)return r.unshift(e),r}return[]}var Hn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Sl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var tm=class extends em{constructor(e,t){super(e),this.snapshot=t,Y0(this,e)}toString(){return this.snapshot.toString()}};function a1(n){let e=MG(n),t=new Yt([new qo("",{})]),r=new Yt({}),i=new Yt({}),s=new Yt({}),o=new Yt(""),a=new Dr(t,r,s,o,i,we,n,e.root);return a.snapshot=e.root,new tm(new Hn(a,[]),e)}function MG(n){let e={},t={},r={},i="",s=new xl([],e,r,i,t,we,n,null,{});return new rm("",new Hn(s,[]))}var Dr=class{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(re(u=>u[hd]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>Ml(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>Ml(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&c1(i)&&(r.resolve[hd]=i.title),r}var xl=class{get title(){return this.data?.[hd]}constructor(e,t,r,i,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ml(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ml(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},rm=class extends em{constructor(e,t){super(t),this.url=e,Y0(this,t)}toString(){return l1(this._root)}};function Y0(n,e){e.value._routerState=n,e.children.forEach(t=>Y0(n,t))}function l1(n){let e=n.children.length>0?` { ${n.children.map(l1).join(", ")} } `:"";return`${n.value}${e}`}function I0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jr(e.params,t.params)||n.paramsSubject.next(t.params),iG(e.url,t.url)||n.urlSubject.next(t.url),Jr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $0(n,e){let t=Jr(n.params,e.params)&&lG(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$0(n.parent,e.parent))}function c1(n){return typeof n.title=="string"||n.title===null}var Z0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=W(gd),this.location=W(wl),this.changeDetector=W(Ds),this.inputBinder=W(lm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new H0(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ki]})}}return n})(),H0=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Dr?this.route:e===gd?this.childContexts:this.parent.get(e,t)}},lm=new K(""),BP=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ru([r.queryParams,r.params,r.data]).pipe(qe(([s,o,a],l)=>(a=q(q(q({},s),o),a),l===0?se(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=rP(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function NG(n,e,t){let r=ld(n,e._root,t?t._root:void 0);return new tm(r,e)}function ld(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=PG(n,e,t);return new Hn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ld(n,a)),o}}let r=kG(e.value),i=e.children.map(s=>ld(n,s));return new Hn(r,i)}}function PG(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ld(n,r,i);return ld(n,r)})}function kG(n){return new Dr(new Yt(n.url),new Yt(n.params),new Yt(n.queryParams),new Yt(n.fragment),new Yt(n.data),n.outlet,n.component,n)}var cd=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},u1="ngNavigationCancelingError";function im(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Go(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=d1(!1,qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function d1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[u1]=!0,t.cancellationCode=e,t}function OG(n){return h1(n)&&Go(n.url)}function h1(n){return!!n&&n[u1]}var FG=(n,e,t,r)=>re(i=>(new q0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),q0=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),I0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Sl(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Sl(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Sl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new V0(s.value.snapshot))}),e.children.length&&this.forwardEvent(new F0(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(I0(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),I0(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},sm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rl=class{constructor(e,t){this.component=e,this.route=t}};function LG(n,e,t){let r=n._root,i=e?e._root:null;return ed(r,i,t,[r.value])}function VG(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!VR(n)?n:e.get(n):r}function ed(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Sl(e);return n.children.forEach(o=>{jG(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>id(a,t.getContext(o),i)),i}function jG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=UG(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new sm(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ed(n,e,a?a.children:null,r,i):ed(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rl(a.outlet.component,o))}else o&&id(e,a,i),i.canActivateChecks.push(new sm(r)),s.component?ed(n,null,a?a.children:null,r,i):ed(n,null,t,r,i);return i}function UG(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!zo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zo(n.url,e.url)||!Jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$0(n,e)||!Jr(n.queryParams,e.queryParams);case"paramsChange":default:return!$0(n,e)}}function id(n,e,t){let r=Sl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?id(o,e.children.getContext(s),t):id(o,null,t):id(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rl(e.outlet.component,i)):t.canDeactivateChecks.push(new Rl(null,i)):t.canDeactivateChecks.push(new Rl(null,i))}function md(n){return typeof n=="function"}function BG(n){return typeof n=="boolean"}function $G(n){return n&&md(n.canLoad)}function HG(n){return n&&md(n.canActivate)}function qG(n){return n&&md(n.canActivateChild)}function zG(n){return n&&md(n.canDeactivate)}function GG(n){return n&&md(n.canMatch)}function f1(n){return n instanceof Ai||n?.name==="EmptyError"}var zg=Symbol("INITIAL_VALUE");function Ol(){return qe(n=>Ru(n.map(e=>e.pipe(xi(1),To(zg)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===zg)return zg;if(t===!1||WG(t))return t}return!0}),Zt(e=>e!==zg),xi(1)))}function WG(n){return Go(n)||n instanceof cd}function KG(n,e){return At(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?se(ye(q({},t),{guardsResult:!0})):QG(o,r,i,n).pipe(At(a=>a&&BG(a)?YG(r,s,n,e):se(a)),re(a=>ye(q({},t),{guardsResult:a})))})}function QG(n,e,t,r){return be(n).pipe(At(i=>t9(i.component,i.route,t,e,r)),er(i=>i!==!0,!0))}function YG(n,e,t,r){return be(e).pipe(Do(i=>Ya(XG(i.route.parent,r),ZG(i.route,r),e9(n,i.path,t),JG(n,i.route,t))),er(i=>i!==!0,!0))}function ZG(n,e){return n!==null&&e&&e(new L0(n)),se(!0)}function XG(n,e){return n!==null&&e&&e(new O0(n)),se(!0)}function JG(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(s=>lp(()=>{let o=pd(e)??t,a=Fl(s,o),l=HG(a)?a.canActivate(e,n):Qr(o,()=>a(e,n));return Ms(l).pipe(er())}));return se(i).pipe(Ol())}function e9(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>VG(o)).filter(o=>o!==null).map(o=>lp(()=>{let a=o.guards.map(l=>{let u=pd(o.node)??t,d=Fl(l,u),h=qG(d)?d.canActivateChild(r,n):Qr(u,()=>d(r,n));return Ms(h).pipe(er())});return se(a).pipe(Ol())}));return se(s).pipe(Ol())}function t9(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(a=>{let l=pd(e)??i,u=Fl(a,l),d=zG(u)?u.canDeactivate(n,e,t,r):Qr(l,()=>u(n,e,t,r));return Ms(d).pipe(er())});return se(o).pipe(Ol())}function n9(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let s=i.map(o=>{let a=Fl(o,n),l=$G(a)?a.canLoad(e,t):Qr(n,()=>a(e,t));return Ms(l)});return se(s).pipe(Ol(),p1(r))}function p1(n){return zv(xt(e=>{if(typeof e!="boolean")throw im(n,e)}),re(e=>e===!0))}function r9(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let s=i.map(o=>{let a=Fl(o,n),l=GG(a)?a.canMatch(e,t):Qr(n,()=>a(e,t));return Ms(l)});return se(s).pipe(Ol(),p1(r))}var ud=class{constructor(e){this.segmentGroup=e||null}},dd=class extends Error{constructor(e){super(),this.urlTree=e}};function Tl(n){return Qa(new ud(n))}function i9(n){return Qa(new te(4e3,!1))}function s9(n){return Qa(d1(!1,qn.GuardRejected))}var z0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[we])return i9(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:d,url:h,outlet:g,params:m,data:y,title:C}=i,b=Qr(s,()=>a({params:m,data:y,queryParams:l,fragment:u,routeConfig:d,url:h,outlet:g,title:C}));if(b instanceof $i)throw new dd(b);t=b}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new dd(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new $i(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Ue(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},G0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function o9(n,e,t,r,i){let s=g1(n,e,t);return s.matched?(r=xG(e,r),r9(r,e,t,i).pipe(re(o=>o===!0?s:q({},G0)))):se(s)}function g1(n,e,t){if(e.path==="**")return a9(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},G0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rG)(t,n,e);if(!i)return q({},G0);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?q(q({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function a9(n){return{matched:!0,parameters:n.length>0?KP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $P(n,e,t,r){return t.length>0&&u9(n,t,r)?{segmentGroup:new Ue(e,c9(r,new Ue(t,n.children))),slicedSegments:[]}:t.length===0&&d9(n,t,r)?{segmentGroup:new Ue(n.segments,l9(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:t}}function l9(n,e,t,r){let i={};for(let s of t)if(cm(n,e,s)&&!r[br(s)]){let o=new Ue([],{});i[br(s)]=o}return q(q({},r),i)}function c9(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&br(r)!==we){let i=new Ue([],{});t[br(r)]=i}return t}function u9(n,e,t){return t.some(r=>cm(n,e,r)&&br(r)!==we)}function d9(n,e,t){return t.some(r=>cm(n,e,r))}function cm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function h9(n,e,t){return e.length===0&&!n.children[t]}var W0=class{};function f9(n,e,t,r,i,s,o="emptyOnly"){return new K0(n,e,t,r,i,o,s).recognize()}var p9=31,K0=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new z0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=$P(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new Hn(r,t),s=new rm("",i),o=IG(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new xl([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(re(r=>({children:r,rootSnapshot:t})),us(r=>{if(r instanceof dd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ud?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(re(o=>o instanceof Hn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return be(s).pipe(Do(o=>{let a=r.children[o],l=RG(t,o);return this.processSegmentGroup(e,l,a,o,i)}),jr((o,a)=>(o.push(...a),o)),ds(null),tw(),At(o=>{if(o===null)return Tl(r);let a=m1(o);return g9(a),se(a)}))}processSegment(e,t,r,i,s,o,a){return be(t).pipe(Do(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(us(u=>{if(u instanceof ud)return se(null);throw u}))),er(l=>!!l),us(l=>{if(f1(l))return h9(r,i,s)?se(new W0):Tl(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return br(r)!==o&&(o===we||!cm(i,s,r))?Tl(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):Tl(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:l,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:g}=g1(t,i,s);if(!l)return Tl(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p9&&(this.allowRedirects=!1));let m=new xl(s,u,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,HP(i),br(i),i.component??i._loadedComponent??null,i,qP(i)),y=nm(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(y.params),m.data=Object.freeze(y.data);let C=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,e);return this.applyRedirects.lineralizeSegments(i,C).pipe(At(b=>this.processSegment(e,r,t,b.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=o9(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qe(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qe(({routes:u})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:g,remainingSegments:m}=l,y=new xl(g,h,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,HP(r),br(r),r.component??r._loadedComponent??null,r,qP(r)),C=nm(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let{segmentGroup:b,slicedSegments:V}=$P(t,g,m,u);if(V.length===0&&b.hasChildren())return this.processChildren(d,u,b,y).pipe(re(O=>new Hn(y,O)));if(u.length===0&&V.length===0)return se(new Hn(y,[]));let B=br(r)===s;return this.processSegment(d,u,b,V,B?we:s,!0,y).pipe(re(O=>new Hn(y,O instanceof Hn?[O]:[])))}))):Tl(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):n9(e,t,r,this.urlSerializer).pipe(At(i=>i?this.configLoader.loadChildren(e,t).pipe(xt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):s9(t))):se({routes:[],injector:e})}};function g9(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function m9(n){let e=n.value.routeConfig;return e&&e.path===""}function m1(n){let e=[],t=new Set;for(let r of n){if(!m9(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=m1(r.children);e.push(new Hn(r.value,i))}return e.filter(r=>!t.has(r))}function HP(n){return n.data||{}}function qP(n){return n.resolve||{}}function _9(n,e,t,r,i,s){return At(o=>f9(n,e,t,r,o.extractedUrl,i,s).pipe(re(({state:a,tree:l})=>ye(q({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function y9(n,e){return At(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of _1(l))o.add(u);let a=0;return be(o).pipe(Do(l=>s.has(l)?v9(l,r,n,e):(l.data=nm(l,l.parent,n).resolve,se(void 0))),xt(()=>a++),Xa(1),At(l=>a===o.size?se(t):pn))})}function _1(n){let e=n.children.map(t=>_1(t)).flat();return[n,...e]}function v9(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!c1(i)&&(s[hd]=i.title),w9(s,n,e,r).pipe(re(o=>(n._resolvedData=o,n.data=nm(n,n.parent,t).resolve,null)))}function w9(n,e,t,r){let i=D0(n);if(i.length===0)return se({});let s={};return be(i).pipe(At(o=>E9(n[o],e,t,r).pipe(er(),xt(a=>{if(a instanceof cd)throw im(new Nl,a);s[o]=a}))),Xa(1),ew(s),us(o=>f1(o)?pn:Qa(o)))}function E9(n,e,t,r){let i=pd(e)??r,s=Fl(n,i),o=s.resolve?s.resolve(e,t):Qr(i,()=>s(e,t));return Ms(o)}function C0(n){return qe(e=>{let t=n(e);return t?be(t).pipe(re(()=>e)):se(e)})}var y1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[hd]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>W(I9),providedIn:"root"})}}return n})(),I9=(()=>{class n extends y1{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(OP))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_d=new K("",{providedIn:"root",factory:()=>({})}),C9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=vt({type:n,selectors:[["ng-component"]],standalone:!0,features:[qN],decls:1,vars:0,template:function(r,i){r&1&&le(0,"router-outlet")},dependencies:[Z0],encapsulation:2})}}return n})();function X0(n){let e=n.children&&n.children.map(X0),t=e?ye(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=C9),t}var om=new K(""),J0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(Ag)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ms(t.loadComponent()).pipe(re(v1),xt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Nu(()=>{this.componentLoaders.delete(t)})),i=new qa(r,()=>new it).pipe(Ha());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=b9(r,this.compiler,t,this.onLoadEndListener).pipe(Nu(()=>{this.childrenLoaders.delete(r)})),o=new qa(s,()=>new it).pipe(Ha());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b9(n,e,t,r){return Ms(n.loadChildren()).pipe(re(v1),At(i=>i instanceof $u||Array.isArray(i)?se(i):be(e.compileModuleAsync(i))),re(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(om,[],{optional:!0,self:!0}).flat()),{routes:o.map(X0),injector:s}}))}function D9(n){return n&&typeof n=="object"&&"default"in n}function v1(n){return D9(n)?n.default:n}var eI=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>W(T9),providedIn:"root"})}}return n})(),T9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),w1=new K(""),E1=new K("");function S9(n,e,t){let r=n.get(E1),i=n.get(On);return n.get(De).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),A9(n))),{onViewTransitionCreated:l}=r;return l&&Qr(n,()=>l({transition:a,from:e,to:t})),o})}function A9(n){return new Promise(e=>{zE({read:()=>setTimeout(e)},{injector:n})})}var x9=new K(""),tI=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=W(J0),this.environmentInjector=W(Un),this.urlSerializer=W(fd),this.rootContexts=W(gd),this.location=W(Dl),this.inputBindingEnabled=W(lm,{optional:!0})!==null,this.titleStrategy=W(y1),this.options=W(_d,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(eI),this.createViewTransition=W(w1,{optional:!0}),this.navigationErrorHandler=W(x9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let t=i=>this.events.next(new P0(i)),r=i=>this.events.next(new k0(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ye(q(q({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Yt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:rd,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zt(s=>s.id!==0),re(s=>ye(q({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),qe(s=>{let o=!1,a=!1;return se(s).pipe(qe(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",qn.SupersededByNewNavigation),pn;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Rs(l.id,this.urlSerializer.serialize(l.rawUrl),h,Zg.IgnoredSameUrlNavigation)),l.resolve(!1),pn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(qe(h=>{let g=this.transitions?.getValue();return this.events.next(new Pl(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),g!==this.transitions?.getValue()?pn:Promise.resolve(h)}),_9(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xt(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ye(q({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let g=new Xg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:g,source:m,restoredState:y,extras:C}=l,b=new Pl(h,this.urlSerializer.serialize(g),m,y);this.events.next(b);let V=a1(this.rootComponentType).snapshot;return this.currentTransition=s=ye(q({},l),{targetSnapshot:V,urlAfterRedirects:g,extras:ye(q({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,se(s)}else{let h="";return this.events.next(new Rs(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Zg.IgnoredByUrlHandlingStrategy)),l.resolve(!1),pn}}),xt(l=>{let u=new x0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),re(l=>(this.currentTransition=s=ye(q({},l),{guards:LG(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),KG(this.environmentInjector,l=>this.events.next(l)),xt(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw im(this.urlSerializer,l.guardsResult);let u=new R0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Zt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",qn.GuardRejected),!1)),C0(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(xt(u=>{let d=new M0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),qe(u=>{let d=!1;return se(u).pipe(y9(this.paramsInheritanceStrategy,this.environmentInjector),xt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",qn.NoDataFromResolver)}}))}),xt(u=>{let d=new N0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),C0(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(xt(g=>{d.component=g}),re(()=>{})));for(let g of d.children)h.push(...u(g));return h};return Ru(u(l.targetSnapshot.root)).pipe(ds(null),xi(1))}),C0(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?be(d).pipe(re(()=>s)):se(s)}),re(l=>{let u=NG(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ye(q({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),xt(()=>{this.events.next(new ad)}),FG(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),xi(1),xt({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ei(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),iw(this.transitionAbortSubject.pipe(xt(l=>{throw l}))),Nu(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",qn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),us(l=>{if(a=!0,h1(l))this.events.next(new Bi(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),OG(l)?this.events.next(new kl(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new od(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=Qr(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof cd){let{message:h,cancellationCode:g}=im(this.urlSerializer,d);this.events.next(new Bi(s.id,this.urlSerializer.serialize(s.extractedUrl),h,g)),this.events.next(new kl(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=t.errorHandler(l);s.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return pn}))}))}cancelNavigationTransition(t,r,i){let s=new Bi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R9(n){return n!==rd}var M9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>W(N9),providedIn:"root"})}}return n})(),Q0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},N9=(()=>{class n extends Q0{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vo(n)))(i||n)}})()}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:()=>W(P9),providedIn:"root"})}}return n})(),P9=(()=>{class n extends I1{constructor(){super(...arguments),this.location=W(Dl),this.urlSerializer=W(fd),this.options=W(_d,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(eI),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $i,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=a1(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Pl)this.stateMemento=this.createStateMemento();else if(t instanceof Rs)this.rawUrlTree=r.initialUrl;else if(t instanceof Xg){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ad?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Bi&&(t.code===qn.GuardRejected||t.code===qn.NoDataFromResolver)?this.restoreHistory(r):t instanceof od?this.restoreHistory(r,!0):t instanceof ei&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof $i?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=q(q({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vo(n)))(i||n)}})()}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),td=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(td||{});function C1(n,e){n.events.pipe(Zt(t=>t instanceof ei||t instanceof Bi||t instanceof od||t instanceof Rs),re(t=>t instanceof ei||t instanceof Rs?td.COMPLETE:(t instanceof Bi?t.code===qn.Redirect||t.code===qn.SupersededByNewNavigation:!1)?td.REDIRECTING:td.FAILED),Zt(t=>t!==td.REDIRECTING),xi(1)).subscribe(()=>{e()})}function k9(n){throw n}var O9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},F9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},cr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=W(bg),this.stateManager=W(I1),this.options=W(_d,{optional:!0})||{},this.pendingTasks=W(vl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(tI),this.urlSerializer=W(fd),this.location=W(Dl),this.urlHandlingStrategy=W(eI),this._events=new it,this.errorHandler=this.options.errorHandler||k9,this.navigated=!1,this.routeReuseStrategy=W(M9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(om,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(lm,{optional:!0}),this.eventsSubscription=new _t,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Bi&&r.code!==qn.Redirect&&r.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ei)this.navigated=!0;else if(r instanceof kl){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||R9(i.source)},o);this.scheduleNavigation(a,rd,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}V9(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=q({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(X0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=q(q({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let g=i?i.snapshot:this.routerState.snapshot.root;h=r1(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return i1(h,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Go(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,rd,null,r)}navigate(t,r={skipLocationChange:!1}){return L9(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=q({},O9):r===!1?i=q({},F9):i=r,Go(t))return LP(this.currentUrlTree,t,i);let s=this.parseUrl(t);return LP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((h,g)=>{a=h,l=g});let d=this.pendingTasks.add();return C1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function L9(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}function V9(n){return!(n instanceof ad)&&!(n instanceof kl)}var ti=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new it,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Go(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:tN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Go(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ee(cr),ee(Dr),bE("tabindex"),ee(Fi),ee(Yr),ee(Ui))}}static{this.\u0275dir=Et({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&We("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&wg("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",$o],skipLocationChange:[2,"skipLocationChange","skipLocationChange",$o],replaceUrl:[2,"replaceUrl","replaceUrl",$o],routerLink:"routerLink"},standalone:!0,features:[$E,ki]})}}return n})();var am=class{};var j9=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Zt(t=>t instanceof ei),Do(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=vg(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return be(i).pipe(cs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=se(null);let s=i.pipe(At(o=>o===null?se(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return be([s,o]).pipe(cs())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(L(cr),L(Ag),L(Un),L(am),L(J0))}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),b1=new K(""),U9=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ei?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Rs&&t.code===Zg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jg&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Jg(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){pN()}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();function B9(n){return n.routerState.root}function yd(n,e){return{\u0275kind:n,\u0275providers:e}}function $9(){let n=W(Bn);return e=>{let t=n.get(bs);if(e!==t.components[0])return;let r=n.get(cr),i=n.get(D1);n.get(nI)===1&&r.initialNavigation(),n.get(T1,null,Ee.Optional)?.setUpPreloading(),n.get(b1,null,Ee.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var D1=new K("",{factory:()=>new it}),nI=new K("",{providedIn:"root",factory:()=>1});function H9(){return yd(2,[{provide:nI,useValue:0},{provide:Sg,multi:!0,deps:[Bn],useFactory:e=>{let t=e.get(hP,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(cr),s=e.get(D1);C1(i,()=>{r(!0)}),e.get(tI).afterPreactivation=()=>(r(!0),s.closed?se(void 0):s),i.initialNavigation()}))}}])}function q9(){return yd(3,[{provide:Sg,multi:!0,useFactory:()=>{let e=W(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:nI,useValue:2}])}var T1=new K("");function z9(n){return yd(0,[{provide:T1,useExisting:j9},{provide:am,useExisting:n}])}function G9(){return yd(8,[BP,{provide:lm,useExisting:BP}])}function W9(n){let e=[{provide:w1,useValue:S9},{provide:E1,useValue:q({skipNextTransition:!!n?.skipInitialTransition},n)}];return yd(9,e)}var zP=new K("ROUTER_FORROOT_GUARD"),K9=[Dl,{provide:fd,useClass:Nl},cr,gd,{provide:Dr,useFactory:B9,deps:[cr]},J0,[]],rI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[K9,[],{provide:om,multi:!0,useValue:t},{provide:zP,useFactory:X9,deps:[[cr,new Lo,new tg]]},{provide:_d,useValue:r||{}},r?.useHash?Y9():Z9(),Q9(),r?.preloadingStrategy?z9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?J9(r):[],r?.bindToComponentInputs?G9().\u0275providers:[],r?.enableViewTransitions?W9().\u0275providers:[],e6()]}}static forChild(t){return{ngModule:n,providers:[{provide:om,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(zP,8))}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({})}}return n})();function Q9(){return{provide:b1,useFactory:()=>{let n=W(DP),e=W(De),t=W(_d),r=W(tI),i=W(fd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new U9(i,r,n,e,t)}}}function Y9(){return{provide:Ui,useClass:pP}}function Z9(){return{provide:Ui,useClass:u0}}function X9(n){return"guarded"}function J9(n){return[n.initialNavigation==="disabled"?q9().\u0275providers:[],n.initialNavigation==="enabledBlocking"?H9().\u0275providers:[]]}var GP=new K("");function e6(){return[{provide:GP,useFactory:$9},{provide:QE,multi:!0,useExisting:GP}]}var vd=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(vd||{});function S1(n,e){return{type:vd.Trigger,name:n,definitions:e,options:{}}}function iI(n,e=null){return{type:vd.Animate,styles:e,timings:n}}function um(n){return{type:vd.Style,styles:n,offset:null}}function sI(n,e,t=null){return{type:vd.Transition,expr:n,animation:e,options:t}}var t6=()=>["/movie"],A1=()=>[""],n6=()=>["/subs"],r6=()=>["/category","action"],i6=()=>["/category","comedy"],s6=()=>["/category","drama"],o6=()=>["/category","horror"],a6=()=>["/profile"],l6=()=>["/my-movies"],c6=()=>["/logout"],Ps=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vt({type:n,selectors:[["app-header"]],decls:53,vars:22,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],["href","#",1,"navbar-brand","fw-bold","text-danger"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",3,"routerLink"],[1,"nav-link",3,"routerLink"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"navbar-nav"],[1,"bi","bi-person-circle"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-divider"],["href",eN`https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css`,"rel","stylesheet"]],template:function(r,i){r&1&&(A(0,"nav",0)(1,"div",1)(2,"a",2),F(3,"Rog Movies"),R(),A(4,"button",3),le(5,"span",4),R(),A(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),F(10,"Home"),R()(),A(11,"li",7)(12,"a",9),F(13,"Popular Movies"),R()(),A(14,"li",7)(15,"a",9),F(16,"Latest Trailers"),R()(),A(17,"li",7)(18,"a",9),F(19,"Subscription"),R()(),A(20,"li",10)(21,"a",11),F(22," Categories "),R(),A(23,"ul",12)(24,"li")(25,"a",13),F(26,"Action"),R()(),A(27,"li")(28,"a",13),F(29,"Comedy"),R()(),A(30,"li")(31,"a",13),F(32,"Drama"),R()(),A(33,"li")(34,"a",13),F(35,"Horror"),R()()()()(),A(36,"ul",14)(37,"li",10)(38,"a",11),le(39,"i",15),R(),A(40,"ul",16)(41,"li")(42,"a",13),F(43,"My Profile"),R()(),A(44,"li")(45,"a",13),F(46,"My Movies"),R()(),A(47,"li"),le(48,"hr",17),R(),A(49,"li")(50,"a",13),F(51,"Log Out"),R()()()()()()()(),le(52,"link",18)),r&2&&($(9),ie("routerLink",Ht(11,t6)),$(3),ie("routerLink",Ht(12,A1)),$(3),ie("routerLink",Ht(13,A1)),$(3),ie("routerLink",Ht(14,n6)),$(7),ie("routerLink",Ht(15,r6)),$(3),ie("routerLink",Ht(16,i6)),$(3),ie("routerLink",Ht(17,s6)),$(3),ie("routerLink",Ht(18,o6)),$(8),ie("routerLink",Ht(19,a6)),$(3),ie("routerLink",Ht(20,l6)),$(5),ie("routerLink",Ht(21,c6)))},dependencies:[ti],styles:["nav[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();var Ll=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vt({type:n,selectors:[["app-footer"]],decls:38,vars:0,consts:[[1,"footer","py-4"],[1,"container"],[1,"row"],[1,"col-md-4"],[1,"list-unstyled"],["href","#",1,"footer-link"],["href","#",1,"footer-icon"],[1,"bi","bi-facebook"],[1,"bi","bi-twitter"],[1,"bi","bi-instagram"],[1,"bi","bi-youtube"],[1,"text-center","mt-3"]],template:function(r,i){r&1&&(A(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),F(5,"About Rog Movies"),R(),A(6,"p"),F(7,"Rog Movies brings you the latest in movie entertainment, trailers, reviews, and more. Dive into the world of films with us!"),R()(),A(8,"div",3)(9,"h5"),F(10,"Quick Links"),R(),A(11,"ul",4)(12,"li")(13,"a",5),F(14,"Home"),R()(),A(15,"li")(16,"a",5),F(17,"Popular Movies"),R()(),A(18,"li")(19,"a",5),F(20,"Latest Trailers"),R()(),A(21,"li")(22,"a",5),F(23,"Contact Us"),R()()()(),A(24,"div",3)(25,"h5"),F(26,"Follow Us"),R(),A(27,"a",6),le(28,"i",7),R(),A(29,"a",6),le(30,"i",8),R(),A(31,"a",6),le(32,"i",9),R(),A(33,"a",6),le(34,"i",10),R()()(),A(35,"div",11)(36,"small"),F(37,"\xA9 2024 Rog Movies. All rights reserved."),R()()()())},styles:[".footer[_ngcontent-%COMP%]{background-color:#1a1a1a;color:#e0e0e0}.footer[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#ffa31a}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e0e0e0;font-size:.9em}.footer-link[_ngcontent-%COMP%]{color:#e0e0e0;text-decoration:none;transition:color .3s ease}.footer-link[_ngcontent-%COMP%]:hover{color:#f50}.footer-icon[_ngcontent-%COMP%]{font-size:1.5em;color:#e50914;margin-right:10px;transition:color .3s ease}.footer-icon[_ngcontent-%COMP%]:hover{color:#f50}.footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1200px}.footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#777}"]})}return n})();var u6=n=>({active:n}),d6=n=>({"show active":n});function h6(n,e){if(n&1&&(A(0,"div",21),le(1,"img",22),A(2,"div",23)(3,"h4"),F(4),R(),A(5,"button",24),F(6,"Watch Now"),R()()()),n&2){let t=e.$implicit;$(),ie("src",t.poster,wn),$(3),ut(t.title)}}function f6(n,e){if(n&1&&(A(0,"div",25)(1,"div",26),le(2,"img",27),A(3,"div",28)(4,"h5",29),F(5),R()()()()),n&2){let t=e.$implicit;$(2),jo("alt",t.name),ie("src",t.poster,wn),$(3),ut(t.name)}}function p6(n,e){if(n&1&&(A(0,"div",30),le(1,"img",31),A(2,"div",32)(3,"h4"),F(4),R(),A(5,"p"),F(6),R()()()),n&2){let t=e.$implicit;$(),ie("src",t.image,wn),$(3),ut(t.title),$(2),ut(t.description)}}function g6(n,e){if(n&1){let t=Il();A(0,"li",33)(1,"a",34),We("click",function(){let i=Pn(t).$implicit,s=$t();return kn(s.selectTab(i))}),F(2),R()()}if(n&2){let t=e.$implicit,r=$t();$(),ie("ngClass",GE(2,u6,r.selectedTab===t)),$(),Jt(" ",t," ")}}function m6(n,e){if(n&1&&(A(0,"div",21),le(1,"img",22),A(2,"div",23)(3,"h5"),F(4),R(),A(5,"p"),F(6),Ig(7,"date"),R()()()),n&2){let t=e.$implicit;$(),ie("src",t.poster,wn),$(3),ut(t.title),$(2),ut(Cg(7,3,t.releaseDate))}}function _6(n,e){if(n&1&&(A(0,"div",35)(1,"div",7),Ge(2,m6,8,5,"div",8),R()()),n&2){let t=e.$implicit,r=$t();ie("ngClass",GE(3,d6,r.selectedTab===t))("@slideIn",void 0),$(2),ie("ngForOf",r.getMoviesByCategory(t))}}var x1=(()=>{class n{url="https://imdb8.p.rapidapi.com/auto-complete?q=game%20of%20thr";options={method:"GET",headers:{"x-rapidapi-key":"fc9356ef79msh9abd7826adb9907p17e9bejsn0aa96f836db0","x-rapidapi-host":"imdb8.p.rapidapi.com"}};movies=[];constructor(){}ngOnInit(){this.fetchData()}fetchData(){return N(this,null,function*(){try{let t=yield fetch(this.url,this.options);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let r=yield t.json();console.log(r);let i=r.d;if(!i||i.length===0){console.error("No movies found");return}this.movies=i.map(s=>({name:s.l,poster:s.i?.imageUrl||"default-image-url.jpg"})),console.log(this.movies)}catch(t){console.error("Fetch error:",t)}})}movie=[{title:"Woman of the Hour",poster:"https://m.media-amazon.com/images/M/MV5BYzliNzRjNDMtYTFmOS00NDQxLWJlOWMtZTViNjcyMzc0NzQwXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg"},{title:"Alien Romulus",poster:"https://preview.redd.it/new-poster-for-alien-romulus-v0-cd92l4whqd4d1.jpeg?width=640&crop=smart&auto=webp&s=79ffc89a498d158874383147fad48580c324af7a"},{title:"The Wild Robot",poster:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSxvR3GnJDte89QcK4xdjYqqTd386TegAFLOw&s"},{title:"The Substance",poster:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRjA2nvn6CTKck4hsCIpHrk6x_2dEXff8Myfw&s"},{title:"The Shadow Strays",poster:"https://m.media-amazon.com/images/M/MV5BODdmZTc0MzktN2IwNy00NWJiLTlmZWEtZjVjNGY1ODEzNjk5XkEyXkFqcGc@._V1_.jpg"},{title:"Bagman",poster:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqFkcuiiCIh0BY3yKEWbktjFZ7BBMQZYsJhg&s"},{title:"Woman of the Hour",poster:"https://m.media-amazon.com/images/M/MV5BYzliNzRjNDMtYTFmOS00NDQxLWJlOWMtZTViNjcyMzc0NzQwXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg"},{title:"Alien Romulus",poster:"https://preview.redd.it/new-poster-for-alien-romulus-v0-1vemzxv14uhd1.jpeg?width=1080&crop=smart&auto=webp&s=4911fa4784613b2a32340297eba3151340023840"},{title:"Alien Romulus",poster:"https://preview.redd.it/new-poster-for-alien-romulus-v0-cd92l4whqd4d1.jpeg?width=640&crop=smart&auto=webp&s=79ffc89a498d158874383147fad48580c324af7a"},{title:"The Wild Robot",poster:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSxvR3GnJDte89QcK4xdjYqqTd386TegAFLOw&s"},{title:"The Substance",poster:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRjA2nvn6CTKck4hsCIpHrk6x_2dEXff8Myfw&s"}];latestTrailers=[{title:"Grotesquerie",description:"Road Trip Scene",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"The Penguin",description:"Mid-Season Weeks Ahead Trailer",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Agatha All Along",description:"Witches Scene",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Rurouni Kenshin",description:"Episode 27 Preview",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Grotesquerie",description:"Road Trip Scene",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"The Penguin",description:"Mid-Season Weeks Ahead Trailer",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Agatha All Along",description:"Witches Scene",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Rurouni Kenshin",description:"Episode 27 Preview",image:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"}];popularMovies=[{title:"Teacup",releaseDate:"2024-10-08",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Klass 95",releaseDate:"2024-08-20",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Uprising",releaseDate:"2024-10-02",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Coco",releaseDate:"2017-11-24",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"},{title:"Supernatural",releaseDate:"2005-09-13",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg"}];selectedTab="Streaming";movieCategories=["Streaming","On TV","For Rent","In Theaters"];selectTab(t){this.selectedTab=t}getMoviesByCategory(t){switch(t){case"Streaming":return this.popularMovies;case"On TV":return this.onTvMovies;case"For Rent":return this.forRentMovies;case"In Theaters":return this.inTheatersMovies;default:return[]}}onTvMovies=[{title:"TV Show 1",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg",releaseDate:"2024-10-18"},{title:"TV Show 2",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg",releaseDate:"2024-10-17"}];forRentMovies=[{title:"Rent Movie 1",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg",releaseDate:"2024-10-20"},{title:"Rent Movie 2",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg",releaseDate:"2024-10-19"}];inTheatersMovies=[{title:"Theater Movie 1",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg",releaseDate:"2024-10-25"},{title:"Theater Movie 2",poster:"https://content.numetro.co.za/image_resized_files/6644-1-1-3-1724681504.jpg",releaseDate:"2024-10-24"}];static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vt({type:n,selectors:[["app-movie-list"]],decls:30,vars:5,consts:[[1,"container"],[1,"header-container"],[1,"animated-images"],[1,"search-container"],["type","text","placeholder","Search for a movie, tv show, person..."],[1,"search-btn"],[1,"movie-list-container"],[1,"movie-list"],["class","movie-card",4,"ngFor","ngForOf"],[1,"container","mt-4"],[1,"text-center","mb-4"],[1,"row"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"latest-trailers",2,"background-image","url('https://media.themoviedb.org/t/p/w355_and_h200_multi_faces/tUdqnpN03fQFWAe5O7d61O2lNkr.jpg')","background-size","cover"],[1,"trailers-carousel"],["class","trailer-card",4,"ngFor","ngForOf"],[1,"popular-section"],[1,"nav","nav-pills"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],["class","tab-pane fade",3,"ngClass",4,"ngFor","ngForOf"],[1,"movie-card"],["alt","Movie Poster",3,"src"],[1,"movie-details"],[1,"watch-btn"],[1,"col-md-4","mb-4"],[1,"card"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"trailer-card"],["alt","Trailer Thumbnail",3,"src"],[1,"trailer-details"],[1,"nav-item"],[1,"nav-link",3,"click","ngClass"],[1,"tab-pane","fade",3,"ngClass"]],template:function(r,i){r&1&&(le(0,"app-header"),A(1,"div",0)(2,"div",1),le(3,"div",2),A(4,"div",3),le(5,"input",4),A(6,"button",5),F(7,"Search"),R()()(),A(8,"div",6)(9,"div",7),Ge(10,h6,7,2,"div",8),R()()(),A(11,"div",9)(12,"h1",10),F(13,"Movie List"),R(),A(14,"div",11),Ge(15,f6,6,3,"div",12),R()(),A(16,"div",0)(17,"section",13)(18,"h2"),F(19,"Latest Trailers"),R(),A(20,"div",14),Ge(21,p6,7,3,"div",15),R()(),A(22,"section",16)(23,"h2"),F(24,"What's Popular"),R(),A(25,"ul",17),Ge(26,g6,3,4,"li",18),R(),A(27,"div",19),Ge(28,_6,3,5,"div",20),R()()(),le(29,"app-footer")),r&2&&($(10),ie("ngForOf",i.movie),$(5),ie("ngForOf",i.movies),$(6),ie("ngForOf",i.latestTrailers),$(5),ie("ngForOf",i.movieCategories),$(2),ie("ngForOf",i.movieCategories))},dependencies:[vP,Ss,Ps,Ll,CP],styles:['.card[_ngcontent-%COMP%]{transition:transform .2s;cursor:pointer;overflow:hidden}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-img-top[_ngcontent-%COMP%]{height:300px;object-fit:cover;transition:transform .3s ease}.card[_ngcontent-%COMP%]:hover   .card-img-top[_ngcontent-%COMP%]{transform:scale(1.1)}.card-title[_ngcontent-%COMP%]{font-weight:700;text-align:center}.header-container[_ngcontent-%COMP%]{position:relative;height:300px;width:100%;overflow:hidden;background-color:#0a0a0a}.animated-images[_ngcontent-%COMP%]{width:100%;height:400px;background-size:cover;background-position:center;animation:_ngcontent-%COMP%_slideshow 15s infinite}@keyframes _ngcontent-%COMP%_slideshow{0%{background-image:url(https://content.numetro.co.za/image_resized_files/6666-2-1-10-1728404384.jpg)}33%{background-image:url(https://content.numetro.co.za/image_resized_files/6677-2-1-10-1728290830.jpg)}66%{background-image:url(https://content.numetro.co.za/image_resized_files/6665-2-1-10-1727079296.jpg)}to{background-image:url(https://content.numetro.co.za/image_resized_files/6666-2-1-10-1728404384.jpg)}}.animated-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#00c6ff}@keyframes _ngcontent-%COMP%_slideImages{0%{transform:translate(0)}33%{transform:translate(-100%)}66%{transform:translate(-200%)}to{transform:translate(0)}}.animated-images[_ngcontent-%COMP%]:hover{animation-play-state:paused}.search-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:400px;padding:10px;border-radius:30px;border:none;outline:none;font-size:16px}.search-btn[_ngcontent-%COMP%]{padding:10px 20px;margin-left:10px;background-color:#00c6ff;border:none;border-radius:30px;color:#fff;cursor:pointer}.movie-list-container[_ngcontent-%COMP%]{margin-top:20px;overflow:hidden;white-space:nowrap;background-image:url("./media/wave2-M3476PXJ.svg");background-size:cover}.movie-list[_ngcontent-%COMP%]{display:flex;gap:10px;overflow-x:auto;padding:10px;scrollbar-width:none}.movie-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.movie-card[_ngcontent-%COMP%]{width:150px;flex-shrink:0;background-color:#f1f1f1;padding:10px;border-radius:8px;text-align:center}.movie-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:8px}.movie-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:14px;margin:10px 0 0}.watch-btn[_ngcontent-%COMP%]{margin-top:10px;padding:8px;background-color:#00c6ff;border:none;border-radius:5px;color:#fff;cursor:pointer}.container[_ngcontent-%COMP%]{width:100%;padding:20px}.latest-trailers[_ngcontent-%COMP%]{background-size:cover;padding:40px 0;color:#fff;text-align:center}.trailers-carousel[_ngcontent-%COMP%]{display:flex;gap:15px;overflow-x:auto}.trailers-carousel[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;white-space:nowrap;-ms-overflow-style:none;scrollbar-width:none}.trailers-carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.trailer-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.trailer-details[_ngcontent-%COMP%]{text-align:center}.trailer-card[_ngcontent-%COMP%]{background-color:#000000b3;padding:20px;border-radius:10px;min-width:300px}.trailer-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px}.trailer-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:10px;color:#00c6ff}.popular-section[_ngcontent-%COMP%]{margin-top:40px;cursor:pointer}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border-radius:20px;margin-right:10px}.movie-list[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:20px;overflow-x:auto;white-space:nowrap;padding-bottom:10px}.movie-card[_ngcontent-%COMP%]{width:150px;background-color:#f1f1f1;padding:10px;border-radius:10px;text-align:center}.movie-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px}.movie-details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;font-weight:700}.movie-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:gray;font-size:14px}.tab-content[_ngcontent-%COMP%]{padding-top:20px;cursor:pointer}.movie-list[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.movie-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#007bff;border-radius:5px}trailers-carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}'],data:{animation:[S1("slideIn",[sI(":enter",[um({transform:"translateX(-100%)",opacity:0}),iI("300ms ease-in",um({transform:"translateX(0)",opacity:1}))]),sI(":leave",[iI("300ms ease-out",um({transform:"translateX(-100%)",opacity:0}))])])]}})}return n})();var V1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ee(Fi),ee(Yr))}}static{this.\u0275dir=Et({type:n})}}return n})(),hI=(()=>{class n extends V1{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vo(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,features:[sr]})}}return n})(),Td=new K("");var y6={provide:Td,useExisting:Kr(()=>Fs),multi:!0};function v6(){let n=Xr()?Xr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var w6=new K(""),Fs=(()=>{class n extends V1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!v6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ee(Fi),ee(Yr),ee(w6,8))}}static{this.\u0275dir=Et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&We("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Cs([y6]),sr]})}}return n})();function ks(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function j1(n){return n!=null&&typeof n.length=="number"}var wm=new K(""),Em=new K(""),E6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Fn=class{static min(e){return I6(e)}static max(e){return C6(e)}static required(e){return b6(e)}static requiredTrue(e){return D6(e)}static email(e){return T6(e)}static minLength(e){return S6(e)}static maxLength(e){return A6(e)}static pattern(e){return x6(e)}static nullValidator(e){return U1(e)}static compose(e){return G1(e)}static composeAsync(e){return W1(e)}};function I6(n){return e=>{if(ks(e.value)||ks(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function C6(n){return e=>{if(ks(e.value)||ks(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function b6(n){return ks(n.value)?{required:!0}:null}function D6(n){return n.value===!0?null:{required:!0}}function T6(n){return ks(n.value)||E6.test(n.value)?null:{email:!0}}function S6(n){return e=>ks(e.value)||!j1(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function A6(n){return e=>j1(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function x6(n){if(!n)return U1;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ks(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function U1(n){return null}function B1(n){return n!=null}function $1(n){return Bo(n)?be(n):n}function H1(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function q1(n,e){return e.map(t=>t(n))}function R6(n){return!n.validate}function z1(n){return n.map(e=>R6(e)?e:t=>e.validate(t))}function G1(n){if(!n)return null;let e=n.filter(B1);return e.length==0?null:function(t){return H1(q1(t,e))}}function fI(n){return n!=null?G1(z1(n)):null}function W1(n){if(!n)return null;let e=n.filter(B1);return e.length==0?null:function(t){let r=q1(t,e).map($1);return Xv(r).pipe(re(H1))}}function pI(n){return n!=null?W1(z1(n)):null}function R1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function K1(n){return n._rawValidators}function Q1(n){return n._rawAsyncValidators}function aI(n){return n?Array.isArray(n)?n:[n]:[]}function fm(n,e){return Array.isArray(n)?n.includes(e):n===e}function M1(n,e){let t=aI(e);return aI(n).forEach(i=>{fm(t,i)||t.push(i)}),t}function N1(n,e){return aI(e).filter(t=>!fm(n,t))}var pm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Hi=class extends pm{get formDirective(){return null}get path(){return null}},Wo=class extends pm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gm=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},M6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yoe=ye(q({},M6),{"[class.ng-submitted]":"isSubmitted"}),$l=(()=>{class n extends gm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ee(Wo,2))}}static{this.\u0275dir=Et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Eg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[sr]})}}return n})(),Hl=(()=>{class n extends gm{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ee(Hi,10))}}static{this.\u0275dir=Et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Eg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[sr]})}}return n})();var wd="VALID",hm="INVALID",Vl="PENDING",Ed="DISABLED",Os=class{},mm=class extends Os{constructor(e,t){super(),this.value=e,this.source=t}},Cd=class extends Os{constructor(e,t){super(),this.pristine=e,this.source=t}},bd=class extends Os{constructor(e,t){super(),this.touched=e,this.source=t}},jl=class extends Os{constructor(e,t){super(),this.status=e,this.source=t}},lI=class extends Os{constructor(e){super(),this.source=e}},cI=class extends Os{constructor(e){super(),this.source=e}};function gI(n){return(Im(n)?n.validators:n)||null}function N6(n){return Array.isArray(n)?fI(n):n||null}function mI(n,e){return(Im(e)?e.asyncValidators:n)||null}function P6(n){return Array.isArray(n)?pI(n):n||null}function Im(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Y1(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function Z1(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var Ul=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=bl(()=>this.statusReactive()),this.statusReactive=El(void 0),this._pristine=bl(()=>this.pristineReactive()),this.pristineReactive=El(!0),this._touched=bl(()=>this.touchedReactive()),this.touchedReactive=El(!1),this._events=new it,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Zr(this.statusReactive)}set status(e){Zr(()=>this.statusReactive.set(e))}get valid(){return this.status===wd}get invalid(){return this.status===hm}get pending(){return this.status==Vl}get disabled(){return this.status===Ed}get enabled(){return this.status!==Ed}get pristine(){return Zr(this.pristineReactive)}set pristine(e){Zr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Zr(this.touchedReactive)}set touched(e){Zr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(M1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(M1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(N1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(N1(e,this._rawAsyncValidators))}hasValidator(e){return fm(this._rawValidators,e)}hasAsyncValidator(e){return fm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new bd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new bd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Cd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Cd(!0,r))}markAsPending(e={}){this.status=Vl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ed,this.errors=null,this._forEachChild(i=>{i.disable(ye(q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mm(this.value,r)),this._events.next(new jl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wd,this._forEachChild(r=>{r.enable(ye(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wd||this.status===Vl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mm(this.value,t)),this._events.next(new jl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ed:wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Vl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=$1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new jl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Ed:this.errors?hm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vl)?Vl:this._anyControlsHaveStatus(hm)?hm:wd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Cd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new bd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Im(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=N6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=P6(this._rawAsyncValidators)}},Bl=class extends Ul{constructor(e,t,r){super(gI(t),mI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Z1(this,!0,e),Object.keys(e).forEach(r=>{Y1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var uI=class extends Bl{};var Sd=new K("CallSetDisabledState",{providedIn:"root",factory:()=>Cm}),Cm="always";function X1(n,e){return[...e.path,n]}function _m(n,e,t=Cm){_I(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),O6(n,e),L6(n,e),F6(n,e),k6(n,e)}function P1(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ym(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function k6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function _I(n,e){let t=K1(n);e.validator!==null?n.setValidators(R1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Q1(n);e.asyncValidator!==null?n.setAsyncValidators(R1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ym(e._rawValidators,i),ym(e._rawAsyncValidators,i)}function vm(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=K1(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Q1(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return ym(e._rawValidators,r),ym(e._rawAsyncValidators,r),t}function O6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&J1(n,e)})}function F6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&J1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function J1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function L6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function ek(n,e){n==null,_I(n,e)}function V6(n,e){return vm(n,e)}function tk(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function j6(n){return Object.getPrototypeOf(n.constructor)===hI}function nk(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function rk(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Fs?t=s:j6(s)?r=s:i=s}),i||r||t||null}function U6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var B6={provide:Hi,useExisting:Kr(()=>yI)},Id=Promise.resolve(),yI=(()=>{class n extends Hi{get submitted(){return Zr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=bl(()=>this.submittedReactive()),this.submittedReactive=El(!1),this._directives=new Set,this.ngSubmit=new yt,this.form=new Bl({},fI(t),pI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Id.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),_m(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Id.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Id.then(()=>{let r=this._findContainer(t.path),i=new Bl({});ek(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Id.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Id.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),nk(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ee(wm,10),ee(Em,10),ee(Sd,8))}}static{this.\u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&We("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Cs([B6]),sr]})}}return n})();function k1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function O1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Dd=class extends Ul{constructor(e=null,t,r){super(gI(t),mI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Im(t)&&(t.nonNullable||t.initialValueIsDefault)&&(O1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){k1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){k1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){O1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $6=n=>n instanceof Dd;var H6={provide:Wo,useExisting:Kr(()=>vI)},F1=Promise.resolve(),vI=(()=>{class n extends Wo{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Dd,this._registered=!1,this.name="",this.update=new yt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=rk(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_m(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){F1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&$o(r);F1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?X1(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ee(Hi,9),ee(wm,10),ee(Em,10),ee(Td,10),ee(Ds,8),ee(Sd,8))}}static{this.\u0275dir=Et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Cs([H6]),sr,ki]})}}return n})(),ql=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),q6={provide:Td,useExisting:Kr(()=>wI),multi:!0},wI=(()=>{class n extends hI{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vo(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&We("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Cs([q6]),sr]})}}return n})();var z6={provide:Td,useExisting:Kr(()=>EI),multi:!0},EI=(()=>{class n extends hI{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vo(n)))(i||n)}})()}static{this.\u0275dir=Et({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&We("change",function(o){return i.onChange(o.target.value)})("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Cs([z6]),sr]})}}return n})(),ik=new K("");var G6={provide:Hi,useExisting:Kr(()=>Ad)},Ad=(()=>{class n extends Hi{get submitted(){return Zr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=bl(()=>this._submittedReactive()),this._submittedReactive=El(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new yt,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return _m(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){P1(t.control||null,t,!1),U6(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),nk(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new lI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new cI(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(P1(r||null,t),$6(i)&&(_m(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);ek(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&V6(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_I(this.form,this),this._oldForm&&vm(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(ee(wm,10),ee(Em,10),ee(Sd,8))}}static{this.\u0275dir=Et({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&We("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Cs([G6]),sr,ki]})}}return n})();var W6={provide:Wo,useExisting:Kr(()=>xd)},xd=(()=>{class n extends Wo{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new yt,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=rk(this,s)}ngOnChanges(t){this._added||this._setUpControl(),tk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return X1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(ee(Hi,13),ee(wm,10),ee(Em,10),ee(Td,10),ee(ik,8))}}static{this.\u0275dir=Et({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Cs([W6]),sr,ki]})}}return n})();var sk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({})}}return n})(),dI=class extends Ul{constructor(e,t,r){super(gI(t),mI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Z1(this,!1,e),e.forEach((r,i)=>{Y1(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function L1(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var zl=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return L1(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Bl(i,s)}record(t,r=null){let i=this._reduceControls(t);return new uI(i,r)}control(t,r,i){let s={};return this.useNonNullable?(L1(r)?s=r:(s.validators=r,s.asyncValidators=i),new Dd(t,ye(q({},s),{nonNullable:!0}))):new Dd(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new dI(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Dd)return t;if(t instanceof Ul)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ok=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sd,useValue:t.callSetDisabledState??Cm}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({imports:[sk]})}}return n})(),ak=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ik,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Sd,useValue:t.callSetDisabledState??Cm}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xe({type:n})}static{this.\u0275inj=Ze({imports:[sk]})}}return n})();var K6=()=>["/movie"],Q6=(n,e)=>({"border-radius":n,border:e});function Y6(n,e){if(n&1&&(A(0,"li",15),le(1,"img",16),F(2),R()),n&2){let t=e.$implicit;$(),jo("alt",t.name),ie("src",t.image,wn),$(),Jt(" ",t.name," ")}}function Z6(n,e){if(n&1){let t=Il();A(0,"div",17)(1,"h4"),F(2,"Edit Information"),R(),A(3,"form",18),We("ngSubmit",function(){Pn(t);let i=$t();return kn(i.saveChanges())}),A(4,"div",19)(5,"label",20),F(6,"Name"),R(),A(7,"input",21),Is("ngModelChange",function(i){Pn(t);let s=$t();return Uo(s.user.name,i)||(s.user.name=i),kn(i)}),R()(),A(8,"div",19)(9,"label",22),F(10,"Email"),R(),A(11,"input",23),Is("ngModelChange",function(i){Pn(t);let s=$t();return Uo(s.user.email,i)||(s.user.email=i),kn(i)}),R()(),A(12,"div",19)(13,"label",24),F(14,"Age"),R(),A(15,"input",25),Is("ngModelChange",function(i){Pn(t);let s=$t();return Uo(s.user.age,i)||(s.user.age=i),kn(i)}),R()(),A(16,"div",19)(17,"label",26),F(18,"User Image URL"),R(),A(19,"input",27),Is("ngModelChange",function(i){Pn(t);let s=$t();return Uo(s.user.image,i)||(s.user.image=i),kn(i)}),R()(),A(20,"div",19)(21,"label",28),F(22,"Border Radius"),R(),A(23,"input",29),Is("ngModelChange",function(i){Pn(t);let s=$t();return Uo(s.user.borderRadius,i)||(s.user.borderRadius=i),kn(i)}),R()(),A(24,"div",19)(25,"label",30),F(26,"Border Color"),R(),A(27,"input",31),Is("ngModelChange",function(i){Pn(t);let s=$t();return Uo(s.user.borderColor,i)||(s.user.borderColor=i),kn(i)}),R()(),A(28,"button",32),F(29,"Save"),R(),A(30,"button",33),We("click",function(){Pn(t);let i=$t();return kn(i.cancelEdit())}),F(31,"Cancel"),R()()()}if(n&2){let t=$t();$(7),Es("ngModel",t.user.name),$(4),Es("ngModel",t.user.email),$(4),Es("ngModel",t.user.age),$(4),Es("ngModel",t.user.image),$(4),Es("ngModel",t.user.borderRadius),$(4),Es("ngModel",t.user.borderColor)}}var lk=(()=>{class n{fb;userForm;editing=!1;user={name:"John Doe",email:"john.doe@example.com",age:30,image:"https://example.com/user.jpg",borderRadius:20,borderColor:"#ff0000"};movies=[{name:"Movie 1",image:"https://example.com/movie1.jpg"},{name:"Movie 2",image:"https://example.com/movie2.jpg"}];constructor(t){this.fb=t,this.userForm=this.fb.group({name:[this.user.name],email:[this.user.email],age:[this.user.age],image:[this.user.image],borderRadius:[this.user.borderRadius],borderColor:[this.user.borderColor]})}ngOnInit(){}toggleEdit(){this.editing=!this.editing,this.editing&&this.userForm.patchValue(this.user)}saveChanges(){this.user=this.userForm.value,this.toggleEdit()}cancelEdit(){this.toggleEdit()}static \u0275fac=function(r){return new(r||n)(ee(zl))};static \u0275cmp=vt({type:n,selectors:[["app-profile"]],decls:34,vars:12,consts:[[1,"container","mt-5"],[1,"d-flex","justify-content-end","align-items-center"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"card","mt-3"],[1,"card-header"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-4","text-center"],["alt","User Image",1,"img-fluid","user-image",3,"src","ngStyle"],[1,"col-md-8"],[1,"col-md-12"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["class","mt-4",4,"ngIf"],[1,"list-group-item"],[1,"movie-image",3,"src","alt"],[1,"mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["for","age",1,"form-label"],["type","number","id","age","name","age",1,"form-control",3,"ngModelChange","ngModel"],["for","image",1,"form-label"],["type","text","id","image","name","image",1,"form-control",3,"ngModelChange","ngModel"],["for","borderRadius",1,"form-label"],["type","range","id","borderRadius","name","borderRadius","min","0","max","100",1,"form-range",3,"ngModelChange","ngModel"],["for","borderColor",1,"form-label"],["type","color","id","borderColor","name","borderColor",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(r,i){r&1&&(A(0,"div",0)(1,"div",1)(2,"button",2),F(3," Back to Movies "),R()(),A(4,"div",3)(5,"div",4)(6,"h2"),F(7,"User Profile"),R()(),A(8,"div",5)(9,"div",6)(10,"div",7),le(11,"img",8),R(),A(12,"div",9)(13,"h4"),F(14,"Name:"),R(),A(15,"p"),F(16),R(),A(17,"h4"),F(18,"Email:"),R(),A(19,"p"),F(20),R(),A(21,"h4"),F(22,"Age:"),R(),A(23,"p"),F(24),R()()(),A(25,"div",6)(26,"div",10)(27,"h4"),F(28,"Recent Movies Watched"),R(),A(29,"ul",11),Ge(30,Y6,3,3,"li",12),R()()(),A(31,"button",13),We("click",function(){return i.toggleEdit()}),F(32,"Change Information"),R(),Ge(33,Z6,32,6,"div",14),R()()()),r&2&&($(2),ie("routerLink",Ht(8,K6)),$(9),ie("src",i.user.image,wn)("ngStyle",Cl(9,Q6,i.user.borderRadius+"px","5px solid "+i.user.borderColor)),$(5),ut(i.user.name),$(4),ut(i.user.email),$(4),ut(i.user.age),$(6),ie("ngForOf",i.movies),$(3),ie("ngIf",i.editing))},dependencies:[Ss,As,wP,ql,Fs,wI,EI,$l,Hl,ti,vI,yI],styles:[".card[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:10px;transition:background-color .3s ease-in-out}h2[_ngcontent-%COMP%]{color:#007bff}h4[_ngcontent-%COMP%]{font-weight:700}.btn-primary[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{width:150px}.user-image[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover}.movie-image[_ngcontent-%COMP%]{width:100px;height:150px;object-fit:cover;margin-right:10px}"]})}return n})();var X6="firebase",J6="10.14.1";Rn(X6,J6,"app");var Sr=new Mi("ANGULARFIRE2_VERSION");var e5=(n,e)=>{let t=e?[e]:hx(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Tr=class{constructor(){return e5(t5)}},t5="app-check";function CI(){}var bm=class{zone;delegate;constructor(e,t=Qv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},bI=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",CI,{},CI,CI)),t.pipe(xt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ls=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new bm(Zone.current)),this.insideAngular=t.run(()=>new bm(Zone.current,Si)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(De))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ck(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function DI(n){return n.pipe(jn(ck().outsideAngular))}function st(n){return n5(ck())(n)}function n5(n){return function(t){return t=t.lift(new bI(n.ngZone)),t.pipe(yr(n.outsideAngular),jn(n.insideAngular))}}var r5=new Map,i5={activated:!1,tokenObservers:[]},s5={initialized:!1,enabled:!1};function Ar(n){return r5.get(n)||Object.assign({},i5)}function pk(){return s5}var o5="https://content-firebaseappcheck.googleapis.com/v1";var a5="exchangeDebugToken",uk={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Voe=24*60*60*1e3;var SI=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Ut,this.pending.promise.catch(t=>{}),yield l5(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ut,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function l5(n){return new Promise(e=>{setTimeout(e,n)})}var c5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vs=new ox("appCheck","AppCheck",c5);function gk(n){if(!Ar(n).activated)throw Vs.create("use-before-activation",{appName:n.name})}function mk(r,i){return N(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,a)}catch(m){throw Vs.create("fetch-network-error",{originalErrorMessage:m?.message})}if(l.status!==200)throw Vs.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(m){throw Vs.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let h=Number(d[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+h,issuedAtTimeMillis:g}})}function _k(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${o5}/projects/${t}/apps/${r}:${a5}?key=${i}`,body:{debug_token:e}}}var u5="firebase-app-check-database",d5=1,AI="firebase-app-check-store";var Tm=null;function h5(){return Tm||(Tm=new Promise((n,e)=>{try{let t=indexedDB.open(u5,d5);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(AI,{keyPath:"compositeKey"})}}}catch(t){e(Vs.create("storage-open",{originalErrorMessage:t?.message}))}}),Tm)}function f5(n,e){return p5(g5(n),e)}function p5(n,e){return N(this,null,function*(){let r=(yield h5()).transaction(AI,"readwrite"),s=r.objectStore(AI).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Vs.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function g5(n){return`${n.options.appId}-${n.name}`}var xI=new ls("@firebase/app-check");function TI(n,e){return xf()?f5(n,e).catch(t=>{xI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function yk(){return pk().enabled}function vk(){return N(this,null,function*(){let n=pk();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var m5={error:"UNKNOWN_ERROR"};function _5(n){return Af.encodeString(JSON.stringify(n),!1)}function RI(n,e=!1){return N(this,null,function*(){let t=n.app;gk(t);let r=Ar(t),i=r.token,s;if(i&&!Rd(i)&&(r.token=void 0,i=void 0),!i){let l=yield r.cachedTokenPromise;l&&(Rd(l)?i=l:yield TI(t,void 0))}if(!e&&i&&Rd(i))return{token:i.token};let o=!1;if(yk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mk(_k(t,yield vk()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let l=yield r.exchangeTokenPromise;return yield TI(t,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Ar(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?xI.warn(l.message):xI.error(l),s=l}let a;return i?s?Rd(i)?a={token:i.token,internalError:s}:a=hk(s):(a={token:i.token},r.token=i,yield TI(t,i)):a=hk(s),o&&E5(t,a),a})}function y5(n){return N(this,null,function*(){let e=n.app;gk(e);let{provider:t}=Ar(e);if(yk()){let r=yield vk(),{token:i}=yield mk(_k(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function v5(n,e,t,r){let{app:i}=n,s=Ar(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Rd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),dk(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>dk(n))}function wk(n,e){let t=Ar(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function dk(n){let{app:e}=n,t=Ar(e),r=t.tokenRefresher;r||(r=w5(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function w5(n){let{app:e}=n;return new SI(()=>N(this,null,function*(){let t=Ar(e),r;if(t.token?r=yield RI(n,!0):r=yield RI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ar(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},uk.RETRIAL_MIN_WAIT,uk.RETRIAL_MAX_WAIT)}function E5(n,e){let t=Ar(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Rd(n){return n.expireTimeMillis-Date.now()>0}function hk(n){return{token:_5(m5),error:n}}var MI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ar(this.app);for(let t of e)wk(this.app,t.next);return Promise.resolve()}};function I5(n,e){return new MI(n,e)}function C5(n){return{getToken:e=>RI(n,e),getLimitedUseToken:()=>y5(n),addTokenListener:e=>v5(n,"INTERNAL",e),removeTokenListener:e=>wk(n.app,e)}}var b5="@firebase/app-check",D5="0.8.8";var T5="app-check",fk="app-check-internal";function S5(){bi(new Kt(T5,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return I5(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fk).initialize()})),bi(new Kt(fk,n=>{let e=n.getProvider("app-check").getImmediate();return C5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(b5,D5)}S5();var A5=["localhost","0.0.0.0","127.0.0.1"],Yoe=typeof window<"u"&&A5.includes(window.location.hostname);var x5="firebase",R5="10.14.1";ct.registerVersion(x5,R5,"app-compat");var M5=["ngOnDestroy"],Ik=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(M5.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,u)=>o.then(d=>{let h=d?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,h),h})})})});var Am=class{constructor(e){return e}},ni=new K("angularfire2.app.options"),ri=new K("angularfire2.app.name");function qi(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=ct.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ct.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;N5("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Am(o)}var N5=(n,...e)=>{ZE()&&typeof console<"u"&&console[n](...e)},P5={provide:Am,useFactory:qi,deps:[ni,De,[new Lo,ri]]},Ck=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ni,useValue:t},{provide:ri,useValue:r}]}}constructor(t){ct.registerVersion("angularfire",Sr.full,"core"),ct.registerVersion("angularfire",Sr.full,"app-compat"),ct.registerVersion("angular",WN.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(Bt))};static \u0275mod=Xe({type:n});static \u0275inj=Ze({providers:[P5]})}return n})();function js(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return k5(i,o)||(Ek("error",`${e} was already initialized on the ${t} Firebase App with different settings.${O5?" You may need to reload as Firebase is not HMR aware.":""}`),Ek("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function k5(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var O5=typeof module<"u"&&!!module.hot,Ek=(n,...e)=>{ZE()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Md=new K("angularfire2.auth.use-emulator"),Nd=new K("angularfire2.auth.settings"),Pd=new K("angularfire2.auth.tenant-id"),kd=new K("angularfire2.auth.langugage-code"),Od=new K("angularfire2.auth.use-device-language"),Fd=new K("angularfire.auth.persistence"),Ld=(n,e,t,r,i,s,o,a)=>js(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(let[u,d]of Object.entries(o))l.settings[u]=d;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]),Ko=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,u,d,h,g,m){let y=new it,C=se(void 0).pipe(jn(o.outsideAngular),qe(()=>s.runOutsideAngular(()=>import("./chunk-DSEKQDEH.js"))),re(()=>qi(t,s,r)),re(b=>Ld(b,s,a,u,d,h,l,g)),up({bufferSize:1,refCount:!1}));if(Ho(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=se(null);else{C.pipe(er()).subscribe();let b=C.pipe(qe(O=>O.getRedirectResult().then(z=>z,()=>null)),st,up({bufferSize:1,refCount:!1})),V=C.pipe(qe(O=>new ve(z=>({unsubscribe:s.runOutsideAngular(()=>O.onAuthStateChanged(oe=>z.next(oe),oe=>z.error(oe),()=>z.complete()))})))),B=C.pipe(qe(O=>new ve(z=>({unsubscribe:s.runOutsideAngular(()=>O.onIdTokenChanged(oe=>z.next(oe),oe=>z.error(oe),()=>z.complete()))}))));this.authState=b.pipe(dp(V),yr(o.outsideAngular),jn(o.insideAngular)),this.user=b.pipe(dp(B),yr(o.outsideAngular),jn(o.insideAngular)),this.idToken=this.user.pipe(qe(O=>O?be(O.getIdToken()):se(null))),this.idTokenResult=this.user.pipe(qe(O=>O?be(O.getIdTokenResult()):se(null))),this.credential=Za(b,y,this.authState.pipe(Zt(O=>!O))).pipe(re(O=>O?.user?O:null),yr(o.outsideAngular),jn(o.insideAngular))}return Ik(this,C,s,{spy:{apply:(b,V,B)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&B.then(O=>y.next(O))}}})}static \u0275fac=function(r){return new(r||n)(L(ni),L(ri,8),L(Bt),L(De),L(Ls),L(Md,8),L(Nd,8),L(Pd,8),L(kd,8),L(Od,8),L(Fd,8),L(Tr,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),bk=(()=>{class n{constructor(){ct.registerVersion("angularfire",Sr.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ze({providers:[Ko]})}return n})();var xm=(()=>{class n{afAuth;constructor(t){this.afAuth=t}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}signOut(){return this.afAuth.signOut()}static \u0275fac=function(r){return new(r||n)(L(Ko))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F5=()=>["/signup"];function L5(n,e){n&1&&(A(0,"div",17),F(1," Enter a valid email address. "),R())}function V5(n,e){n&1&&(A(0,"div",17),F(1," Password must be at least 6 characters. "),R())}var Tk=(()=>{class n{fb;authService;router;loginForm;constructor(t,r,i){this.fb=t,this.authService=r,this.router=i,this.loginForm=this.fb.group({email:["",[Fn.required,Fn.email]],password:["",[Fn.required,Fn.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){let{email:t,password:r}=this.loginForm.value;this.authService.signIn(t,r).then(()=>{this.router.navigate(["/movie"])}).catch(i=>{console.error("Login error:",i)})}}static \u0275fac=function(r){return new(r||n)(ee(zl),ee(xm),ee(cr))};static \u0275cmp=vt({type:n,selectors:[["app-signin"]],decls:28,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","formControlName","email","aria-describedby","emailHelp",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","formControlName","password",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input"],[1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"routerLink"],[1,"form-text","text-danger"]],template:function(r,i){if(r&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),F(6,"Login"),R(),A(7,"h6"),F(8,"Please enter email & password!!"),R()(),A(9,"form",5),We("ngSubmit",function(){return i.onSubmit()}),A(10,"div",6)(11,"label",7),F(12,"Email address"),R(),le(13,"input",8),Ge(14,L5,2,0,"div",9),R(),A(15,"div",6)(16,"label",10),F(17,"Password"),R(),le(18,"input",11),Ge(19,V5,2,0,"div",9),R(),A(20,"div",12),le(21,"input",13),A(22,"label",14),F(23,"Check me out"),R()(),A(24,"button",15),F(25,"Submit"),R()(),A(26,"a",16),F(27,"New User? Click to signup!!"),R()()()()()),r&2){let s,o;$(9),ie("formGroup",i.loginForm),$(5),ie("ngIf",((s=i.loginForm.get("email"))==null?null:s.invalid)&&((s=i.loginForm.get("email"))==null?null:s.touched)),$(5),ie("ngIf",((o=i.loginForm.get("password"))==null?null:o.invalid)&&((o=i.loginForm.get("password"))==null?null:o.touched)),$(5),ie("disabled",i.loginForm.invalid),$(2),ie("routerLink",Ht(5,F5))}},dependencies:[As,ql,Fs,$l,Hl,Ad,xd,ti],styles:[".card[_ngcontent-%COMP%]{border:none;width:500px;padding:40px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#295270;background:linear-gradient(90deg,#295270,#534176);display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], label[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#fff}"]})}return n})();var j5=()=>["/login"];function U5(n,e){n&1&&(A(0,"div",19),F(1," Full Name is required. "),R())}function B5(n,e){n&1&&(A(0,"div",19),F(1," Enter a valid email address. "),R())}function $5(n,e){n&1&&(A(0,"div",19),F(1," Password must be at least 6 characters. "),R())}function H5(n,e){n&1&&(A(0,"div",19),F(1," Confirm Password must match the Password. "),R())}var Sk=(()=>{class n{fb;authService;router;signupForm;constructor(t,r,i){this.fb=t,this.authService=r,this.router=i,this.signupForm=this.fb.group({displayName:["",[Fn.required]],email:["",[Fn.required,Fn.email]],password:["",[Fn.required,Fn.minLength(6)]],confirmPassword:["",[Fn.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(t){return t.get("password")?.value===t.get("confirmPassword")?.value?null:{mismatch:!0}}ngOnInit(){}onSubmit(){if(this.signupForm.valid){let{displayName:t,email:r,password:i}=this.signupForm.value;this.authService.signUp(r,i).then(s=>s.user.updateProfile({displayName:t})).then(()=>{console.log("Signup successful and display name updated!"),this.router.navigate(["/login"])}).catch(s=>{console.error("Signup error:",s)})}}static \u0275fac=function(r){return new(r||n)(ee(zl),ee(xm),ee(cr))};static \u0275cmp=vt({type:n,selectors:[["app-signup"]],decls:36,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","displayName",1,"form-control"],["class","text-danger",4,"ngIf"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","formControlName","email","aria-describedby","emailHelp",1,"form-control"],["id","emailHelp",1,"form-text"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","formControlName","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"routerLink"],[1,"text-danger"]],template:function(r,i){if(r&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),F(6,"Sign Up"),R(),A(7,"h6"),F(8,"Register Yourself!!"),R()(),A(9,"form",5),We("ngSubmit",function(){return i.onSubmit()}),A(10,"div",6)(11,"label",7),F(12,"Full Name"),R(),le(13,"input",8),Ge(14,U5,2,0,"div",9),R(),A(15,"div",6)(16,"label",10),F(17,"Email address"),R(),le(18,"input",11),Ge(19,B5,2,0,"div",9),A(20,"div",12),F(21,"We'll never share your email with anyone else."),R()(),A(22,"div",6)(23,"label",13),F(24,"Password"),R(),le(25,"input",14),Ge(26,$5,2,0,"div",9),R(),A(27,"div",6)(28,"label",15),F(29,"Confirm Password"),R(),le(30,"input",16),Ge(31,H5,2,0,"div",9),R(),A(32,"button",17),F(33,"Sign Up"),R()(),A(34,"a",18),F(35,"Already Registered? Click to Login!!"),R()()()()()),r&2){let s,o,a,l;$(9),ie("formGroup",i.signupForm),$(5),ie("ngIf",((s=i.signupForm.get("displayName"))==null?null:s.invalid)&&((s=i.signupForm.get("displayName"))==null?null:s.touched)),$(5),ie("ngIf",((o=i.signupForm.get("email"))==null?null:o.invalid)&&((o=i.signupForm.get("email"))==null?null:o.touched)),$(7),ie("ngIf",((a=i.signupForm.get("password"))==null?null:a.invalid)&&((a=i.signupForm.get("password"))==null?null:a.touched)),$(5),ie("ngIf",((l=i.signupForm.get("confirmPassword"))==null?null:l.invalid)&&((l=i.signupForm.get("confirmPassword"))==null?null:l.touched)),$(),ie("disabled",i.signupForm.invalid),$(2),ie("routerLink",Ht(7,j5))}},dependencies:[As,ql,Fs,$l,Hl,Ad,xd,ti],styles:[".card[_ngcontent-%COMP%]{border:none;width:500px;padding:40px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#295270;background:linear-gradient(90deg,#295270,#534176);display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], label[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#fff}"]})}return n})();var OI=(n,e)=>["/pay",n,e];function q5(n,e){if(n&1&&(A(0,"div",8),le(1,"img",9),A(2,"h3"),F(3),R(),A(4,"p"),F(5),R(),A(6,"h4"),F(7),R(),A(8,"button",10),F(9,"Subscribe"),R()()),n&2){let t=e.$implicit;$(),ie("src",t.logo,wn),$(2),ut(t.name),$(2),ut(t.description),$(2),Jt("",t.price," / month"),$(),ie("routerLink",Cl(5,OI,t.name,t.price))}}function z5(n,e){if(n&1&&(A(0,"div",8),le(1,"img",11),A(2,"h3"),F(3),R(),A(4,"p"),F(5),R(),A(6,"h4"),F(7),R(),A(8,"button",10),F(9,"Subscribe"),R()()),n&2){let t=e.$implicit;$(),ie("src",t.logo,wn),$(2),ut(t.name),$(2),ut(t.description),$(2),Jt("",t.price," / month"),$(),ie("routerLink",Cl(5,OI,t.name,t.price))}}function G5(n,e){if(n&1&&(A(0,"div",8),le(1,"img",12),A(2,"h3"),F(3),R(),A(4,"p"),F(5),R(),A(6,"h4"),F(7),R(),A(8,"button",10),F(9,"Subscribe"),R()()),n&2){let t=e.$implicit;$(),ie("src",t.logo,wn),$(2),ut(t.name),$(2),ut(t.description),$(2),Jt("",t.price," / month"),$(),ie("routerLink",Cl(5,OI,t.name,t.price))}}var Ak=(()=>{class n{plans={netflix:[{name:"Basic",description:"Watch on 1 screen at a time in standard definition.",price:"$8.99",logo:"https://images.ctfassets.net/y2ske730sjqp/4aEQ1zAUZF5pLSDtfviWjb/ba04f8d5bd01428f6e3803cc6effaf30/Netflix_N.png?"},{name:"Standard",description:"Watch on 2 screens at a time in high definition.",price:"$13.99",logo:"https://images.ctfassets.net/y2ske730sjqp/4aEQ1zAUZF5pLSDtfviWjb/ba04f8d5bd01428f6e3803cc6effaf30/Netflix_N.png?"},{name:"Premium",description:"Watch on 4 screens at a time in Ultra HD.",price:"$17.99",logo:"https://images.ctfassets.net/y2ske730sjqp/4aEQ1zAUZF5pLSDtfviWjb/ba04f8d5bd01428f6e3803cc6effaf30/Netflix_N.png?"}],amazon:[{name:"Basic",description:"Watch on 1 screen in HD.",price:"$8.99",logo:"https://cdn4.iconfinder.com/data/icons/logos-brands-in-colors/92/amazon-prime-logo-512.png?h=400"},{name:"Standard",description:"Watch on 2 screens in HD.",price:"$12.99",logo:"https://cdn4.iconfinder.com/data/icons/logos-brands-in-colors/92/amazon-prime-logo-512.png?h=400"},{name:"Premium",description:"Watch on 4 screens in Ultra HD.",price:"$15.99",logo:"https://cdn4.iconfinder.com/data/icons/logos-brands-in-colors/92/amazon-prime-logo-512.png?h=400"}],disney:[{name:"Basic",description:"Watch on 1 screen in HD.",price:"$9.99",logo:"https://cdn.brandfetch.io/idh5Jct7tV/w/800/h/231/theme/dark/logo.png?c=1id64Mup7ac03k1S4NH&k=bfHSJFAPEG"},{name:"Standard",description:"Watch on 2 screens in Full HD.",price:"$13.99",logo:"https://cdn.brandfetch.io/idh5Jct7tV/w/800/h/231/theme/dark/logo.png?c=1id64Mup7ac03k1S4NH&k=bfHSJFAPEG"},{name:"Premium",description:"Watch on 4 screens in Ultra HD.",price:"$18.99",logo:"https://cdn.brandfetch.io/idh5Jct7tV/w/800/h/231/theme/dark/logo.png?c=1id64Mup7ac03k1S4NH&k=bfHSJFAPEG"}]};scrollToPlans(){let t=document.getElementById("pln");t&&t.scrollIntoView({behavior:"smooth"})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vt({type:n,selectors:[["app-subs"]],decls:26,vars:3,consts:[[1,"subscription-page"],[1,"hero-section"],[1,"hero-content"],[1,"explore-btn",3,"click"],["id","pln",1,"plans"],[1,"plan-row"],["class","plan-card",4,"ngFor","ngForOf"],[1,"plans"],[1,"plan-card"],["alt","Netflix Logo",1,"plan-logo",3,"src"],[1,"subscribe-btn",3,"routerLink"],["alt","Amazon Prime Logo",1,"plan-logo",3,"src"],["alt","Disney Hotstar Logo",1,"plan-logo",3,"src"]],template:function(r,i){r&1&&(A(0,"div",0),le(1,"app-header"),A(2,"div",1)(3,"div",2)(4,"h1"),F(5,"Choose Your Plan"),R(),A(6,"p"),F(7,"Get access to premium content across the globe"),R(),A(8,"button",3),We("click",function(){return i.scrollToPlans()}),F(9,"Explore Now"),R()()(),A(10,"div",4)(11,"h2"),F(12,"Netflix"),R(),A(13,"div",5),Ge(14,q5,10,8,"div",6),R()(),A(15,"div",7)(16,"h2"),F(17,"Amazon Prime"),R(),A(18,"div",5),Ge(19,z5,10,8,"div",6),R()(),A(20,"div",7)(21,"h2"),F(22,"Disney Hotstar"),R(),A(23,"div",5),Ge(24,G5,10,8,"div",6),R()(),le(25,"app-footer"),R()),r&2&&($(14),ie("ngForOf",i.plans.netflix),$(5),ie("ngForOf",i.plans.amazon),$(5),ie("ngForOf",i.plans.disney))},dependencies:[Ss,ti,Ps,Ll],styles:['.subscription-page[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#fff}.hero-section[_ngcontent-%COMP%]{position:relative;height:80vh;width:100%;text-align:center;display:flex;align-items:center;justify-content:center;background-image:url("./media/para2-HXMLVGQH.jpg");background-size:cover;background-position:center;background-attachment:fixed}.hero-content[_ngcontent-%COMP%]{z-index:1}.plans[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;padding:3rem 1rem;background-image:url(https://img.freepik.com/free-vector/drive-movie-theater-concept_52683-45698.jpg?t=st=1731180349~exp=1731183949~hmac=c2322f3463aecbc68aa002aae0f9891046c9262aa4492fd977de3e8ccad44b95&w=1060);background-repeat:no-repeat;background-size:cover;background-attachment:fixed}.plan-card[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:10px;padding:1.5rem;width:280px;text-align:center;transition:transform .3s,box-shadow .3s;animation:_ngcontent-%COMP%_fadeInUp 1s ease forwards;opacity:0;transform:translateY(20px)}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 4px 20px #00000080}.plan-row[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center;margin-bottom:2rem}.plan-card[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:10px;padding:1.5rem;width:280px;text-align:center;transition:transform .3s,box-shadow .3s}.plan-logo[_ngcontent-%COMP%]{width:150px;height:150px;margin-bottom:1rem}.subscribe-btn[_ngcontent-%COMP%], .explore-btn[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;border:none;padding:.8rem 1.2rem;font-size:1rem;cursor:pointer;transition:background-color .3s}.subscribe-btn[_ngcontent-%COMP%]:hover, .explore-btn[_ngcontent-%COMP%]:hover{background-color:#b81d24}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.plans[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.plan-card[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}}']})}return n})();function W5(n,e){if(n&1){let t=Il();A(0,"div",8),We("click",function(){Pn(t);let i=$t();return kn(i.closePopup())}),A(1,"div",9)(2,"p"),F(3),A(4,"b"),F(5),R()(),A(6,"button",10),We("click",function(){Pn(t);let i=$t();return kn(i.closePopup())}),F(7,"Close"),R()()()}if(n&2){let t=$t();$(3),Jt("Payment details for ",t.paymentMethod,": "),$(2),ut(t.paymentDetails)}}var xk=(()=>{class n{route;planName="";planPrice="";showPopup=!1;paymentMethod="";paymentDetails="";constructor(t){this.route=t}ngOnInit(){this.route.paramMap.subscribe(t=>{this.planName=t.get("name"),this.planPrice=t.get("price")})}payWith(t){switch(this.paymentMethod=t,this.showPopup=!0,t){case"paytm":this.paymentDetails="7992307644@paytm";break;case"gpay":this.paymentDetails="7992307644@okhdfcbank";break;case"creditCard":this.paymentDetails="Your Credit Card Payment Gateway";break}}closePopup(){this.showPopup=!1}static \u0275fac=function(r){return new(r||n)(ee(Dr))};static \u0275cmp=vt({type:n,selectors:[["app-payment"]],decls:20,vars:3,consts:[[1,"payment-page"],[1,"payment-options"],[1,"payment-card",3,"click"],["src","https://cdn.iconscout.com/icon/free/png-512/free-paytm-logo-icon-download-in-svg-png-gif-file-formats--online-payment-brand-logos-pack-icons-226448.png?f=webp&w=256","alt","Paytm",1,"payment-logo"],[1,"pay-button"],["src","https://cdn.iconscout.com/icon/free/png-512/free-google-pay-logo-icon-download-in-svg-png-gif-file-formats--gpay-payment-money-pack-logos-icons-1721670.png?f=webp&w=256","alt","Google Pay",1,"payment-logo"],["src","https://cdn.iconscout.com/icon/premium/png-512-thumb/creditcard-59-607409.png?f=webp&w=256","alt","Credit Card",1,"payment-logo"],["class","popup-overlay",3,"click",4,"ngIf"],[1,"popup-overlay",3,"click"],[1,"popup-card"],[1,"close-button",3,"click"]],template:function(r,i){r&1&&(le(0,"app-header"),A(1,"div",0)(2,"h2"),F(3),R(),A(4,"p"),F(5),R(),A(6,"div",1)(7,"div",2),We("click",function(){return i.payWith("paytm")}),le(8,"img",3),A(9,"button",4),F(10,"Pay with Paytm"),R()(),A(11,"div",2),We("click",function(){return i.payWith("gpay")}),le(12,"img",5),A(13,"button",4),F(14,"Pay with Google Pay"),R()(),A(15,"div",2),We("click",function(){return i.payWith("creditCard")}),le(16,"img",6),A(17,"button",4),F(18,"Pay with Credit Card"),R()()()(),Ge(19,W5,8,2,"div",7)),r&2&&($(3),Jt("Payment for ",i.planName,""),$(2),Jt("Total: ",i.planPrice,""),$(14),ie("ngIf",i.showPopup))},dependencies:[As,Ps],styles:[".payment-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-image:url(https://img.freepik.com/free-vector/hand-drawn-items-online-payment_23-2147674141.jpg);background-size:cover;background-position:center;color:#fff;text-align:center}.payment-options[_ngcontent-%COMP%]{display:flex;gap:20px;flex-wrap:wrap;justify-content:center;width:100%}.payment-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:200px;height:250px;padding:20px;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;text-align:center;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.payment-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 6px 12px #0003}.payment-logo[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:15px}.pay-button[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s ease}.pay-button[_ngcontent-%COMP%]:hover{background-color:#b81d24}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;display:flex;justify-content:center;align-items:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.popup-card[_ngcontent-%COMP%]{background:#ffffffe6;padding:20px;border-radius:10px;box-shadow:0 10px 20px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease;max-width:90%;width:300px;text-align:center}.close-button[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:20px;transition:background-color .3s ease}.close-button[_ngcontent-%COMP%]:hover{background-color:#b81d24}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}"]})}return n})();function K5(n,e){if(n&1&&(A(0,"div",5)(1,"div",6),le(2,"img",7),A(3,"div",8)(4,"h5",9),F(5),R(),A(6,"p",10),F(7),R(),A(8,"button",11),F(9,"Watch Now"),R()()()()),n&2){let t=e.$implicit;$(2),jo("alt",t.title),ie("src",t.img,wn),$(3),ut(t.title),$(2),Jt("Category: ",t.category,"")}}var Rk=(()=>{class n{route;categoryType="";movies=[{title:"Action Movie 1",category:"Action",img:"https://img.freepik.com/free-photo/front-view-soldier-wearing-camouflage-equipment_23-2151001964.jpg?t=st=1731230905~exp=1731234505~hmac=cf341c3c420a9144650f9999c59851515785ec669970daa3d47b830fb79d258c&w=360"},{title:"Action Movie 2",category:"Action",img:"https://wallpapercave.com/wp/wp14473213.jpg"},{title:"Action Movie 2",category:"Action",img:"https://cdn.shopify.com/s/files/1/1057/4964/files/Indiana-Jones-and-the-Last-Crusade-Vintage-Movie-Poster-Original-1-Sheet-27x41_10a0f622-d31c-4ff2-978e-846157d3a393_339x.jpg?v=172783823"},{title:"Comedy Movie 1",category:"Comedy",img:"https://bollywoodmovieposters.com/wp-content/uploads/2024/01/govinda-movie-poster-partner-film-254x359.jpg"},{title:"Comedy Movie 2",category:"Comedy",img:"https://bollywoodmovieposters.com/wp-content/uploads/2023/09/phir-hera-pheri-movie-poster-old-bollywood-254x359.jpg"},{title:"Drama Movie 1",category:"Drama",img:"https://e1.pxfuel.com/desktop-wallpaper/852/887/desktop-wallpaper-aladdin-movie-poster-in-2160x3840-resolution-live-action-films-thumbnail.jpg"},{title:"Drama Movie 1",category:"Drama",img:"https://e0.pxfuel.com/wallpapers/303/205/desktop-wallpaper-extraction-chris-hemsworth-netflix-action-movie-poster-revealed-netflix-movies-thumbnail.jpg"},{title:"Drama Movie 1",category:"Drama",img:"https://e1.pxfuel.com/desktop-wallpaper/919/869/desktop-wallpaper-deadpool-2-movie-poster-by-prabhatking01-deadpool-2-action-thumbnail.jpg"},{title:"Horror Movie 1",category:"Horror",img:"https://e0.pxfuel.com/wallpapers/862/130/desktop-wallpaper-nun-movie-horror-iphone-iphone-iphone-evil-nun-thumbnail.jpg"},{title:"Horror Movie 1",category:"Horror",img:"https://e0.pxfuel.com/wallpapers/622/497/desktop-wallpaper-halloween-1978-horror-movie-art-horror-posters-slasher-movies-thumbnail.jpg"},{title:"Horror Movie 1",category:"Horror",img:"https://e1.pxfuel.com/desktop-wallpaper/973/28/desktop-wallpaper-horror-villains-horror-movie-characters-thumbnail.jpg"}];filteredMovies=[];constructor(t){this.route=t}ngOnInit(){this.route.paramMap.subscribe(t=>{this.categoryType=t.get("type")||"",this.filterMovies()})}filterMovies(){this.categoryType?this.filteredMovies=this.movies.filter(t=>t.category.toLowerCase()===this.categoryType.toLowerCase()):this.filteredMovies=[]}static \u0275fac=function(r){return new(r||n)(ee(Dr))};static \u0275cmp=vt({type:n,selectors:[["app-hideseek"]],decls:9,vars:4,consts:[[1,"full-page-container"],[1,"container","mt-4"],[1,"text-center","mb-4"],[1,"row"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","mb-4"],[1,"card","movie-card"],[1,"card-img-top","movie-img",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"watch-now-btn"]],template:function(r,i){r&1&&(le(0,"app-header"),A(1,"div",0)(2,"div",1)(3,"h2",2),F(4),Ig(5,"titlecase"),R(),A(6,"div",3),Ge(7,K5,10,4,"div",4),R()()(),le(8,"app-footer")),r&2&&($(4),Jt("",Cg(5,2,i.categoryType)," Movies"),$(3),ie("ngForOf",i.filteredMovies))},dependencies:[Ss,Ps,Ll,IP],styles:[".full-page-container[_ngcontent-%COMP%]{height:100vh;width:100%;background:linear-gradient(45deg,tomato,#ffa07a,#6a11cb,#2575fc,#00c6ff);animation:_ngcontent-%COMP%_gradientAnimation 5s ease-in-out infinite;display:flex;justify-content:center;align-items:center;flex-direction:column}@keyframes _ngcontent-%COMP%_gradientAnimation{0%{background:linear-gradient(45deg,tomato,#ffa07a,#6a11cb,#2575fc,#00c6ff)}50%{background:linear-gradient(45deg,#ff1493,tomato,#00c6ff,#6a11cb,#2575fc)}to{background:linear-gradient(45deg,tomato,#ffa07a,#6a11cb,#2575fc,#00c6ff)}}.movie-card[_ngcontent-%COMP%]{position:relative;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:10px;box-shadow:0 4px 6px #0000001a;transition:transform .3s ease-in-out;width:400px;height:500px;margin-bottom:20px;text-align:center;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden}.movie-img[_ngcontent-%COMP%]{width:100%;height:350px;object-fit:cover;border-radius:10px;transition:transform .3s ease-in-out}.movie-img[_ngcontent-%COMP%]:hover{transform:scale(.9)}.movie-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 12px #0003;background:linear-gradient(45deg,tomato,#ffa07a,#6a11cb,#2575fc,#00c6ff)}.watch-now-btn[_ngcontent-%COMP%]{background-color:#2575fc;color:#fff;border:none;padding:10px 20px;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.watch-now-btn[_ngcontent-%COMP%]:hover{background-color:#6a11cb}.paid-message[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:18px;margin-top:10px}"]})}return n})();var Q5=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Tk},{path:"movie",component:x1},{path:"profile",component:lk},{path:"subs",component:Ak},{path:"pay/:name/:price",component:xk},{path:"category/:type",component:Rk},{path:"signup",component:Sk}],Mk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ze({imports:[rI.forRoot(Q5),rI]})}return n})();var Nk=(()=>{class n{title="Movie-app";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){r&1&&le(0,"router-outlet")},dependencies:[Z0]})}return n})();var Pk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kk={};var Us,FI;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(D,T,x){for(var E=Array(arguments.length-2),Ei=2;Ei<arguments.length;Ei++)E[Ei-2]=arguments[Ei];return v.prototype[T].apply(D,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var D=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)D[T]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(T=0;16>T;++T)D[T]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],T=I.g[2];var x=I.g[3],E=v+(x^w&(T^x))+D[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=x+(T^v&(w^T))+D[1]+3905402710&4294967295,x=v+(E<<12&4294967295|E>>>20),E=T+(w^x&(v^w))+D[2]+606105819&4294967295,T=x+(E<<17&4294967295|E>>>15),E=w+(v^T&(x^v))+D[3]+3250441966&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(x^w&(T^x))+D[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=x+(T^v&(w^T))+D[5]+1200080426&4294967295,x=v+(E<<12&4294967295|E>>>20),E=T+(w^x&(v^w))+D[6]+2821735955&4294967295,T=x+(E<<17&4294967295|E>>>15),E=w+(v^T&(x^v))+D[7]+4249261313&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(x^w&(T^x))+D[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=x+(T^v&(w^T))+D[9]+2336552879&4294967295,x=v+(E<<12&4294967295|E>>>20),E=T+(w^x&(v^w))+D[10]+4294925233&4294967295,T=x+(E<<17&4294967295|E>>>15),E=w+(v^T&(x^v))+D[11]+2304563134&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(x^w&(T^x))+D[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=x+(T^v&(w^T))+D[13]+4254626195&4294967295,x=v+(E<<12&4294967295|E>>>20),E=T+(w^x&(v^w))+D[14]+2792965006&4294967295,T=x+(E<<17&4294967295|E>>>15),E=w+(v^T&(x^v))+D[15]+1236535329&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(T^x&(w^T))+D[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=x+(w^T&(v^w))+D[6]+3225465664&4294967295,x=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(x^v))+D[11]+643717713&4294967295,T=x+(E<<14&4294967295|E>>>18),E=w+(x^v&(T^x))+D[0]+3921069994&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(T^x&(w^T))+D[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=x+(w^T&(v^w))+D[10]+38016083&4294967295,x=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(x^v))+D[15]+3634488961&4294967295,T=x+(E<<14&4294967295|E>>>18),E=w+(x^v&(T^x))+D[4]+3889429448&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(T^x&(w^T))+D[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=x+(w^T&(v^w))+D[14]+3275163606&4294967295,x=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(x^v))+D[3]+4107603335&4294967295,T=x+(E<<14&4294967295|E>>>18),E=w+(x^v&(T^x))+D[8]+1163531501&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(T^x&(w^T))+D[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=x+(w^T&(v^w))+D[2]+4243563512&4294967295,x=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(x^v))+D[7]+1735328473&4294967295,T=x+(E<<14&4294967295|E>>>18),E=w+(x^v&(T^x))+D[12]+2368359562&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(w^T^x)+D[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=x+(v^w^T)+D[8]+2272392833&4294967295,x=v+(E<<11&4294967295|E>>>21),E=T+(x^v^w)+D[11]+1839030562&4294967295,T=x+(E<<16&4294967295|E>>>16),E=w+(T^x^v)+D[14]+4259657740&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(w^T^x)+D[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=x+(v^w^T)+D[4]+1272893353&4294967295,x=v+(E<<11&4294967295|E>>>21),E=T+(x^v^w)+D[7]+4139469664&4294967295,T=x+(E<<16&4294967295|E>>>16),E=w+(T^x^v)+D[10]+3200236656&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(w^T^x)+D[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=x+(v^w^T)+D[0]+3936430074&4294967295,x=v+(E<<11&4294967295|E>>>21),E=T+(x^v^w)+D[3]+3572445317&4294967295,T=x+(E<<16&4294967295|E>>>16),E=w+(T^x^v)+D[6]+76029189&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(w^T^x)+D[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=x+(v^w^T)+D[12]+3873151461&4294967295,x=v+(E<<11&4294967295|E>>>21),E=T+(x^v^w)+D[15]+530742520&4294967295,T=x+(E<<16&4294967295|E>>>16),E=w+(T^x^v)+D[2]+3299628645&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(T^(w|~x))+D[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=x+(w^(v|~T))+D[7]+1126891415&4294967295,x=v+(E<<10&4294967295|E>>>22),E=T+(v^(x|~w))+D[14]+2878612391&4294967295,T=x+(E<<15&4294967295|E>>>17),E=w+(x^(T|~v))+D[5]+4237533241&4294967295,w=T+(E<<21&4294967295|E>>>11),E=v+(T^(w|~x))+D[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=x+(w^(v|~T))+D[3]+2399980690&4294967295,x=v+(E<<10&4294967295|E>>>22),E=T+(v^(x|~w))+D[10]+4293915773&4294967295,T=x+(E<<15&4294967295|E>>>17),E=w+(x^(T|~v))+D[1]+2240044497&4294967295,w=T+(E<<21&4294967295|E>>>11),E=v+(T^(w|~x))+D[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=x+(w^(v|~T))+D[15]+4264355552&4294967295,x=v+(E<<10&4294967295|E>>>22),E=T+(v^(x|~w))+D[6]+2734768916&4294967295,T=x+(E<<15&4294967295|E>>>17),E=w+(x^(T|~v))+D[13]+1309151649&4294967295,w=T+(E<<21&4294967295|E>>>11),E=v+(T^(w|~x))+D[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=x+(w^(v|~T))+D[11]+3174756917&4294967295,x=v+(E<<10&4294967295|E>>>22),E=T+(v^(x|~w))+D[2]+718787259&4294967295,T=x+(E<<15&4294967295|E>>>17),E=w+(x^(T|~v))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+x&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,D=this.B,T=this.h,x=0;x<v;){if(T==0)for(;x<=w;)i(this,I,x),x+=this.blockSize;if(typeof I=="string"){for(;x<v;)if(D[T++]=I.charCodeAt(x++),T==this.blockSize){i(this,D),T=0;break}}else for(;x<v;)if(D[T++]=I[x++],T==this.blockSize){i(this,D),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var D=0;32>D;D+=8)I[w++]=this.g[v]>>>D&255;return I};function s(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function o(I,v){this.h=v;for(var w=[],D=!0,T=I.length-1;0<=T;T--){var x=I[T]|0;D&&x==v||(w[T]=x,D=!1)}this.g=w}var a={};function l(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return b(u(-I));for(var v=[],w=1,D=0;I>=w;D++)v[D]=I/w|0,w*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return b(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(v,8)),D=h,T=0;T<I.length;T+=8){var x=Math.min(8,I.length-T),E=parseInt(I.substring(T,T+x),v);8>x?(x=u(Math.pow(v,x)),D=D.j(x).add(u(E))):(D=D.j(w),D=D.add(u(E)))}return D}var h=l(0),g=l(1),m=l(16777216);n=o.prototype,n.m=function(){if(C(this))return-b(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var D=this.i(w);I+=(0<=D?D:4294967296+D)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(C(this))return"-"+b(this).toString(I);for(var v=u(Math.pow(I,6)),w=this,D="";;){var T=z(w,v).g;w=V(w,T.j(v));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=T,y(w))return x+D;for(;6>x.length;)x="0"+x;D=x+D}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=V(this,I),C(I)?-1:y(I)?0:1};function b(I){for(var v=I.g.length,w=[],D=0;D<v;D++)w[D]=~I.g[D];return new o(w,~I.h).add(g)}n.abs=function(){return C(this)?b(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0,T=0;T<=v;T++){var x=D+(this.i(T)&65535)+(I.i(T)&65535),E=(x>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);D=E>>>16,x&=65535,E&=65535,w[T]=E<<16|x}return new o(w,w[w.length-1]&-2147483648?-1:0)};function V(I,v){return I.add(b(v))}n.j=function(I){if(y(this)||y(I))return h;if(C(this))return C(I)?b(this).j(b(I)):b(b(this).j(I));if(C(I))return b(this.j(b(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],D=0;D<2*v;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<I.g.length;T++){var x=this.i(D)>>>16,E=this.i(D)&65535,Ei=I.i(T)>>>16,iu=I.i(T)&65535;w[2*D+2*T]+=E*iu,B(w,2*D+2*T),w[2*D+2*T+1]+=x*iu,B(w,2*D+2*T+1),w[2*D+2*T+1]+=E*Ei,B(w,2*D+2*T+1),w[2*D+2*T+2]+=x*Ei,B(w,2*D+2*T+2)}for(D=0;D<v;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=v;D<2*v;D++)w[D]=0;return new o(w,0)};function B(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function O(I,v){this.g=I,this.h=v}function z(I,v){if(y(v))throw Error("division by zero");if(y(I))return new O(h,h);if(C(I))return v=z(b(I),v),new O(b(v.g),b(v.h));if(C(v))return v=z(I,b(v)),new O(b(v.g),v.h);if(30<I.g.length){if(C(I)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,D=v;0>=D.l(I);)w=oe(w),D=oe(D);var T=J(w,1),x=J(D,1);for(D=J(D,2),w=J(w,2);!y(D);){var E=x.add(D);0>=E.l(I)&&(T=T.add(w),x=E),D=J(D,1),w=J(w,1)}return v=V(I,T.j(v)),new O(T,v)}for(T=h;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),x=u(w),E=x.j(v);C(E)||0<E.l(I);)w-=D,x=u(w),E=x.j(v);y(x)&&(x=g),T=T.add(x),I=V(I,E)}return new O(T,I)}n.A=function(I){return z(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0;D<v;D++)w[D]=this.i(D)&I.i(D);return new o(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0;D<v;D++)w[D]=this.i(D)|I.i(D);return new o(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],D=0;D<v;D++)w[D]=this.i(D)^I.i(D);return new o(w,this.h^I.h)};function oe(I){for(var v=I.g.length+1,w=[],D=0;D<v;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new o(w,I.h)}function J(I,v){var w=v>>5;v%=32;for(var D=I.g.length-w,T=[],x=0;x<D;x++)T[x]=0<v?I.i(x+w)>>>v|I.i(x+w+1)<<32-v:I.i(x+w);return new o(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FI=kk.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Us=kk.Integer=o}).apply(typeof Pk<"u"?Pk:typeof self<"u"?self:typeof window<"u"?window:{});var Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zi={};var LI,Y5,Gl,VI,Vd,Mm,jI,UI,BI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,p){return c==Array.prototype||c==Object.prototype||(c[f]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rm=="object"&&Rm];for(var f=0;f<c.length;++f){var p=c[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,f){if(f)e:{var p=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var S=c[_];if(!(S in p))break e;p=p[S]}c=c[c.length-1],_=p[c],f=f(_),f!=_&&f!=null&&e(p,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var p=0,_=!1,S={next:function(){if(!_&&p<c.length){var P=p++;return{value:f(P,c[P]),done:!1}}return _=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,p){return p})}});var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,p){return c.call.apply(c.bind,arguments)}function h(c,f,p){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,_),c.apply(f,S)}}return function(){return c.apply(f,arguments)}}function g(c,f,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,g.apply(null,arguments)}function m(c,f){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function y(c,f){function p(){}p.prototype=f.prototype,c.aa=f.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(_,S,P){for(var G=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)G[$e-2]=arguments[$e];return f.prototype[S].apply(_,G)}}function C(c){let f=c.length;if(0<f){let p=Array(f);for(let _=0;_<f;_++)p[_]=c[_];return p}return[]}function b(c,f){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(l(_)){let S=c.length||0,P=_.length||0;c.length=S+P;for(let G=0;G<P;G++)c[S+G]=_[G]}else c.push(_)}}class V{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function B(c){return/^[\s\xa0]*$/.test(c)}function O(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function z(c){return z[" "](c),c}z[" "]=function(){};var oe=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function J(c,f,p){for(let _ in c)f.call(p,c[_],_,c)}function I(c,f){for(let p in c)f.call(void 0,c[p],p,c)}function v(c){let f={};for(let p in c)f[p]=c[p];return f}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,f){let p,_;for(let S=1;S<arguments.length;S++){_=arguments[S];for(p in _)c[p]=_[p];for(let P=0;P<w.length;P++)p=w[P],Object.prototype.hasOwnProperty.call(_,p)&&(c[p]=_[p])}}function T(c){var f=1;c=c.split(":");let p=[];for(;0<f&&c.length;)p.push(c.shift()),f--;return c.length&&p.push(c.join(":")),p}function x(c){a.setTimeout(()=>{throw c},0)}function E(){var c=nv;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class Ei{constructor(){this.h=this.g=null}add(f,p){let _=iu.get();_.set(f,p),this.h?this.h.next=_:this.g=_,this.h=_}}var iu=new V(()=>new TU,c=>c.reset());class TU{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let su,ou=!1,nv=new Ei,JS=()=>{let c=a.Promise.resolve(void 0);su=()=>{c.then(SU)}};var SU=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(p){x(p)}var f=iu;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}ou=!1};function rs(){this.s=this.s,this.C=this.C}rs.prototype.s=!1,rs.prototype.ma=function(){this.s||(this.s=!0,this.N())},rs.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rn(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}rn.prototype.h=function(){this.defaultPrevented=!0};var AU=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return c}();function au(c,f){if(rn.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(oe){e:{try{z(f.nodeName);var S=!0;break e}catch{}S=!1}S||(f=null)}}else p=="mouseover"?f=c.fromElement:p=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:xU[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&au.aa.h.call(this)}}y(au,rn);var xU={2:"touch",3:"pen",4:"mouse"};au.prototype.h=function(){au.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lu="closure_listenable_"+(1e6*Math.random()|0),RU=0;function MU(c,f,p,_,S){this.listener=c,this.proxy=null,this.src=f,this.type=p,this.capture=!!_,this.ha=S,this.key=++RU,this.da=this.fa=!1}function uf(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function df(c){this.src=c,this.g={},this.h=0}df.prototype.add=function(c,f,p,_,S){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var G=iv(c,f,_,S);return-1<G?(f=c[G],p||(f.fa=!1)):(f=new MU(f,this.src,P,!!_,S),f.fa=p,c.push(f)),f};function rv(c,f){var p=f.type;if(p in c.g){var _=c.g[p],S=Array.prototype.indexOf.call(_,f,void 0),P;(P=0<=S)&&Array.prototype.splice.call(_,S,1),P&&(uf(f),c.g[p].length==0&&(delete c.g[p],c.h--))}}function iv(c,f,p,_){for(var S=0;S<c.length;++S){var P=c[S];if(!P.da&&P.listener==f&&P.capture==!!p&&P.ha==_)return S}return-1}var sv="closure_lm_"+(1e6*Math.random()|0),ov={};function eA(c,f,p,_,S){if(_&&_.once)return nA(c,f,p,_,S);if(Array.isArray(f)){for(var P=0;P<f.length;P++)eA(c,f[P],p,_,S);return null}return p=uv(p),c&&c[lu]?c.K(f,p,u(_)?!!_.capture:!!_,S):tA(c,f,p,!1,_,S)}function tA(c,f,p,_,S,P){if(!f)throw Error("Invalid event type");var G=u(S)?!!S.capture:!!S,$e=lv(c);if($e||(c[sv]=$e=new df(c)),p=$e.add(f,p,_,G,P),p.proxy)return p;if(_=NU(),p.proxy=_,_.src=c,_.listener=p,c.addEventListener)AU||(S=G),S===void 0&&(S=!1),c.addEventListener(f.toString(),_,S);else if(c.attachEvent)c.attachEvent(iA(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function NU(){function c(p){return f.call(c.src,c.listener,p)}let f=PU;return c}function nA(c,f,p,_,S){if(Array.isArray(f)){for(var P=0;P<f.length;P++)nA(c,f[P],p,_,S);return null}return p=uv(p),c&&c[lu]?c.L(f,p,u(_)?!!_.capture:!!_,S):tA(c,f,p,!0,_,S)}function rA(c,f,p,_,S){if(Array.isArray(f))for(var P=0;P<f.length;P++)rA(c,f[P],p,_,S);else _=u(_)?!!_.capture:!!_,p=uv(p),c&&c[lu]?(c=c.i,f=String(f).toString(),f in c.g&&(P=c.g[f],p=iv(P,p,_,S),-1<p&&(uf(P[p]),Array.prototype.splice.call(P,p,1),P.length==0&&(delete c.g[f],c.h--)))):c&&(c=lv(c))&&(f=c.g[f.toString()],c=-1,f&&(c=iv(f,p,_,S)),(p=-1<c?f[c]:null)&&av(p))}function av(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[lu])rv(f.i,c);else{var p=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(p,_,c.capture):f.detachEvent?f.detachEvent(iA(p),_):f.addListener&&f.removeListener&&f.removeListener(_),(p=lv(f))?(rv(p,c),p.h==0&&(p.src=null,f[sv]=null)):uf(c)}}}function iA(c){return c in ov?ov[c]:ov[c]="on"+c}function PU(c,f){if(c.da)c=!0;else{f=new au(f,this);var p=c.listener,_=c.ha||c.src;c.fa&&av(c),c=p.call(_,f)}return c}function lv(c){return c=c[sv],c instanceof df?c:null}var cv="__closure_events_fn_"+(1e9*Math.random()>>>0);function uv(c){return typeof c=="function"?c:(c[cv]||(c[cv]=function(f){return c.handleEvent(f)}),c[cv])}function sn(){rs.call(this),this.i=new df(this),this.M=this,this.F=null}y(sn,rs),sn.prototype[lu]=!0,sn.prototype.removeEventListener=function(c,f,p,_){rA(this,c,f,p,_)};function hn(c,f){var p,_=c.F;if(_)for(p=[];_;_=_.F)p.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new rn(f,c);else if(f instanceof rn)f.target=f.target||c;else{var S=f;f=new rn(_,c),D(f,S)}if(S=!0,p)for(var P=p.length-1;0<=P;P--){var G=f.g=p[P];S=hf(G,_,!0,f)&&S}if(G=f.g=c,S=hf(G,_,!0,f)&&S,S=hf(G,_,!1,f)&&S,p)for(P=0;P<p.length;P++)G=f.g=p[P],S=hf(G,_,!1,f)&&S}sn.prototype.N=function(){if(sn.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var p=c.g[f],_=0;_<p.length;_++)uf(p[_]);delete c.g[f],c.h--}}this.F=null},sn.prototype.K=function(c,f,p,_){return this.i.add(String(c),f,!1,p,_)},sn.prototype.L=function(c,f,p,_){return this.i.add(String(c),f,!0,p,_)};function hf(c,f,p,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var S=!0,P=0;P<f.length;++P){var G=f[P];if(G&&!G.da&&G.capture==p){var $e=G.listener,Wt=G.ha||G.src;G.fa&&rv(c.i,G),S=$e.call(Wt,_)!==!1&&S}}return S&&!_.defaultPrevented}function sA(c,f,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function oA(c){c.g=sA(()=>{c.g=null,c.i&&(c.i=!1,oA(c))},c.l);let f=c.h;c.h=null,c.m.apply(null,f)}class kU extends rs{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:oA(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cu(c){rs.call(this),this.h=c,this.g={}}y(cu,rs);var aA=[];function lA(c){J(c.g,function(f,p){this.g.hasOwnProperty(p)&&av(f)},c),c.g={}}cu.prototype.N=function(){cu.aa.N.call(this),lA(this)},cu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dv=a.JSON.stringify,OU=a.JSON.parse,FU=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hv(){}hv.prototype.h=null;function cA(c){return c.h||(c.h=c.i())}function uA(){}var uu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fv(){rn.call(this,"d")}y(fv,rn);function pv(){rn.call(this,"c")}y(pv,rn);var _o={},dA=null;function ff(){return dA=dA||new sn}_o.La="serverreachability";function hA(c){rn.call(this,_o.La,c)}y(hA,rn);function du(c){let f=ff();hn(f,new hA(f))}_o.STAT_EVENT="statevent";function fA(c,f){rn.call(this,_o.STAT_EVENT,c),this.stat=f}y(fA,rn);function fn(c){let f=ff();hn(f,new fA(f,c))}_o.Ma="timingevent";function pA(c,f){rn.call(this,_o.Ma,c),this.size=f}y(pA,rn);function hu(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function fu(){this.g=!0}fu.prototype.xa=function(){this.g=!1};function LU(c,f,p,_,S,P){c.info(function(){if(c.g)if(P)for(var G="",$e=P.split("&"),Wt=0;Wt<$e.length;Wt++){var ke=$e[Wt].split("=");if(1<ke.length){var on=ke[0];ke=ke[1];var an=on.split("_");G=2<=an.length&&an[1]=="type"?G+(on+"="+ke+"&"):G+(on+"=redacted&")}}else G=null;else G=P;return"XMLHTTP REQ ("+_+") [attempt "+S+"]: "+f+`
`+p+`
`+G})}function VU(c,f,p,_,S,P,G){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+S+"]: "+f+`
`+p+`
`+P+" "+G})}function Na(c,f,p,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+UU(c,p)+(_?" "+_:"")})}function jU(c,f){c.info(function(){return"TIMEOUT: "+f})}fu.prototype.info=function(){};function UU(c,f){if(!c.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var _=p[c];if(!(2>_.length)){var S=_[1];if(Array.isArray(S)&&!(1>S.length)){var P=S[0];if(P!="noop"&&P!="stop"&&P!="close")for(var G=1;G<S.length;G++)S[G]=""}}}}return dv(p)}catch{return f}}var pf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gA={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gv;function gf(){}y(gf,hv),gf.prototype.g=function(){return new XMLHttpRequest},gf.prototype.i=function(){return{}},gv=new gf;function is(c,f,p,_){this.j=c,this.i=f,this.l=p,this.R=_||1,this.U=new cu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mA}function mA(){this.i=null,this.g="",this.h=!1}var _A={},mv={};function _v(c,f,p){c.L=1,c.v=vf(Ii(f)),c.m=p,c.P=!0,yA(c,null)}function yA(c,f){c.F=Date.now(),mf(c),c.A=Ii(c.v);var p=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),NA(p.i,"t",_),c.C=0,p=c.j.J,c.h=new mA,c.g=YA(c.j,p?f:null,!c.m),0<c.O&&(c.M=new kU(g(c.Y,c,c.g),c.O)),f=c.U,p=c.g,_=c.ca;var S="readystatechange";Array.isArray(S)||(S&&(aA[0]=S.toString()),S=aA);for(var P=0;P<S.length;P++){var G=eA(p,S[P],_||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),du(),LU(c.i,c.u,c.A,c.l,c.R,c.m)}is.prototype.ca=function(c){c=c.target;let f=this.M;f&&Ci(c)==3?f.j():this.Y(c)},is.prototype.Y=function(c){try{if(c==this.g)e:{let an=Ci(this.g);var f=this.g.Ba();let Oa=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||jA(this.g)))){this.J||an!=4||f==7||(f==8||0>=Oa?du(3):du(2)),yv(this);var p=this.g.Z();this.X=p;t:if(vA(this)){var _=jA(this.g);c="";var S=_.length,P=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yo(this),pu(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<S;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(P&&f==S-1)});_.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,VU(this.i,this.u,this.A,this.l,this.R,an,p),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Wt=this.g;if(($e=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B($e)){var ke=$e;break t}}ke=null}if(p=ke)Na(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vv(this,p);else{this.o=!1,this.s=3,fn(12),yo(this),pu(this);break e}}if(this.P){p=!0;let mr;for(;!this.J&&this.C<G.length;)if(mr=BU(this,G),mr==mv){an==4&&(this.s=4,fn(14),p=!1),Na(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==_A){this.s=4,fn(15),Na(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else Na(this.i,this.l,mr,null),vv(this,mr);if(vA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||G.length!=0||this.h.h||(this.s=1,fn(16),p=!1),this.o=this.o&&p,!p)Na(this.i,this.l,G,"[Invalid Chunked Response]"),yo(this),pu(this);else if(0<G.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Dv(on),on.M=!0,fn(11))}}else Na(this.i,this.l,G,null),vv(this,G);an==4&&yo(this),this.o&&!this.J&&(an==4?GA(this.j,this):(this.o=!1,mf(this)))}else iB(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),yo(this),pu(this)}}}catch{}finally{}};function vA(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function BU(c,f){var p=c.C,_=f.indexOf(`
`,p);return _==-1?mv:(p=Number(f.substring(p,_)),isNaN(p)?_A:(_+=1,_+p>f.length?mv:(f=f.slice(_,_+p),c.C=_+p,f)))}is.prototype.cancel=function(){this.J=!0,yo(this)};function mf(c){c.S=Date.now()+c.I,wA(c,c.I)}function wA(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=hu(g(c.ba,c),f)}function yv(c){c.B&&(a.clearTimeout(c.B),c.B=null)}is.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(jU(this.i,this.A),this.L!=2&&(du(),fn(17)),yo(this),this.s=2,pu(this)):wA(this,this.S-c)};function pu(c){c.j.G==0||c.J||GA(c.j,c)}function yo(c){yv(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,lA(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function vv(c,f){try{var p=c.j;if(p.G!=0&&(p.g==c||wv(p.h,c))){if(!c.K&&wv(p.h,c)&&p.G==3){try{var _=p.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var S=_;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)bf(p),If(p);else break e;bv(p),fn(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=hu(g(p.Za,p),6e3));if(1>=CA(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else wo(p,11)}else if((c.K||p.g==c)&&bf(p),!B(f))for(S=p.Da.g.parse(f),f=0;f<S.length;f++){let ke=S[f];if(p.T=ke[0],ke=ke[1],p.G==2)if(ke[0]=="c"){p.K=ke[1],p.ia=ke[2];let on=ke[3];on!=null&&(p.la=on,p.j.info("VER="+p.la));let an=ke[4];an!=null&&(p.Aa=an,p.j.info("SVER="+p.Aa));let Oa=ke[5];Oa!=null&&typeof Oa=="number"&&0<Oa&&(_=1.5*Oa,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let mr=c.g;if(mr){let Tf=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tf){var P=_.h;P.g||Tf.indexOf("spdy")==-1&&Tf.indexOf("quic")==-1&&Tf.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Ev(P,P.h),P.h=null))}if(_.D){let Tv=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Tv&&(_.ya=Tv,nt(_.I,_.D,Tv))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var G=c;if(_.qa=QA(_,_.J?_.ia:null,_.W),G.K){bA(_.h,G);var $e=G,Wt=_.L;Wt&&($e.I=Wt),$e.B&&(yv($e),mf($e)),_.g=G}else qA(_);0<p.i.length&&Cf(p)}else ke[0]!="stop"&&ke[0]!="close"||wo(p,7);else p.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?wo(p,7):Cv(p):ke[0]!="noop"&&p.l&&p.l.ta(ke),p.v=0)}}du(4)}catch{}}var $U=class{constructor(c,f){this.g=c,this.map=f}};function EA(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function IA(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function CA(c){return c.h?1:c.g?c.g.size:0}function wv(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Ev(c,f){c.g?c.g.add(f):c.h=f}function bA(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}EA.prototype.cancel=function(){if(this.i=DA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function DA(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(let p of c.g.values())f=f.concat(p.D);return f}return C(c.i)}function HU(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],p=c.length,_=0;_<p;_++)f.push(c[_]);return f}f=[],p=0;for(_ in c)f[p++]=c[_];return f}function qU(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var p=0;p<c;p++)f.push(p);return f}f=[],p=0;for(let _ in c)f[p++]=_;return f}}}function TA(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var p=qU(c),_=HU(c),S=_.length,P=0;P<S;P++)f.call(void 0,_[P],p&&p[P],c)}var SA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zU(c,f){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var _=c[p].indexOf("="),S=null;if(0<=_){var P=c[p].substring(0,_);S=c[p].substring(_+1)}else P=c[p];f(P,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function vo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vo){this.h=c.h,_f(this,c.j),this.o=c.o,this.g=c.g,yf(this,c.s),this.l=c.l;var f=c.i,p=new _u;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),AA(this,p),this.m=c.m}else c&&(f=String(c).match(SA))?(this.h=!1,_f(this,f[1]||"",!0),this.o=gu(f[2]||""),this.g=gu(f[3]||"",!0),yf(this,f[4]),this.l=gu(f[5]||"",!0),AA(this,f[6]||"",!0),this.m=gu(f[7]||"")):(this.h=!1,this.i=new _u(null,this.h))}vo.prototype.toString=function(){var c=[],f=this.j;f&&c.push(mu(f,xA,!0),":");var p=this.g;return(p||f=="file")&&(c.push("//"),(f=this.o)&&c.push(mu(f,xA,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(mu(p,p.charAt(0)=="/"?KU:WU,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",mu(p,YU)),c.join("")};function Ii(c){return new vo(c)}function _f(c,f,p){c.j=p?gu(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function yf(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function AA(c,f,p){f instanceof _u?(c.i=f,ZU(c.i,c.h)):(p||(f=mu(f,QU)),c.i=new _u(f,c.h))}function nt(c,f,p){c.i.set(f,p)}function vf(c){return nt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function gu(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mu(c,f,p){return typeof c=="string"?(c=encodeURI(c).replace(f,GU),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function GU(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xA=/[#\/\?@]/g,WU=/[#\?:]/g,KU=/[#\?]/g,QU=/[#\?@]/g,YU=/#/g;function _u(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ss(c){c.g||(c.g=new Map,c.h=0,c.i&&zU(c.i,function(f,p){c.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=_u.prototype,n.add=function(c,f){ss(this),this.i=null,c=Pa(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(f),this.h+=1,this};function RA(c,f){ss(c),f=Pa(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function MA(c,f){return ss(c),f=Pa(c,f),c.g.has(f)}n.forEach=function(c,f){ss(this),this.g.forEach(function(p,_){p.forEach(function(S){c.call(f,S,_,this)},this)},this)},n.na=function(){ss(this);let c=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let _=0;_<f.length;_++){let S=c[_];for(let P=0;P<S.length;P++)p.push(f[_])}return p},n.V=function(c){ss(this);let f=[];if(typeof c=="string")MA(this,c)&&(f=f.concat(this.g.get(Pa(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)f=f.concat(c[p])}return f},n.set=function(c,f){return ss(this),this.i=null,c=Pa(this,c),MA(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},n.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function NA(c,f,p){RA(c,f),0<p.length&&(c.i=null,c.g.set(Pa(c,f),C(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var _=f[p];let P=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var S=P;G[_]!==""&&(S+="="+encodeURIComponent(String(G[_]))),c.push(S)}}return this.i=c.join("&")};function Pa(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function ZU(c,f){f&&!c.j&&(ss(c),c.i=null,c.g.forEach(function(p,_){var S=_.toLowerCase();_!=S&&(RA(this,_),NA(this,S,p))},c)),c.j=f}function XU(c,f){let p=new fu;if(a.Image){let _=new Image;_.onload=m(os,p,"TestLoadImage: loaded",!0,f,_),_.onerror=m(os,p,"TestLoadImage: error",!1,f,_),_.onabort=m(os,p,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(os,p,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function JU(c,f){let p=new fu,_=new AbortController,S=setTimeout(()=>{_.abort(),os(p,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(P=>{clearTimeout(S),P.ok?os(p,"TestPingServer: ok",!0,f):os(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(S),os(p,"TestPingServer: error",!1,f)})}function os(c,f,p,_,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),_(p)}catch{}}function eB(){this.g=new FU}function tB(c,f,p){let _=p||"";try{TA(c,function(S,P){let G=S;u(S)&&(G=dv(S)),f.push(_+P+"="+encodeURIComponent(G))})}catch(S){throw f.push(_+"type="+encodeURIComponent("_badmap")),S}}function yu(c){this.l=c.Ub||null,this.j=c.eb||!1}y(yu,hv),yu.prototype.g=function(){return new wf(this.l,this.j)},yu.prototype.i=function(c){return function(){return c}}({});function wf(c,f){sn.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(wf,sn),n=wf.prototype,n.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,wu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wu(this)),this.g&&(this.readyState=3,wu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PA(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function PA(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?vu(this):wu(this),this.readyState==3&&PA(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,vu(this))},n.Qa=function(c){this.g&&(this.response=c,vu(this))},n.ga=function(){this.g&&vu(this)};function vu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wu(c)}n.setRequestHeader=function(c,f){this.u.append(c,f)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=f.next();return c.join(`\r
`)};function wu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function kA(c){let f="";return J(c,function(p,_){f+=_,f+=":",f+=p,f+=`\r
`}),f}function Iv(c,f,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=kA(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):nt(c,f,p))}function mt(c){sn.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(mt,sn);var nB=/^https?$/i,rB=["POST","PUT"];n=mt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,f,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gv.g(),this.v=this.o?cA(this.o):cA(gv),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(P){OA(this,P);return}if(c=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var S in _)p.set(S,_[S]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let P of _.keys())p.set(P,_.get(P));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(P=>P.toLowerCase()=="content-type"),S=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rB,f,void 0))||_||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,G]of p)this.g.setRequestHeader(P,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{VA(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){OA(this,P)}};function OA(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,FA(c),Ef(c)}function FA(c){c.A||(c.A=!0,hn(c,"complete"),hn(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,hn(this,"complete"),hn(this,"abort"),Ef(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ef(this,!0)),mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?LA(this):this.bb())},n.bb=function(){LA(this)};function LA(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ci(c)!=4||c.Z()!=2)){if(c.u&&Ci(c)==4)sA(c.Ea,0,c);else if(hn(c,"readystatechange"),Ci(c)==4){c.h=!1;try{let G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var _;if(_=G===0){var S=String(c.D).match(SA)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),_=!nB.test(S?S.toLowerCase():"")}p=_}if(p)hn(c,"complete"),hn(c,"success");else{c.m=6;try{var P=2<Ci(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",FA(c)}}finally{Ef(c)}}}}function Ef(c,f){if(c.g){VA(c);let p=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||hn(c,"ready");try{p.onreadystatechange=_}catch{}}}function VA(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Ci(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),OU(f)}};function jA(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function iB(c){let f={};c=(c.g&&2<=Ci(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(B(c[_]))continue;var p=T(c[_]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let P=f[S]||[];f[S]=P,P.push(p)}I(f,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eu(c,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||f}function UA(c){this.Aa=0,this.i=[],this.j=new fu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eu("baseRetryDelayMs",5e3,c),this.cb=Eu("retryDelaySeedMs",1e4,c),this.Wa=Eu("forwardChannelMaxRetries",2,c),this.wa=Eu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new EA(c&&c.concurrentRequestLimit),this.Da=new eB,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=UA.prototype,n.la=8,n.G=1,n.connect=function(c,f,p,_){fn(0),this.W=c,this.H=f||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=QA(this,null,this.W),Cf(this)};function Cv(c){if(BA(c),c.G==3){var f=c.U++,p=Ii(c.I);if(nt(p,"SID",c.K),nt(p,"RID",f),nt(p,"TYPE","terminate"),Iu(c,p),f=new is(c,c.j,f),f.L=2,f.v=vf(Ii(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=YA(f.j,null),f.g.ea(f.v)),f.F=Date.now(),mf(f)}KA(c)}function If(c){c.g&&(Dv(c),c.g.cancel(),c.g=null)}function BA(c){If(c),c.u&&(a.clearTimeout(c.u),c.u=null),bf(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cf(c){if(!IA(c.h)&&!c.s){c.s=!0;var f=c.Ga;su||JS(),ou||(su(),ou=!0),nv.add(f,c),c.B=0}}function sB(c,f){return CA(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=hu(g(c.Ga,c,f),WA(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let S=new is(this,this.j,c),P=this.o;if(this.S&&(P?(P=v(P),D(P,this.S)):P=this.S),this.m!==null||this.O||(S.H=P,P=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=HA(this,S,f),p=Ii(this.I),nt(p,"RID",c),nt(p,"CVER",22),this.D&&nt(p,"X-HTTP-Session-Id",this.D),Iu(this,p),P&&(this.O?f="headers="+encodeURIComponent(String(kA(P)))+"&"+f:this.m&&Iv(p,this.m,P)),Ev(this.h,S),this.Ua&&nt(p,"TYPE","init"),this.P?(nt(p,"$req",f),nt(p,"SID","null"),S.T=!0,_v(S,p,null)):_v(S,p,f),this.G=2}}else this.G==3&&(c?$A(this,c):this.i.length==0||IA(this.h)||$A(this))};function $A(c,f){var p;f?p=f.l:p=c.U++;let _=Ii(c.I);nt(_,"SID",c.K),nt(_,"RID",p),nt(_,"AID",c.T),Iu(c,_),c.m&&c.o&&Iv(_,c.m,c.o),p=new is(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),f&&(c.i=f.D.concat(c.i)),f=HA(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ev(c.h,p),_v(p,_,f)}function Iu(c,f){c.H&&J(c.H,function(p,_){nt(f,_,p)}),c.l&&TA({},function(p,_){nt(f,_,p)})}function HA(c,f,p){p=Math.min(c.i.length,p);var _=c.l?g(c.l.Na,c.l,c):null;e:{var S=c.i;let P=-1;for(;;){let G=["count="+p];P==-1?0<p?(P=S[0].g,G.push("ofs="+P)):P=0:G.push("ofs="+P);let $e=!0;for(let Wt=0;Wt<p;Wt++){let ke=S[Wt].g,on=S[Wt].map;if(ke-=P,0>ke)P=Math.max(0,S[Wt].g-100),$e=!1;else try{tB(on,G,"req"+ke+"_")}catch{_&&_(on)}}if($e){_=G.join("&");break e}}}return c=c.i.splice(0,p),f.D=c,_}function qA(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;su||JS(),ou||(su(),ou=!0),nv.add(f,c),c.v=0}}function bv(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=hu(g(c.Fa,c),WA(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,zA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=hu(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),If(this),zA(this))};function Dv(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function zA(c){c.g=new is(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Ii(c.qa);nt(f,"RID","rpc"),nt(f,"SID",c.K),nt(f,"AID",c.T),nt(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&nt(f,"TO",c.ja),nt(f,"TYPE","xmlhttp"),Iu(c,f),c.m&&c.o&&Iv(f,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=vf(Ii(f)),p.m=null,p.P=!0,yA(p,c)}n.Za=function(){this.C!=null&&(this.C=null,If(this),bv(this),fn(19))};function bf(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function GA(c,f){var p=null;if(c.g==f){bf(c),Dv(c),c.g=null;var _=2}else if(wv(c.h,f))p=f.D,bA(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var S=c.B;_=ff(),hn(_,new pA(_,p)),Cf(c)}else qA(c);else if(S=f.s,S==3||S==0&&0<f.X||!(_==1&&sB(c,f)||_==2&&bv(c)))switch(p&&0<p.length&&(f=c.h,f.i=f.i.concat(p)),S){case 1:wo(c,5);break;case 4:wo(c,10);break;case 3:wo(c,6);break;default:wo(c,2)}}}function WA(c,f){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*f}function wo(c,f){if(c.j.info("Error code "+f),f==2){var p=g(c.fb,c),_=c.Xa;let S=!_;_=new vo(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_f(_,"https"),vf(_),S?XU(_.toString(),p):JU(_.toString(),p)}else fn(2);c.G=0,c.l&&c.l.sa(f),KA(c),BA(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function KA(c){if(c.G=0,c.ka=[],c.l){let f=DA(c.h);(f.length!=0||c.i.length!=0)&&(b(c.ka,f),b(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function QA(c,f,p){var _=p instanceof vo?Ii(p):new vo(p);if(_.g!="")f&&(_.g=f+"."+_.g),yf(_,_.s);else{var S=a.location;_=S.protocol,f=f?f+"."+S.hostname:S.hostname,S=+S.port;var P=new vo(null);_&&_f(P,_),f&&(P.g=f),S&&yf(P,S),p&&(P.l=p),_=P}return p=c.D,f=c.ya,p&&f&&nt(_,p,f),nt(_,"VER",c.la),Iu(c,_),_}function YA(c,f,p){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new mt(new yu({eb:p})):new mt(c.pa),f.Ha(c.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZA(){}n=ZA.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Df(){}Df.prototype.g=function(c,f){return new Vn(c,f)};function Vn(c,f){sn.call(this),this.g=new UA(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!B(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!B(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new ka(this)}y(Vn,sn),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Cv(this.g)},Vn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=dv(c),c=p);f.i.push(new $U(f.Ya++,c)),f.G==3&&Cf(f)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Cv(this.g),delete this.g,Vn.aa.N.call(this)};function XA(c){fv.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(let p in f){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}y(XA,fv);function JA(){pv.call(this),this.status=1}y(JA,pv);function ka(c){this.g=c}y(ka,ZA),ka.prototype.ua=function(){hn(this.g,"a")},ka.prototype.ta=function(c){hn(this.g,new XA(c))},ka.prototype.sa=function(c){hn(this.g,new JA)},ka.prototype.ra=function(){hn(this.g,"b")},Df.prototype.createWebChannel=Df.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,BI=zi.createWebChannelTransport=function(){return new Df},UI=zi.getStatEventTarget=function(){return ff()},jI=zi.Event=_o,Mm=zi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pf.NO_ERROR=0,pf.TIMEOUT=8,pf.HTTP_ERROR=6,Vd=zi.ErrorCode=pf,gA.COMPLETE="complete",VI=zi.EventType=gA,uA.EventType=uu,uu.OPEN="a",uu.CLOSE="b",uu.ERROR="c",uu.MESSAGE="d",sn.prototype.listen=sn.prototype.K,Gl=zi.WebChannel=uA,Y5=zi.FetchXmlHttpFactory=yu,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,LI=zi.XhrIo=mt}).apply(typeof Rm<"u"?Rm:typeof self<"u"?self:typeof window<"u"?window:{});var Ok="@firebase/firestore";var kt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");var Cc="10.14.0";var Ws=new ls("@firebase/firestore");function Zl(){return Ws.logLevel}function jO(n){Ws.setLogLevel(n)}function U(n,...e){if(Ws.logLevel<=Jn.DEBUG){let t=e.map(Gb);Ws.debug(`Firestore (${Cc}): ${n}`,...t)}}function Ct(n,...e){if(Ws.logLevel<=Jn.ERROR){let t=e.map(Gb);Ws.error(`Firestore (${Cc}): ${n}`,...t)}}function xr(n,...e){if(Ws.logLevel<=Jn.WARN){let t=e.map(Gb);Ws.warn(`Firestore (${Cc}): ${n}`,...t)}}function Gb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n="Unexpected state"){let e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+n;throw Ct(e),new Error(e)}function ne(n,e){n||Z()}function UO(n,e){n||Z()}function Q(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Rf{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Vt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},WI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kt.UNAUTHENTICATED))}shutdown(){}},KI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},QI=class{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ne(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new Vt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>N(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new Bm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new kt(e)}},YI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ZI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new YI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},XI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},JI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ne(this.o===void 0);let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ne(typeof t.token=="string"),this.R=t.token,new XI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Z5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var $m=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Z5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function oc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function BO(n){return n+"\0"}var ht=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ht(0,0))}static max(){return new n(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(),r===void 0?r=e.length-t:r>e.length-t&&Z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Me=class n extends Hm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},X5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bt=class n extends Hm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return X5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new j(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(Me.fromString(e))}static fromName(e){return new n(Me.fromString(e).popFirst(5))}static empty(){return new n(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Me(e.slice()))}};var ac=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function eC(n){return n.fields.find(e=>e.kind===2)}function Yo(n){return n.fields.filter(e=>e.kind!==2)}ac.UNKNOWN_ID=-1;var rc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Yd=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,dr.min())}};function $O(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new dr(i,Y.empty(),e)}function HO(n){return new dr(n.readTime,n.key,-1)}var dr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Y.empty(),-1)}static max(){return new n(ae.max(),Y.empty(),-1)}};function Wb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var qO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ro(n){return N(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==qO)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let u=l;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var zm=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new na(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Kb(r.target.error);this.V.reject(new na(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new na(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new nC(t)}},Ks=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Cu())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),Zo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xf())return!1;if(n.v())return!0;let e=Cu(),t=n.S(e),r=0<t&&t<10,i=zO(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new na(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new j(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new na(e,o))},i.onupgradeneeded=s=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=zm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,u=l.name!=="FirebaseError"&&o<3;if(U("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function zO(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var tC=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zo(this.B.delete())}},na=class extends j{constructor(e,t){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function io(n){return n.name==="IndexedDbTransactionError"}var nC=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(U("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zo(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),Zo(this.store.add(e))}get(e){return Zo(this.store.get(e)).next(t=>(t===void 0&&(t=null),U("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),Zo(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),Zo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){U("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=s=>{let o=Kb(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let l=new tC(a),u=t(a.primaryKey,a.value,l);if(u instanceof M){let d=u.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Zo(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Kb(r.target.error);t(i)}})}var Fk=!1;function Kb(n){let e=Ks.S(Cu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fk||(Fk=!0,setTimeout(()=>{throw r},0)),r}}return n}var rC=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){U("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{U("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){io(t)?U("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ro(t)}yield this.X(6e4)}))}},iC=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return U("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(U("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=HO(s);Wb(o,r)>0&&(r=o)}),new dr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _h(n){return n==null}function Zd(n){return n===0&&1/n==-1/0}function GO(n){return typeof n=="number"&&Number.isInteger(n)&&!Zd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function In(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lk(e)),e=J5(n.get(t),e);return Lk(e)}function J5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Lk(n){return n+""}function ii(n){let e=n.length;if(ne(e>=2),e===2)return ne(n.charAt(0)===""&&n.charAt(1)===""),Me.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&Z(),n.charAt(o+1)){case"":let a=n.substring(s,o),l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Z()}s=o+2}return new Me(r)}var Vk=["userId","batchId"];function Fm(n,e){return[n,In(e)]}function WO(n,e,t){return[n,In(e),t]}var e8={},t8=["prefixPath","collectionGroup","readTime","documentId"],n8=["prefixPath","collectionGroup","documentId"],r8=["collectionGroup","readTime","prefixPath","documentId"],i8=["canonicalId","targetId"],s8=["targetId","path"],o8=["path","targetId"],a8=["collectionId","parent"],l8=["indexId","uid"],c8=["uid","sequenceNumber"],u8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],d8=["indexId","uid","orderedDocumentKey"],h8=["userId","collectionPath","documentId"],f8=["userId","collectionPath","largestBatchId"],p8=["userId","collectionGroup","largestBatchId"],KO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],g8=[...KO,"documentOverlays"],QO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YO=QO,Qb=[...YO,"indexConfiguration","indexState","indexEntries"],m8=Qb,_8=[...Qb,"globals"];var Xd=class extends qm{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function jt(n,e){let t=Q(n);return Ks.F(t._e,e)}function jk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var rt=class n{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nc(this.root,e,this.comparator,!0)}},nc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},oi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1;oi.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,t,r,i,s){return this}insert(e,t,r){return new oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class n{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gm(this.data.getIterator())}getIteratorFrom(e){return new Gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Wl(n){return n.hasNext()?n.getNext():void 0}var Gn=class n{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qe(bt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function XO(){return typeof atob<"u"}var Tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wm("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tt.EMPTY_BYTE_STRING=new Tt("");var y8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(n){if(ne(!!n),typeof n=="string"){let e=0,t=y8.exec(n);if(ne(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qs(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}function V_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Yb(n){let e=n.mapValue.fields.__previous_value__;return V_(e)?Yb(e):e}function Jd(n){let e=Ki(n.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}var sC=class{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},Ys=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lm={nullValue:"NULL_VALUE"};function ra(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?V_(n)?4:JO(n)?9007199254740991:j_(n)?10:11:Z()}function ci(n,e){if(n===e)return!0;let t=ra(n);if(t!==ra(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jd(n).isEqual(Jd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ki(i.timestampValue),a=Ki(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Qs(i.bytesValue).isEqual(Qs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?Zd(o)===Zd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return oc(n.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(jk(o)!==jk(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ci(o[l],a[l])))return!1;return!0}(n,e);default:return Z()}}function eh(n,e){return(n.values||[]).find(t=>ci(t,e))!==void 0}function Zs(n,e){if(n===e)return 0;let t=ra(n),r=ra(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ot(s.integerValue||s.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Uk(n.timestampValue,e.timestampValue);case 4:return Uk(Jd(n),Jd(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Qs(s),l=Qs(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){let d=ge(a[u],l[u]);if(d!==0)return d}return ge(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(ot(s.latitude),ot(o.latitude));return a!==0?a:ge(ot(s.longitude),ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Bk(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;let h=s.fields||{},g=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=g.value)===null||l===void 0?void 0:l.arrayValue,C=ge(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=y?.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:Bk(m,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===zs.mapValue&&o===zs.mapValue)return 0;if(s===zs.mapValue)return 1;if(o===zs.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){let g=ge(l[h],d[h]);if(g!==0)return g;let m=Zs(a[l[h]],u[d[h]]);if(m!==0)return m}return ge(l.length,d.length)}(n.mapValue,e.mapValue);default:throw Z()}}function Uk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=Ki(n),r=Ki(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function Bk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Zs(t[i],r[i]);if(s)return s}return ge(t.length,r.length)}function lc(n){return oC(n)}function oC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ki(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Y.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=oC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${oC(t.fields[o])}`;return i+"}"}(n.mapValue):Z()}function ia(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aC(n){return!!n&&"integerValue"in n}function th(n){return!!n&&"arrayValue"in n}function $k(n){return!!n&&"nullValue"in n}function Hk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vm(n){return!!n&&"mapValue"in n}function j_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function zd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var eF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function v8(n){return"nullValue"in n?Lm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ia(Ys.empty(),Y.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?j_(n)?eF:{mapValue:{}}:Z()}function w8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ia(Ys.empty(),Y.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?eF:"mapValue"in n?j_(n)?{mapValue:{}}:zs:Z()}function qk(n,e){let t=Zs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zk(n,e){let t=Zs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var cn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zd(t)}setAll(e){let t=bt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=zd(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pa(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(zd(this.value))}};function tF(n){let e=[];return pa(n.fields,(t,r)=>{let i=new bt([t]);if(Vm(r)){let s=tF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Gn(e)}var Ot=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),cn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ui=class{constructor(e,t){this.position=e,this.inclusive=t}};function Gk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),t.key):r=Zs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ci(n.position[t],e.position[t]))return!1;return!0}var sa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function E8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Km=class{},xe=class n extends Km{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uC(e,t,r):t==="array-contains"?new fC(e,r):t==="in"?new Qm(e,r):t==="not-in"?new pC(e,r):t==="array-contains-any"?new gC(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dC(e,r):new hC(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Zs(t,this.value)):t!==null&&ra(this.value)===ra(t)&&this.matchesComparison(Zs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Be=class n extends Km{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return cc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function cc(n){return n.op==="and"}function lC(n){return n.op==="or"}function Zb(n){return nF(n)&&cc(n)}function nF(n){for(let e of n.filters)if(e instanceof Be)return!1;return!0}function cC(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+lc(n.value);if(Zb(n))return n.filters.map(e=>cC(e)).join(",");{let e=n.filters.map(t=>cC(t)).join(",");return`${n.op}(${e})`}}function rF(n,e){return n instanceof xe?function(r,i){return i instanceof xe&&r.op===i.op&&r.field.isEqual(i.field)&&ci(r.value,i.value)}(n,e):n instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&rF(o,i.filters[a]),!0):!1}(n,e):void Z()}function iF(n,e){let t=n.filters.concat(e);return Be.create(t,n.op)}function sF(n){return n instanceof xe?function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`}(n):n instanceof Be?function(t){return t.op.toString()+" {"+t.getFilters().map(sF).join(" ,")+"}"}(n):"Filter"}var uC=class extends xe{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},dC=class extends xe{constructor(e,t){super(e,"in",t),this.keys=oF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},hC=class extends xe{constructor(e,t){super(e,"not-in",t),this.keys=oF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function oF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}var fC=class extends xe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return th(t)&&eh(t.arrayValue,this.value)}},Qm=class extends xe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&eh(this.value.arrayValue,t)}},pC=class extends xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!eh(this.value.arrayValue,t)}},gC=class extends xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!th(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>eh(this.value.arrayValue,r))}};var mC=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function _C(n,e=null,t=[],r=[],i=null,s=null,o=null){return new mC(n,e,t,r,i,s,o)}function oa(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lc(r)).join(",")),e.ue=t}return e.ue}function yh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!E8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wk(n.startAt,e.startAt)&&Wk(n.endAt,e.endAt)}function Ym(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zm(n,e){return n.filters.filter(t=>t instanceof xe&&t.field.isEqual(e))}function Kk(n,e,t){let r=Lm,i=!0;for(let s of Zm(n,e)){let o=Lm,a=!0;switch(s.op){case"<":case"<=":o=v8(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Lm}qk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];qk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function Qk(n,e,t){let r=zs,i=!0;for(let s of Zm(n,e)){let o=zs,a=!0;switch(s.op){case">=":case">":o=w8(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zs}zk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];zk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Rr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aF(n,e,t,r,i,s,o,a){return new Rr(n,e,t,r,i,s,o,a)}function bc(n){return new Rr(n)}function Yk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xb(n){return n.collectionGroup!==null}function ic(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(bt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new sa(s,r))}),t.has(bt.keyField().canonicalString())||e.ce.push(new sa(bt.keyField(),r))}return e.ce}function Cn(n){let e=Q(n);return e.le||(e.le=I8(e,ic(n))),e.le}function I8(n,e){if(n.limitType==="F")return _C(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new sa(i.field,s)});let t=n.endAt?new ui(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ui(n.startAt.position,n.startAt.inclusive):null;return _C(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yC(n,e){let t=n.filters.concat([e]);return new Rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xm(n,e,t){return new Rr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vh(n,e){return yh(Cn(n),Cn(e))&&n.limitType===e.limitType}function lF(n){return`${oa(Cn(n))}|lt:${n.limitType}`}function Xl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>sF(i)).join(", ")}]`),_h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>lc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>lc(i)).join(",")),`Target(${r})`}(Cn(n))}; limitType=${n.limitType})`}function wh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of ic(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){let u=Gk(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ic(r),i)||r.endAt&&!function(o,a,l){let u=Gk(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ic(r),i))}(n,e)}function cF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uF(n){return(e,t)=>{let r=!1;for(let i of ic(n)){let s=C8(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function C8(n,e,t){let r=n.field.isKeyField()?Y.comparator(e.key,t.key):function(s,o,a){let l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Zs(l,u):Z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var di=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return ZO(this.inner)}size(){return this.innerSize}};var b8=new rt(Y.comparator);function Ln(){return b8}var dF=new rt(Y.comparator);function Hd(...n){let e=dF;for(let t of n)e=e.insert(t.key,t);return e}function hF(n){let e=dF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function si(){return Gd()}function fF(){return Gd()}function Gd(){return new di(n=>n.toString(),(n,e)=>n.isEqual(e))}var D8=new rt(Y.comparator),T8=new Qe(Y.comparator);function _e(...n){let e=T8;for(let t of n)e=e.add(t);return e}var S8=new Qe(ge);function Jb(){return S8}function eD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zd(e)?"-0":e}}function pF(n){return{integerValue:""+n}}function gF(n,e){return GO(e)?pF(e):eD(n,e)}var uc=class{constructor(){this._=void 0}};function A8(n,e,t){return n instanceof Xs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&V_(s)&&(s=Yb(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Qi?_F(n,e):n instanceof Yi?yF(n,e):function(i,s){let o=mF(i,s),a=Zk(o)+Zk(i.Pe);return aC(o)&&aC(i.Pe)?pF(a):eD(i.serializer,a)}(n,e)}function x8(n,e,t){return n instanceof Qi?_F(n,e):n instanceof Yi?yF(n,e):t}function mF(n,e){return n instanceof Js?function(r){return aC(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Xs=class extends uc{},Qi=class extends uc{constructor(e){super(),this.elements=e}};function _F(n,e){let t=vF(e);for(let r of n.elements)t.some(i=>ci(i,r))||t.push(r);return{arrayValue:{values:t}}}var Yi=class extends uc{constructor(e){super(),this.elements=e}};function yF(n,e){let t=vF(e);for(let r of n.elements)t=t.filter(i=>!ci(i,r));return{arrayValue:{values:t}}}var Js=class extends uc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Zk(n){return ot(n.integerValue||n.doubleValue)}function vF(n){return th(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var aa=class{constructor(e,t){this.field=e,this.transform=t}};function R8(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Qi&&i instanceof Qi||r instanceof Yi&&i instanceof Yi?oc(r.elements,i.elements,ci):r instanceof Js&&i instanceof Js?ci(r.Pe,i.Pe):r instanceof Xs&&i instanceof Xs}(n.transform,e.transform)}var vC=class{constructor(e,t){this.version=e,this.transformResults=t}},wt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var dc=class{};function wF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new to(n.key,wt.none()):new eo(n.key,n.data,wt.none());{let t=n.data,r=cn.empty(),i=new Qe(bt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mr(n.key,r,new Gn(i.toArray()),wt.none())}}function M8(n,e,t){n instanceof eo?function(i,s,o){let a=i.value.clone(),l=Jk(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Mr?function(i,s,o){if(!jm(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Jk(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(EF(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Wd(n,e,t,r){return n instanceof eo?function(s,o,a,l){if(!jm(s.precondition,o))return a;let u=s.value.clone(),d=eO(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mr?function(s,o,a,l){if(!jm(s.precondition,o))return a;let u=eO(s.fieldTransforms,l,o),d=o.data;return d.setAll(EF(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return jm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function N8(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=mF(r.transform,i||null);s!=null&&(t===null&&(t=cn.empty()),t.set(r.field,s))}return t||null}function Xk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oc(r,i,(s,o)=>R8(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var eo=class extends dc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mr=class extends dc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function EF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Jk(n,e,t){let r=new Map;ne(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,x8(o,a,t[i]))}return r}function eO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,A8(s,o,e))}return r}var to=class extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nh=class extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&M8(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Wd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=fF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let l=wF(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&oc(this.mutations,e.mutations,(t,r)=>Xk(t,r))&&oc(this.baseMutations,e.baseMutations,(t,r)=>Xk(t,r))}},wC=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ne(e.mutations.length===r.length);let i=function(){return D8}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var ih=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var EC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Nt,Re;function IF(n){switch(n){default:return Z();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function CF(n){if(n===void 0)return Ct("GRPC error has no .code"),k.UNKNOWN;switch(n){case Nt.OK:return k.OK;case Nt.CANCELLED:return k.CANCELLED;case Nt.UNKNOWN:return k.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return k.INTERNAL;case Nt.UNAVAILABLE:return k.UNAVAILABLE;case Nt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Nt.NOT_FOUND:return k.NOT_FOUND;case Nt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Nt.ABORTED:return k.ABORTED;case Nt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Nt.DATA_LOSS:return k.DATA_LOSS;default:return Z()}}(Re=Nt||(Nt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";var tO=null;function bF(){return new TextEncoder}var P8=new Us([4294967295,4294967295],0);function nO(n){let e=bF().encode(n),t=new FI;return t.update(e),new Uint8Array(t.digest())}function rO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Us([t,r],0),new Us([i,s],0)]}var IC=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ta(`Invalid padding: ${t}`);if(r<0)throw new ta(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ta(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Us.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Us.fromNumber(r)));return i.compare(P8)===1&&(i=new Us([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=nO(e),[r,i]=rO(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=nO(e),[r,i]=rO(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ta=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new rt(ge),Ln(),_e())}},oh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var sc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Jm=class{constructor(e,t){this.targetId=e,this.me=t}},e_=class{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},t_=class{constructor(){this.fe=0,this.ge=sO(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),t=_e(),r=_e();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new oh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=sO()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},CC=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ln(),this.qe=iO(),this.Qe=new rt(ge)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Ym(s))if(r===0){let o=new Y(s.path);this.Ue(t,o,Ot.newNoDocument(o,ae.min()))}else ne(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}tO?.et(function(d,h,g,m,y){var C,b,V,B,O,z;let oe={localCacheCount:d,existenceFilterCount:h.count,databaseId:g.database,projectId:g.projectId},J=h.unchangedNames;return J&&(oe.bloomFilter={applied:y===0,hashCount:(C=J?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(B=(V=(b=J?.bits)===null||b===void 0?void 0:b.bitmap)===null||V===void 0?void 0:V.length)!==null&&B!==void 0?B:0,padding:(z=(O=J?.bits)===null||O===void 0?void 0:O.padding)!==null&&z!==void 0?z:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),oe}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Qs(r).toUint8Array()}catch(l){if(l instanceof Wm)return xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new IC(o,i,s)}catch(l){return xr(l instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Ym(a.target)){let l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ot.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=_e();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new sh(e,t,this.Qe,this.ke,r);return this.ke=Ln(),this.qe=iO(),this.Qe=new rt(ge),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new t_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qe(ge),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function iO(){return new rt(Y.comparator)}function sO(){return new rt(Y.comparator)}var k8={asc:"ASCENDING",desc:"DESCENDING"},O8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F8={and:"AND",or:"OR"},bC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function DC(n,e){return n.useProto3Json||_h(e)?e:{value:e}}function hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function L8(n,e){return hc(n,e.toTimestamp())}function Dt(n){return ne(!!n),ae.fromTimestamp(function(t){let r=Ki(t);return new ht(r.seconds,r.nanos)}(n))}function tD(n,e){return TC(n,e).canonicalString()}function TC(n,e){let t=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TF(n){let e=Me.fromString(n);return ne(FF(e)),e}function ah(n,e){return tD(n.databaseId,e.path)}function ai(n,e){let t=TF(e);if(t.get(1)!==n.databaseId.projectId)throw new j(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(xF(t))}function SF(n,e){return tD(n.databaseId,e)}function AF(n){let e=TF(n);return e.length===4?Me.emptyPath():xF(e)}function SC(n){return new Me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xF(n){return ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function oO(n,e,t){return{name:ah(n,e),fields:t.value.mapValue.fields}}function RF(n,e,t){let r=ai(n,e.name),i=Dt(e.updateTime),s=e.createTime?Dt(e.createTime):ae.min(),o=new cn({mapValue:{fields:e.fields}}),a=Ot.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function V8(n,e){return"found"in e?function(r,i){ne(!!i.found),i.found.name,i.found.updateTime;let s=ai(r,i.found.name),o=Dt(i.found.updateTime),a=i.found.createTime?Dt(i.found.createTime):ae.min(),l=new cn({mapValue:{fields:i.found.fields}});return Ot.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){ne(!!i.missing),ne(!!i.readTime);let s=ai(r,i.missing),o=Dt(i.readTime);return Ot.newNoDocument(s,o)}(n,e):Z()}function j8(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ne(d===void 0||typeof d=="string"),Tt.fromBase64String(d||"")):(ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Tt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let d=u.code===void 0?k.UNKNOWN:CF(u.code);return new j(d,u.message||"")}(o);t=new e_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ai(n,r.document.name),s=Dt(r.document.updateTime),o=r.document.createTime?Dt(r.document.createTime):ae.min(),a=new cn({mapValue:{fields:r.document.fields}}),l=Ot.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new sc(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ai(n,r.document),s=r.readTime?Dt(r.readTime):ae.min(),o=Ot.newNoDocument(i,s),a=r.removedTargetIds||[];t=new sc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ai(n,r.document),s=r.removedTargetIds||[];t=new sc([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new EC(i,s),a=r.targetId;t=new Jm(a,o)}}return t}function lh(n,e){let t;if(e instanceof eo)t={update:oO(n,e.key,e.value)};else if(e instanceof to)t={delete:ah(n,e.key)};else if(e instanceof Mr)t={update:oO(n,e.key,e.data),updateMask:z8(e.fieldMask)};else{if(!(e instanceof nh))return Z();t={verify:ah(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Js)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:L8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(n,e.precondition)),t}function AC(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?wt.updateTime(Dt(s.updateTime)):s.exists!==void 0?wt.exists(s.exists):wt.none()}(e.currentDocument):wt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),l=new Xs;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new Qi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new Yi(d)}else"increment"in a?l=new Js(o,a.increment):Z();let u=bt.fromServerFormat(a.fieldPath);return new aa(u,l)}(n,i)):[];if(e.update){e.update.name;let i=ai(n,e.update.name),s=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let u=l.fieldPaths||[];return new Gn(u.map(d=>bt.fromServerFormat(d)))}(e.updateMask);return new Mr(i,s,o,t,r)}return new eo(i,s,t,r)}if(e.delete){let i=ai(n,e.delete);return new to(i,t)}if(e.verify){let i=ai(n,e.verify);return new nh(i,t)}return Z()}function U8(n,e){return n&&n.length>0?(ne(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Dt(i.updateTime):Dt(s);return o.isEqual(ae.min())&&(o=Dt(s)),new vC(o,i.transformResults||[])}(t,e))):[]}function MF(n,e){return{documents:[SF(n,e.path)]}}function NF(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SF(n,i);let s=function(u){if(u.length!==0)return OF(Be.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Jl(g.field),direction:$8(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=DC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function PF(n){let e=AF(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ne(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let g=kF(h);return g instanceof Be&&Zb(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(g=>function(y){return new sa(ec(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(h){let g;return g=typeof h=="object"?h.value:h,_h(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(h){let g=!!h.before,m=h.values||[];return new ui(m,g)}(t.startAt));let u=null;return t.endAt&&(u=function(h){let g=!h.before,m=h.values||[];return new ui(m,g)}(t.endAt)),aF(e,i,o,s,a,"F",l,u)}function B8(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kF(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ec(t.unaryFilter.field);return xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ec(t.unaryFilter.field);return xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ec(t.unaryFilter.field);return xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ec(t.unaryFilter.field);return xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(n):n.fieldFilter!==void 0?function(t){return xe.create(ec(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Be.create(t.compositeFilter.filters.map(r=>kF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(t.compositeFilter.op))}(n):Z()}function $8(n){return k8[n]}function H8(n){return O8[n]}function q8(n){return F8[n]}function Jl(n){return{fieldPath:n.canonicalString()}}function ec(n){return bt.fromServerFormat(n.fieldPath)}function OF(n){return n instanceof xe?function(t){if(t.op==="=="){if(Hk(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NAN"}};if($k(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hk(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NAN"}};if($k(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(t.field),op:H8(t.op),value:t.value}}}(n):n instanceof Be?function(t){let r=t.getFilters().map(i=>OF(i));return r.length===1?r[0]:{compositeFilter:{op:q8(t.op),filters:r}}}(n):Z()}function z8(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var fc=class n{constructor(e,t,r,i,s=ae.min(),o=ae.min(),a=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var n_=class{constructor(e){this.ct=e}};function G8(n,e){let t;if(e.document)t=RF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Y.fromSegments(e.noDocument.path),i=ca(e.noDocument.readTime);t=Ot.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z();{let r=Y.fromSegments(e.unknownDocument.path),i=ca(e.unknownDocument.version);t=Ot.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new ht(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),t}function aO(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:r_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ah(s,o.key),fields:o.data.value.mapValue.fields,updateTime:hc(s,o.version.toTimestamp()),createTime:hc(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:la(e.version)};else{if(!e.isUnknownDocument())return Z();r.unknownDocument={path:t.path.toArray(),version:la(e.version)}}return r}function r_(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function la(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ca(n){let e=new ht(n.seconds,n.nanoseconds);return ae.fromTimestamp(e)}function Xo(n,e){let t=(e.baseMutations||[]).map(s=>AC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>AC(n.ct,s)),i=ht.fromMillis(e.localWriteTimeMs);return new rh(e.batchId,i,t,r)}function qd(n){let e=ca(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ca(n.lastLimboFreeSnapshotVersion):ae.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return ne(s.documents.length===1),Cn(bc(AF(s.documents[0])))}(n.query):function(s){return Cn(PF(s))}(n.query),new fc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tt.fromBase64String(n.resumeToken))}function LF(n,e){let t=la(e.snapshotVersion),r=la(e.lastLimboFreeSnapshotVersion),i;i=Ym(e.target)?MF(n.ct,e.target):NF(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oa(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nD(n){let e=PF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xm(e,e.limit,"L"):e}function $I(n,e){return new ih(e.largestBatchId,AC(n.ct,e.overlayMutation))}function lO(n,e){let t=e.path.lastSegment();return[n,In(e.path.popLast()),t]}function cO(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:la(r.readTime),documentKey:In(r.documentKey.path),largestBatchId:r.largestBatchId}}var xC=class{getBundleMetadata(e,t){return uO(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ca(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return uO(e).put(function(i){return{bundleId:i.id,createTime:la(Dt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return dO(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:nD(s.bundledQuery),readTime:ca(s.readTime)}}(r)})}saveNamedQuery(e,t){return dO(e).put(function(i){return{name:i.name,readTime:la(Dt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function uO(n){return jt(n,"bundles")}function dO(n){return jt(n,"namedQueries")}var i_=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return jd(e).get(lO(this.userId,t)).next(r=>r?$I(this.serializer,r):null)}getOverlays(e,t){let r=si();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new ih(t,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(In(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(jd(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,t,r){let i=si(),s=In(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return jd(e).U("collectionPathOverlayIndex",o).next(a=>{for(let l of a){let u=$I(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=si(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jd(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{let h=$I(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return jd(e).put(function(i,s,o){let[a,l,u]=lO(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:lh(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function jd(n){return jt(n,"documentOverlays")}var RC=class{Pt(e){return jt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Gi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ot(e.integerValue));else if("doubleValue"in e){let r=ot(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Zd(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ki(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Qs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?JO(e)?this.dt(t,Number.MAX_SAFE_INTEGER):j_(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ot(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Y.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Gi.vt=new Gi;function W8(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function hO(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=W8(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var MC=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=hO(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=hO(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},NC=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},PC=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Jo=class{constructor(){this.jt=new MC,this.Ht=new NC(this.jt),this.Jt=new PC(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ea=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Bs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=fO(n.arrayValue,e.arrayValue),t!==0?t:(t=fO(n.directionalValue,e.directionalValue),t!==0?t:Y.comparator(n.documentKey,e.documentKey)))}function fO(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var s_=class{constructor(e){this.Xt=new Qe((t,r)=>bt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;let t=eC(e);if(t!==void 0&&!this.sn(t))return!1;let r=Yo(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Qe(bt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new rc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new rc(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new rc(r.field,r.dir==="asc"?0:1)));return new ac(ac.UNKNOWN_ID,this.collectionId,t,Yd.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function VF(n){var e,t;if(ne(n instanceof xe||n instanceof Be),n instanceof xe){if(n instanceof Qm){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>xe.create(n.field,"==",s)))||[];return Be.create(i,"or")}return n}let r=n.filters.map(i=>VF(i));return Be.create(r,n.op)}function K8(n){if(n.getFilters().length===0)return[];let e=FC(VF(n));return ne(jF(e)),kC(e)||OC(e)?[e]:e.getFilters()}function kC(n){return n instanceof xe}function OC(n){return n instanceof Be&&Zb(n)}function jF(n){return kC(n)||OC(n)||function(t){if(t instanceof Be&&lC(t)){for(let r of t.getFilters())if(!kC(r)&&!OC(r))return!1;return!0}return!1}(n)}function FC(n){if(ne(n instanceof xe||n instanceof Be),n instanceof xe)return n;if(n.filters.length===1)return FC(n.filters[0]);let e=n.filters.map(r=>FC(r)),t=Be.create(e,n.op);return t=o_(t),jF(t)?t:(ne(t instanceof Be),ne(cc(t)),ne(t.filters.length>1),t.filters.reduce((r,i)=>rD(r,i)))}function rD(n,e){let t;return ne(n instanceof xe||n instanceof Be),ne(e instanceof xe||e instanceof Be),t=n instanceof xe?e instanceof xe?function(i,s){return Be.create([i,s],"and")}(n,e):pO(n,e):e instanceof xe?pO(e,n):function(i,s){if(ne(i.filters.length>0&&s.filters.length>0),cc(i)&&cc(s))return iF(i,s.getFilters());let o=lC(i)?i:s,a=lC(i)?s:i,l=o.filters.map(u=>rD(u,a));return Be.create(l,"or")}(n,e),o_(t)}function pO(n,e){if(cc(e))return iF(e,n.getFilters());{let t=e.filters.map(r=>rD(n,r));return Be.create(t,"or")}}function o_(n){if(ne(n instanceof xe||n instanceof Be),n instanceof xe)return n;let e=n.getFilters();if(e.length===1)return o_(e[0]);if(nF(n))return n;let t=e.map(i=>o_(i)),r=[];return t.forEach(i=>{i instanceof xe?r.push(i):i instanceof Be&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Be.create(r,n.op)}var LC=class{constructor(){this.un=new ch}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(dr.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},ch=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qe(Me.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(Me.comparator)).toArray()}};var Nm=new Uint8Array(0),VC=class{constructor(e,t){this.databaseId=t,this.cn=new ch,this.ln=new di(r=>oa(r),(r,i)=>yh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:In(i)};return gO(e).put(s)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[BO(t),""],!1,!0);return gO(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(ii(o.parent))}return r})}addFieldIndex(e,t){let r=Ud(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Ql(e);return s.next(a=>{o.put(cO(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Ud(e),i=Ql(e),s=Kl(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ud(e),r=Kl(e),i=Ql(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new s_(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Kl(e),i=!0,s=new Map;return M.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e(),a=[];return M.forEach(s,(l,u)=>{U("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(l)} to execute ${oa(t)}`);let d=function(O,z){let oe=eC(z);if(oe===void 0)return null;for(let J of Zm(O,oe.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(u,l),h=function(O,z){let oe=new Map;for(let J of Yo(z))for(let I of Zm(O,J.fieldPath))switch(I.op){case"==":case"in":oe.set(J.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return oe.set(J.fieldPath.canonicalString(),I.value),Array.from(oe.values())}return null}(u,l),g=function(O,z){let oe=[],J=!0;for(let I of Yo(z)){let v=I.kind===0?Kk(O,I.fieldPath,O.startAt):Qk(O,I.fieldPath,O.startAt);oe.push(v.value),J&&(J=v.inclusive)}return new ui(oe,J)}(u,l),m=function(O,z){let oe=[],J=!0;for(let I of Yo(z)){let v=I.kind===0?Qk(O,I.fieldPath,O.endAt):Kk(O,I.fieldPath,O.endAt);oe.push(v.value),J&&(J=v.inclusive)}return new ui(oe,J)}(u,l),y=this.In(l,u,g),C=this.In(l,u,m),b=this.Tn(l,u,h),V=this.En(l.indexId,d,y,g.inclusive,C,m.inclusive,b);return M.forEach(V,B=>r.G(B,t.limit).next(O=>{O.forEach(z=>{let oe=Y.fromSegments(z.documentKey);o.has(oe)||(o=o.add(oe),a.push(oe))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=K8(Be.create(e.filters,"and")).map(r=>_C(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){let g=t?this.dn(t[h/u]):Nm,m=this.An(e,g,r[h%u],i),y=this.Rn(e,g,s[h%u],o),C=a.map(b=>this.An(e,g,b,!0));d.push(...this.createRange(m,y,C))}return d}An(e,t,r,i){let s=new ea(e,Y.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new ea(e,Y.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new s_(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Qe(bt.comparator),d=!1;for(let h of l.filters)for(let g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:u=u.add(g.field));for(let h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Jo;for(let i of Yo(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Gi.vt.It(s,o)}return r.zt()}dn(e){let t=new Jo;return Gi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Jo;return Gi.vt.It(ia(this.databaseId,t),r.Yt(function(s){let o=Yo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Jo);let s=0;for(let o of Yo(e)){let a=r[s++];for(let l of i)if(this.fn(t,o.fieldPath)&&th(a))i=this.gn(i,o,a);else{let u=l.Yt(o.kind);Gi.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let l=new Jo;l.seed(a.zt()),Gi.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof xe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Ud(e),i=Ql(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){let g=h?new Yd(h.sequenceNumber,new dr(ca(h.readTime),new Y(ii(h.documentKey)),h.largestBatchId)):Yd.empty(),m=d.fields.map(([y,C])=>new rc(bt.fromServerFormat(y),C));return new ac(d.indexId,d.collectionGroup,m,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ge(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Ud(e),s=Ql(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,l=>s.put(cO(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.wn(e,i,l).next(u=>{let d=this.Sn(s,l);return u.isEqual(d)?M.resolve():this.bn(e,s,l,u,d)}))))})}Dn(e,t,r,i){return Kl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Kl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Kl(e),s=new Qe(Bs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new ea(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Qe(Bs),i=this.Vn(t,e);if(i==null)return r;let s=eC(t);if(s!=null){let o=e.data.field(s.fieldPath);if(th(o))for(let a of o.arrayValue.values||[])r=r.add(new ea(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ea(t.indexId,e.key,Nm,i));return r}bn(e,t,r,i,s){U("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(l,u,d,h,g){let m=l.getIterator(),y=u.getIterator(),C=Wl(m),b=Wl(y);for(;C||b;){let V=!1,B=!1;if(C&&b){let O=d(C,b);O<0?B=!0:O>0&&(V=!0)}else C!=null?B=!0:V=!0;V?(h(b),b=Wl(y)):B?(g(C),C=Wl(m)):(C=Wl(m),b=Wl(y))}}(i,s,Bs,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),M.waitFor(o)}yn(e){let t=1;return Ql(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Bs(o,a)).filter((o,a,l)=>!a||Bs(o,l[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Bs(o,e),l=Bs(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Nm,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Nm,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return Bs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mO)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Z())).next(mO)}};function gO(n){return jt(n,"collectionParents")}function Kl(n){return jt(n,"indexEntries")}function Ud(n){return jt(n,"indexConfiguration")}function Ql(n){return jt(n,"indexState")}function mO(n){ne(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Wb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new dr(e.readTime,e.documentKey,t)}var _O={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ur=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function UF(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,l=r.J({range:o},(d,h,g)=>(a++,g.delete()));s.push(l.next(()=>{ne(a===1)}));let u=[];for(let d of t.mutations){let h=WO(e,d.key.path,t.batchId);s.push(i.delete(h)),u.push(d.key)}return M.waitFor(s).next(()=>u)}function a_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Z();e=n.noDocument}return JSON.stringify(e).length}ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(41943040,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);var l_=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ne(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $s(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=tc(e),o=$s(e);return o.add({}).next(a=>{ne(typeof a=="number");let l=new rh(a,t,r,i),u=function(m,y,C){let b=C.baseMutations.map(B=>lh(m.ct,B)),V=C.mutations.map(B=>lh(m.ct,B));return{userId:y,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:b,mutations:V}}(this.serializer,this.userId,l),d=[],h=new Qe((g,m)=>ge(g.canonicalString(),m.canonicalString()));for(let g of i){let m=WO(this.userId,g.key.path,a);h=h.add(g.key.path.popLast()),d.push(o.put(u)),d.push(s.put(m,e8))}return h.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return $s(e).get(t).next(r=>r?(ne(r.userId===this.userId),Xo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return $s(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=r),s=Xo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $s(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $s(e).U("userMutationsIndex",t).next(r=>r.map(i=>Xo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Fm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return tc(e).J({range:i},(o,a,l)=>{let[u,d,h]=o,g=ii(d);if(u===this.userId&&t.path.isEqual(g))return $s(e).get(h).next(m=>{if(!m)throw Z();ne(m.userId===this.userId),s.push(Xo(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(ge),i=[];return t.forEach(s=>{let o=Fm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=tc(e).J({range:a},(u,d,h)=>{let[g,m,y]=u,C=ii(m);g===this.userId&&s.path.isEqual(C)?r=r.add(y):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Fm(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Qe(ge);return tc(e).J({range:o},(l,u,d)=>{let[h,g,m]=l,y=ii(g);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push($s(e).get(s).next(o=>{if(o===null)throw Z();ne(o.userId===this.userId),r.push(Xo(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return UF(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return tc(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let l=ii(s[1]);i.push(l)}else a.done()}).next(()=>{ne(i.length===0)})})}containsKey(e,t){return BF(e,this.userId,t)}Nn(e){return $F(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function BF(n,e,t){let r=Fm(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return tc(n).J({range:s,H:!0},(a,l,u)=>{let[d,h,g]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function $s(n){return jt(n,"mutations")}function tc(n){return jt(n,"documentMutations")}function $F(n){return jt(n,"mutationQueues")}var pc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var jC=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new pc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ae.fromTimestamp(new ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yl(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ne(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Yl(e).J((o,a)=>{let l=qd(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Yl(e).J((r,i)=>{let s=qd(i);t(s)})}qn(e){return yO(e).get("targetGlobalKey").next(t=>(ne(t!==null),t))}Qn(e,t){return yO(e).put("targetGlobalKey",t)}Kn(e,t){return Yl(e).put(LF(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=oa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Yl(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{let u=qd(a);yh(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Hs(e);return t.forEach(o=>{let a=In(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=Hs(e);return M.forEach(t,s=>{let o=In(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Hs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hs(e),s=_e();return i.J({range:r,H:!0},(o,a,l)=>{let u=ii(o[1]),d=new Y(u);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=In(t.path),i=IDBKeyRange.bound([r],[BO(r)],!1,!0),s=0;return Hs(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Yl(e).get(t).next(r=>r?qd(r):null)}};function Yl(n){return jt(n,"targets")}function yO(n){return jt(n,"targetGlobal")}function Hs(n){return jt(n,"targetDocuments")}function vO([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var UC=class{constructor(e){this.Un=e,this.buffer=new Qe(vO),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();vO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},BC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){io(t)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ro(t)}yield this.Hn(3e5)}))}},$C=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(zn.oe);let r=new UC(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(_O)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_O):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Zl()<=Jn.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function Q8(n,e){return new $C(n,e)}var HC=class{constructor(e,t){this.db=e,this.garbageCollector=Q8(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Pm(e,r)}removeReference(e,t,r){return Pm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pm(e,t)}nr(e,t){return function(i,s){let o=!1;return $F(i).Y(a=>BF(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Hs(e).delete(function(h){return[0,In(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pm(e,t)}tr(e,t){let r=Hs(e),i,s=zn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==zn.oe&&t(new Y(ii(i)),s),s=u,i=l):s=zn.oe}).next(()=>{s!==zn.oe&&t(new Y(ii(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Pm(n,e){return Hs(n).put(function(r,i){return{targetId:0,path:In(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var c_=class{constructor(){this.changes=new di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qC=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qo(e).put(r)}removeEntry(e,t,r){return Qo(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],r_(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ot.newInvalidDocument(t);return Qo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Ot.newInvalidDocument(t)};return Qo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(t))},(i,s)=>{r={document:this.ir(t,s),size:a_(s)}}).next(()=>r)}getEntries(e,t){let r=Ln();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ln(),i=new rt(Y.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,a_(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new Qe(IO);t.forEach(l=>i=i.add(l));let s=IDBKeyRange.bound(Bd(i.first()),Bd(i.last())),o=i.getIterator(),a=o.getNext();return Qo(e).J({index:"documentKeyIndex",range:s},(l,u,d)=>{let h=Y.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&IO(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Bd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),r_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qo(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let d=Ln();for(let h of u){let g=this.ir(Y.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(wh(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Ln(),o=EO(t,r),a=EO(t,dr.max());return Qo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{let h=this.ir(Y.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new zC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wO(e).get("remoteDocumentGlobalKey").next(t=>(ne(!!t),t))}rr(e,t){return wO(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=G8(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Ot.newInvalidDocument(e)}};function HF(n){return new qC(n)}var zC=class extends c_{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new di(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Qe((s,o)=>ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let l=aO(this.cr.serializer,o);i=i.add(s.path.popLast());let u=a_(l);r+=u-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){let l=aO(this.cr.serializer,o.convertToNoDocument(ae.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function wO(n){return jt(n,"remoteDocumentGlobal")}function Qo(n){return jt(n,"remoteDocumentsV14")}function Bd(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function EO(n,e){let t=e.documentKey.path.toArray();return[n,r_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IO(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ge(t[s],r[s]),i)return i;return i=ge(t.length,r.length),i||(i=ge(t[t.length-2],r[r.length-2]),i||ge(t[t.length-1],r[r.length-1]))}var GC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var u_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Wd(r.mutation,i,Gn.empty(),ht.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=si();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Hd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=si();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ln(),o=Gd(),a=function(){return Gd()}();return t.forEach((l,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Mr)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Wd(d.mutation,u,d.mutation.getFieldMask(),ht.now())):o.set(u.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var h;return a.set(u,new GC(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Gd(),i=new rt((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let d=r.get(l)||Gn.empty();d=a.applyToLocalView(u,d),r.set(l,d);let h=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,d=l.value,h=fF();d.forEach(g=>{if(!s.has(g)){let m=wF(t.get(g),r.get(g));m!==null&&h.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(si()),a=-1,l=s;return o.next(u=>M.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(d=>({batchId:a,changes:hF(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=Hd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Hd();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{let u=function(h,g){return new Rr(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,g)=>{o=o.insert(h,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ot.newInvalidDocument(d)))});let a=Hd();return o.forEach((l,u)=>{let d=s.get(l);d!==void 0&&Wd(d.mutation,u,Gn.empty(),ht.now()),wh(t,u)&&(a=a.insert(l,u))}),a})}};var WC=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Dt(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:nD(i.bundledQuery),readTime:Dt(i.readTime)}}(t)),M.resolve()}};var KC=class{constructor(){this.overlays=new rt(Y.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=si();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=si(),s=t.length+1,o=new Y(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new rt((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=si(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=si(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ih(t,r));let s=this.Ir.get(t);s===void 0&&(s=_e(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var QC=class{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var uh=class{constructor(){this.Tr=new Qe(Pt.Er),this.dr=new Qe(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Pt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Pt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Y(new Me([])),r=new Pt(t,e),i=new Pt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Y(new Me([])),r=new Pt(t,e),i=new Pt(t,e+1),s=_e();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Pt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Pt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Y.comparator(e.key,t.key)||ge(e.wr,t.wr)}static Ar(e,t){return ge(e.wr,t.wr)||Y.comparator(e.key,t.key)}};var YC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Qe(Pt.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new rh(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Pt(t,0),i=new Pt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(ge);return t.forEach(i=>{let s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new Pt(new Y(s),0),a=new Qe(ge);return this.br.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ne(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let s=new Pt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Pt(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ZC=class{constructor(e){this.Mr=e,this.docs=function(){return new rt(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(t))}getEntries(e,t){let r=Ln();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ot.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ln(),o=t.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Wb(HO(d),r)<=0||(i.has(d.key)||wh(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Z()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XC(this)}getSize(e){return M.resolve(this.size)}},XC=class extends c_{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var JC=class{constructor(e){this.persistence=e,this.Nr=new di(t=>oa(t),yh),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uh,this.targetCount=0,this.kr=pc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var d_=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zn(0),this.Kr=!1,this.Kr=!0,this.$r=new QC,this.referenceDelegate=e(this),this.Ur=new JC(this),this.indexManager=new LC,this.remoteDocumentCache=function(i){return new ZC(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new n_(t),this.Gr=new WC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new YC(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new eb(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},eb=class extends qm{constructor(e){super(),this.currentSequenceNumber=e}},h_=class n{constructor(e){this.persistence=e,this.Jr=new uh,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var tb=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new zm("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vk,{unique:!0}),l.createObjectStore("documentMutations")}(e),CO(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),CO(e)),o=o.next(()=>function(l){let u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vk,{unique:!0});let h=u.store("mutations"),g=d.map(m=>h.put(m));return M.waitFor(g)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:h8});u.createIndex("collectionPathOverlayIndex",f8,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",p8,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:t8});u.createIndex("documentKeyIndex",n8),u.createIndex("collectionGroupIndex",r8)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:l8}).createIndex("sequenceNumberIndex",c8,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:u8}).createIndex("documentKeyIndex",d8,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=a_(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{ne(l.userId===s.userId);let u=Xo(this.serializer,l);return UF(e,s.userId,u).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let l=new Me(o),u=function(h){return[0,In(h)]}(l);s.push(t.get(u).next(d=>d?M.resolve():(h=>t.put({targetId:0,path:In(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:a8});let r=t.store("collectionParents"),i=new ch,s=o=>{if(i.add(o)){let a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:In(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let l=new Me(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],u)=>{let d=ii(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=qd(i),o=LF(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),l=function(h){return h.document?new Y(Me.fromString(h.document.name).popFirst(5)):h.noDocument?Y.fromSegments(h.noDocument.path):h.unknownDocument?Y.fromSegments(h.unknownDocument.path):Z()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=HF(this.serializer),s=new d_(h_.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:_e();Xo(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),M.forEach(a,(l,u)=>{let d=new kt(u),h=i_.lt(this.serializer,d),g=s.getIndexManager(d),m=l_.lt(d,this.serializer,g,s.referenceDelegate);return new u_(i,m,h,g).recalculateAndSaveOverlaysForDocumentKeys(new Xd(t,zn.oe),l).next()})})}};function CO(n){n.createObjectStore("targetDocuments",{keyPath:s8}).createIndex("documentTargetsIndex",o8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",i8,{unique:!0}),n.createObjectStore("targetGlobal")}var HI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nb=class n{constructor(e,t,r,i,s,o,a,l,u,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new j(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HC(this,i),this.Ai=t+"main",this.serializer=new n_(l),this.Ri=new Ks(this.Ai,this.hi,new tb(this.serializer)),this.$r=new RC,this.Ur=new jC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HF(this.serializer),this.Gr=new xC,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(k.FAILED_PRECONDITION,HI);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(io(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return $d(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return km(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=jt(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):$d(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new j(k.FAILED_PRECONDITION,HI);return!1}}return!(!this.networkEnabled||!this.inForeground)||km(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&U("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Xd(e,zn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>km(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return l_.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VC(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return i_.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?_8:l===16?m8:l===15?Qb:l===14?YO:l===13?QO:l===12?g8:l===11?KO:void Z()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Xd(a,this.Qr?this.Qr.next():zn.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new j(k.FAILED_PRECONDITION,qO);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return $d(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(k.FAILED_PRECONDITION,HI)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $d(e).put("owner",t)}static D(){return Ks.D()}bi(e){let t=$d(e);return t.get("owner").next(r=>this.vi(r)?(U("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;xv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ct("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function $d(n){return jt(n,"owner")}function km(n){return jt(n,"clientMetadata")}function iD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var rb=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=_e(),i=_e();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var ib=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var f_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xv()?8:zO(Cu())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ib;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Zl()<=Jn.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Zl()<=Jn.DEBUG&&U("QueryEngine","Query:",Xl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zl()<=Jn.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):M.resolve())}Yi(e,t){if(Yk(t))return M.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Xm(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=_e(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.ts(t,a);return this.ns(t,u,o,l.readTime)?this.Yi(e,Xm(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,r,i){return Yk(t)||i.isEqual(ae.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?M.resolve(null):(Zl()<=Jn.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xl(t)),this.rs(e,o,t,$O(i,-1)).next(a=>a))})}ts(e,t){let r=new Qe(uF(e));return t.forEach((i,s)=>{wh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Zl()<=Jn.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Xl(t)),this.Ji.getDocumentsMatchingQuery(e,t,dr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var sb=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new rt(ge),this._s=new di(s=>oa(s),yh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function qF(n,e,t,r){return new sb(n,e,t,r)}function zF(n,e){return N(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],l=_e();for(let u of i){o.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})})}function Y8(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){let h=u.batch,g=h.keys(),m=M.resolve();return g.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(C=>{let b=u.docVersions.get(y);ne(b!==null),C.version.compareTo(b)<0&&(h.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),d.addEntry(C)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function GF(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Z8(n,e){let t=Q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let g=i.get(h);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Tt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(C,b,V){return C.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(g,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let l=Ln(),u=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(WF(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(ae.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.os=i,s))}function WF(n,e,t){let r=_e(),i=_e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ln();return t.forEach((a,l)=>{let u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function X8(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gc(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new fc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function mc(n,e,t){return N(this,null,function*(){let r=Q(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!io(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function p_(n,e,t){let r=Q(n),i=ae.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){let h=Q(l),g=h._s.get(d);return g!==void 0?M.resolve(h.os.get(g)):h.Ur.getTargetData(u,d)}(r,o,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ae.min(),t?s:_e())).next(a=>(YF(r,cF(e),a),{documents:a,Ts:s})))}function KF(n,e){let t=Q(n),r=Q(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function QF(n,e){let t=Q(n),r=t.us.get(e)||ae.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,$O(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(YF(t,e,i),i))}function YF(n,e,t){let r=n.us.get(e)||ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function J8(n,e,t,r){return N(this,null,function*(){let i=Q(n),s=_e(),o=Ln();for(let u of t){let d=e.Es(u.metadata.name);u.document&&(s=s.add(d));let h=e.ds(u);h.setReadTime(e.As(u.metadata.readTime)),o=o.insert(d,h)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield gc(i,function(d){return Cn(bc(Me.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>WF(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function eW(r,i){return N(this,arguments,function*(n,e,t=_e()){let s=yield gc(n,Cn(nD(e.bundledQuery))),o=Q(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=Dt(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Gr.saveNamedQuery(a,e);let u=s.withResumeToken(Tt.EMPTY_BYTE_STRING,l);return o.os=o.os.insert(u.targetId,u),o.Ur.updateTargetData(a,u).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function bO(n,e){return`firestore_clients_${n}_${e}`}function DO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qI(n,e){return`firestore_targets_${n}_${e}`}var g_=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(Ct("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Kd=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new n(e,r.state,i):(Ct("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},m_=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Jb();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=GO(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(Ct("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},ob=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ct("SharedClientState",`Failed to parse online state: ${e}`),null)}},dh=class{constructor(){this.activeTargetIds=Jb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Qd=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new rt(ge),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=bO(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new dh),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(bO(this.persistenceKey,r));if(i){let s=m_.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(qI(this.persistenceKey,e));if(i){let s=Kd.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qI(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return U("SharedClientState","READ",e,t),t}setItem(e,t){U("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){U("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(U("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=zn.oe;if(s!=null)try{let a=JSON.parse(s);ne(typeof a=="number"),o=a}catch(a){Ct("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==zn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new g_(this.currentUser,e,t,r),s=DO(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=DO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=qI(this.persistenceKey,e),s=new Kd(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return m_.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return g_.Rs(new kt(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Kd.Rs(i,t)}Ls(e){return ob.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);U("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Jb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},__=class{constructor(){this.so=new dh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ab=class{_o(e){}shutdown(){}};var y_=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Om=null;function zI(){return Om===null?Om=function(){return 268435456+Math.round(2147483648*Math.random())}():Om++,"0x"+Om.toString(16)}var tW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var lb=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ln="WebChannelConnection",cb=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=zI(),l=this.xo(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,l,u,i).then(d=>(U("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw xr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=tW[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=zI();return new Promise((o,a)=>{let l=new LI;l.setWithCredentials(!0),l.listenOnce(VI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vd.NO_ERROR:let d=l.getResponseJson();U(ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Vd.TIMEOUT:U(ln,`RPC '${e}' ${s} timed out`),a(new j(k.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:let h=l.getStatus();if(U(ln,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let y=function(b){let V=b.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(V)>=0?V:k.UNKNOWN}(m.status);a(new j(y,m.message))}else a(new j(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new j(k.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{U(ln,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);U(ln,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=zI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BI(),a=UI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let d=s.join("");U(ln,`Creating RPC '${e}' stream ${i}: ${d}`,l);let h=o.createWebChannel(d,l),g=!1,m=!1,y=new lb({Io:b=>{m?U(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(U(ln,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),U(ln,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},To:()=>h.close()}),C=(b,V,B)=>{b.listen(V,O=>{try{B(O)}catch(z){setTimeout(()=>{throw z},0)}})};return C(h,Gl.EventType.OPEN,()=>{m||(U(ln,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),C(h,Gl.EventType.CLOSE,()=>{m||(m=!0,U(ln,`RPC '${e}' stream ${i} transport closed`),y.So())}),C(h,Gl.EventType.ERROR,b=>{m||(m=!0,xr(ln,`RPC '${e}' stream ${i} transport errored:`,b),y.So(new j(k.UNAVAILABLE,"The operation could not be completed")))}),C(h,Gl.EventType.MESSAGE,b=>{var V;if(!m){let B=b.data[0];ne(!!B);let O=B,z=O.error||((V=O[0])===null||V===void 0?void 0:V.error);if(z){U(ln,`RPC '${e}' stream ${i} received error:`,z);let oe=z.status,J=function(w){let D=Nt[w];if(D!==void 0)return CF(D)}(oe),I=z.message;J===void 0&&(J=k.INTERNAL,I="Unknown error status: "+oe+" with message "+z.message),m=!0,y.So(new j(J,I)),h.close()}else U(ln,`RPC '${e}' stream ${i} received:`,B),y.bo(B)}}),C(a,jI.STAT_EVENT,b=>{b.stat===Mm.PROXY?U(ln,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Mm.NOPROXY&&U(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}};function ZF(){return typeof window<"u"?window:null}function Um(){return typeof document<"u"?document:null}function Eh(n){return new bC(n,!0)}var hh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var v_=class{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(Ct(t.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new j(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ub=class extends v_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=j8(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Dt(o.readTime):ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=SC(this.serializer),t.addTarget=function(s,o){let a,l=o.target;if(a=Ym(l)?{documents:MF(s,l)}:{query:NF(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DF(s,o.resumeToken);let u=DC(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=hc(s,o.snapshotVersion.toTimestamp());let u=DC(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=B8(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=SC(this.serializer),t.removeTarget=e,this.a_(t)}},db=class extends v_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=U8(e.writeResults,e.commitTime),r=Dt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=SC(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lh(this.serializer,r))};this.a_(t)}};var hb=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(k.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,TC(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(k.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,TC(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(k.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},fb=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ct(t),this.D_=!1):U("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var pb=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>N(this,null,function*(){so(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(l){return N(this,null,function*(){let u=Q(l);u.L_.add(4),yield Dc(u),u.q_.set("Unknown"),u.L_.delete(4),yield Ih(u)})}(this))}))}),this.q_=new fb(r,i)}};function Ih(n){return N(this,null,function*(){if(so(n))for(let e of n.B_)yield e(!0)})}function Dc(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function U_(n,e){let t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),aD(t)?oD(t):Sc(t).r_()&&sD(t,e))}function _c(n,e){let t=Q(n),r=Sc(t);t.N_.delete(e),r.r_()&&XF(t,e),t.N_.size===0&&(r.r_()?r.o_():so(t)&&t.q_.set("Unknown"))}function sD(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sc(n).A_(e)}function XF(n,e){n.Q_.xe(e),Sc(n).R_(e)}function oD(n){n.Q_=new CC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Sc(n).start(),n.q_.v_()}function aD(n){return so(n)&&!Sc(n).n_()&&n.N_.size>0}function so(n){return Q(n).L_.size===0}function JF(n){n.Q_=void 0}function nW(n){return N(this,null,function*(){n.q_.set("Online")})}function rW(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{sD(n,e)})})}function iW(n,e){return N(this,null,function*(){JF(n),aD(n)?(n.q_.M_(e),oD(n)):n.q_.set("Unknown")})}function sW(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof e_&&e.state===2&&e.cause)try{yield function(i,s){return N(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield w_(n,r)}else if(e instanceof sc?n.Q_.Ke(e):e instanceof Jm?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ae.min()))try{let r=yield GF(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{let d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Tt.EMPTY_BYTE_STRING,d.snapshotVersion)),XF(s,l);let h=new fc(d.target,l,u,d.sequenceNumber);sD(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield w_(n,r)}})}function w_(n,e,t){return N(this,null,function*(){if(!io(e))throw e;n.L_.add(1),yield Dc(n),n.q_.set("Offline"),t||(t=()=>GF(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ih(n)}))})}function eL(n,e){return e().catch(t=>w_(n,t,e))}function Tc(n){return N(this,null,function*(){let e=Q(n),t=no(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;oW(e);)try{let i=yield X8(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,aW(e,i)}catch(i){yield w_(e,i)}tL(e)&&nL(e)})}function oW(n){return so(n)&&n.O_.length<10}function aW(n,e){n.O_.push(e);let t=no(n);t.r_()&&t.V_&&t.m_(e.mutations)}function tL(n){return so(n)&&!no(n).n_()&&n.O_.length>0}function nL(n){no(n).start()}function lW(n){return N(this,null,function*(){no(n).p_()})}function cW(n){return N(this,null,function*(){let e=no(n);for(let t of n.O_)e.m_(t.mutations)})}function uW(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=wC.from(r,e,t);yield eL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Tc(n)})}function dW(n,e){return N(this,null,function*(){e&&no(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(o){return IF(o)&&o!==k.ABORTED}(i.code)){let s=r.O_.shift();no(r).s_(),yield eL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Tc(r)}})}(n,e)),tL(n)&&nL(n)})}function TO(n,e){return N(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=so(t);t.L_.add(3),yield Dc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ih(t)})}function gb(n,e){return N(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield Ih(t)):e||(t.L_.add(2),yield Dc(t),t.q_.set("Unknown"))})}function Sc(n){return n.K_||(n.K_=function(t,r,i){let s=Q(t);return s.w_(),new ub(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:nW.bind(null,n),Ro:rW.bind(null,n),mo:iW.bind(null,n),d_:sW.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),aD(n)?oD(n):n.q_.set("Unknown")):(yield n.K_.stop(),JF(n))}))),n.K_}function no(n){return n.U_||(n.U_=function(t,r,i){let s=Q(t);return s.w_(),new db(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:lW.bind(null,n),mo:dW.bind(null,n),f_:cW.bind(null,n),g_:uW.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Tc(n)):(yield n.U_.stop(),n.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var mb=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ac(n,e){if(Ct("AsyncQueue",`${e}: ${n}`),io(n))return new j(k.UNAVAILABLE,`${e}: ${n}`);throw n}var E_=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=Hd(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var I_=class{constructor(){this.W_=new rt(Y.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},yc=class n{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,E_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var _b=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},yb=class{constructor(){this.queries=SO(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),s=i.queries;i.queries=SO(),s.forEach((o,a)=>{for(let l of a.j_)l.onError(r)})})(this,new j(k.ABORTED,"Firestore shutting down"))}};function SO(){return new di(n=>lF(n),vh)}function lD(n,e){return N(this,null,function*(){let t=Q(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _b,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Ac(o,`Initialization of query '${Xl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&uD(t)})}function cD(n,e){return N(this,null,function*(){let t=Q(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function hW(n,e){let t=Q(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&uD(t)}function fW(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function uD(n){n.Y_.forEach(e=>{e.next()})}var vb,AO;(AO=vb||(vb={})).ea="default",AO.Cache="cache";var fh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new yc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vb.Cache}};var wb=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var C_=class{constructor(e){this.serializer=e}Es(e){return ai(this.serializer,e)}ds(e){return e.metadata.exists?RF(this.serializer,e.document,!1):Ot.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Dt(e)}},Eb=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rL(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new C_(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||_e()).add(s);t.set(o,a)}}return t}complete(){return N(this,null,function*(){let e=yield J8(this.localStore,new C_(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield eW(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function rL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var b_=class{constructor(e){this.key=e}},D_=class{constructor(e){this.key=e}},T_=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=uF(e),this.Ra=new E_(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new I_,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let g=i.get(d),m=wh(this.query,h)?h:null,y=!!g&&this.mutatedKeys.has(g.key),C=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),b=!1;g&&m?g.data.isEqual(m.data)?y!==C&&(r.track({type:3,doc:m}),b=!0):this.ga(g,m)||(r.track({type:2,doc:m}),b=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),b=!0):g&&!m&&(r.track({type:1,doc:g}),b=!0,(l||u)&&(a=!0)),b&&(m?(o=o.add(m),s=C?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(m,y){let C=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return C(m)-C(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new yc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new I_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=_e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new D_(r))}),this.da.forEach(r=>{e.has(r)||t.push(new b_(r))}),t}ba(e){this.Ta=e.Ts,this.da=_e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return yc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Ib=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Cb=class{constructor(e){this.key=e,this.va=!1}},bb=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new di(a=>lF(a),vh),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(Y.comparator),this.Na=new Map,this.La=new uh,this.Ba={},this.ka=new Map,this.qa=pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function pW(n,e,t=!0){return N(this,null,function*(){let r=B_(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield iL(r,e,t,!0),i})}function gW(n,e){return N(this,null,function*(){let t=B_(n);yield iL(t,e,!0,!1)})}function iL(n,e,t,r){return N(this,null,function*(){let i=yield gc(n.localStore,Cn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield dD(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&U_(n.remoteStore,i),a})}function dD(n,e,t,r,i){return N(this,null,function*(){n.Ka=(h,g,m)=>function(C,b,V,B){return N(this,null,function*(){let O=b.view.ma(V);O.ns&&(O=yield p_(C.localStore,b.query,!1).then(({documents:I})=>b.view.ma(I,O)));let z=B&&B.targetChanges.get(b.targetId),oe=B&&B.targetMismatches.get(b.targetId)!=null,J=b.view.applyChanges(O,C.isPrimaryClient,z,oe);return Db(C,b.targetId,J.wa),J.snapshot})}(n,h,g,m);let s=yield p_(n.localStore,e,!0),o=new T_(e,s.Ts),a=o.ma(s.documents),l=oh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);Db(n,t,u.wa);let d=new Ib(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function mW(n,e,t){return N(this,null,function*(){let r=Q(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!vh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&_c(r.remoteStore,i.targetId),vc(r,i.targetId)}).catch(ro))):(vc(r,i.targetId),yield mc(r.localStore,i.targetId,!0))})}function _W(n,e){return N(this,null,function*(){let t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),_c(t.remoteStore,r.targetId))})}function yW(n,e,t){return N(this,null,function*(){let r=gD(n);try{let i=yield function(o,a){let l=Q(o),u=ht.now(),d=a.reduce((m,y)=>m.add(y.key),_e()),h,g;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Ln(),C=_e();return l.cs.getEntries(m,d).next(b=>{y=b,y.forEach((V,B)=>{B.isValidDocument()||(C=C.add(V))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(b=>{h=b;let V=[];for(let B of a){let O=N8(B,h.get(B.key).overlayedDocument);O!=null&&V.push(new Mr(B.key,O,tF(O.value.mapValue),wt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,V,a)}).next(b=>{g=b;let V=b.applyToLocalDocumentSet(h,C);return l.documentOverlayCache.saveOverlays(m,b.batchId,V)})}).then(()=>({batchId:g.batchId,changes:hF(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new rt(ge)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Ji(r,i.changes),yield Tc(r.remoteStore)}catch(i){let s=Ac(i,"Failed to persist write");t.reject(s)}})}function sL(n,e){return N(this,null,function*(){let t=Q(n);try{let r=yield Z8(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ne(o.va):i.removedDocuments.size>0&&(ne(o.va),o.va=!1))}),yield Ji(t,r,e)}catch(r){yield ro(r)}})}function xO(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let l=Q(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(let g of h.j_)g.Z_(a)&&(u=!0)}),u&&uD(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vW(n,e,t){return N(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new rt(Y.comparator);o=o.insert(s,Ot.newNoDocument(s,ae.min()));let a=_e().add(s),l=new sh(ae.min(),new Map,new rt(ge),o,a);yield sL(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),pD(r)}else yield mc(r.localStore,e,!1).then(()=>vc(r,e,t)).catch(ro)})}function wW(n,e){return N(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield Y8(t.localStore,e);fD(t,r,null),hD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ji(t,i)}catch(i){yield ro(i)}})}function EW(n,e,t){return N(this,null,function*(){let r=Q(n);try{let i=yield function(o,a){let l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ne(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);fD(r,e,t),hD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ji(r,i)}catch(i){yield ro(i)}})}function IW(n,e){return N(this,null,function*(){let t=Q(n);so(t.remoteStore)||U("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=Q(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ac(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function hD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function fD(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||oL(n,r)})}function oL(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(_c(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),pD(n))}function Db(n,e,t){for(let r of t)r instanceof b_?(n.La.addReference(r.key,e),CW(n,r)):r instanceof D_?(U("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||oL(n,r.key)):Z()}function CW(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(U("SyncEngine","New document in limbo: "+t),n.xa.add(r),pD(n))}function pD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Y(Me.fromString(e)),r=n.qa.next();n.Na.set(r,new Cb(t)),n.Oa=n.Oa.insert(t,r),U_(n.remoteStore,new fc(Cn(bc(t.path)),r,"TargetPurposeLimboResolution",zn.oe))}}function Ji(n,e,t){return N(this,null,function*(){let r=Q(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:(d=t?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);let h=rb.Wi(l.targetId,u);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(l,u){return N(this,null,function*(){let d=Q(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(u,g=>M.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(h,g.targetId,m)).next(()=>M.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(h,g.targetId,m)))))}catch(h){if(!io(h))throw h;U("LocalStore","Failed to update sequence numbers: "+h)}for(let h of u){let g=h.targetId;if(!h.fromCache){let m=d.os.get(g),y=m.snapshotVersion,C=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(g,C)}}})}(r.localStore,s))})}function bW(n,e){return N(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield zF(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new j(k.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ji(t,r.hs)}})}function DW(n,e){let t=Q(n),r=t.Na.get(e);if(r&&r.va)return _e().add(r.key);{let i=_e(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function TW(n,e){return N(this,null,function*(){let t=Q(n),r=yield p_(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Db(t,e.targetId,i.wa),i})}function SW(n,e){return N(this,null,function*(){let t=Q(n);return QF(t.localStore,e).then(r=>Ji(t,r))})}function AW(n,e,t,r){return N(this,null,function*(){let i=Q(n),s=yield function(a,l){let u=Q(a),d=Q(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(g=>g?u.localDocuments.getDocuments(h,g):M.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield Tc(i.remoteStore):t==="acknowledged"||t==="rejected"?(fD(i,e,r||null),hD(i,e),function(a,l){Q(Q(a).mutationQueue).On(l)}(i.localStore,e)):Z(),yield Ji(i,s)):U("SyncEngine","Cannot apply mutation batch with id: "+e)})}function xW(n,e){return N(this,null,function*(){let t=Q(n);if(B_(t),gD(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RO(t,r.toArray());t.Qa=!0,yield gb(t.remoteStore,!0);for(let s of i)U_(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(vc(t,o),mc(t.localStore,o,!0))),_c(t.remoteStore,o)}),yield i,yield RO(t,r),function(o){let a=Q(o);a.Na.forEach((l,u)=>{_c(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new rt(Y.comparator)}(t),t.Qa=!1,yield gb(t.remoteStore,!1)}})}function RO(n,e,t){return N(this,null,function*(){let r=Q(n),i=[],s=[];for(let o of e){let a,l=r.Ma.get(o);if(l&&l.length!==0){a=yield gc(r.localStore,Cn(l[0]));for(let u of l){let d=r.Fa.get(u),h=yield TW(r,d);h.snapshot&&s.push(h.snapshot)}}else{let u=yield KF(r.localStore,o);a=yield gc(r.localStore,u),yield dD(r,aL(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function aL(n){return aF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function RW(n){return function(t){return Q(Q(t).persistence).Qi()}(Q(n).localStore)}function MW(n,e,t,r){return N(this,null,function*(){let i=Q(n);if(i.Qa)return void U("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield QF(i.localStore,cF(s[0])),a=sh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tt.EMPTY_BYTE_STRING);yield Ji(i,o,a);break}case"rejected":yield mc(i.localStore,e,!0),vc(i,e,r);break;default:Z()}})}function NW(n,e,t){return N(this,null,function*(){let r=B_(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U("SyncEngine","Adding an already active target "+i);continue}let s=yield KF(r.localStore,i),o=yield gc(r.localStore,s);yield dD(r,aL(s),o.targetId,!1,o.resumeToken),U_(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield mc(r.localStore,i,!1).then(()=>{_c(r.remoteStore,i),vc(r,i)}).catch(ro))}})}function B_(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vW.bind(null,e),e.Ca.d_=hW.bind(null,e.eventManager),e.Ca.$a=fW.bind(null,e.eventManager),e}function gD(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EW.bind(null,e),e}function PW(n,e,t){let r=Q(n);(function(s,o,a){return N(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(m,y){let C=Q(m),b=Dt(y.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",V=>C.Gr.getBundleMetadata(V,y.id)).then(V=>!!V&&V.createTime.compareTo(b)>=0)}(s.localStore,l))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(rL(l));let u=new Eb(l,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let g=yield u.la(d);g&&a._updateProgress(g),d=yield o.Ua()}let h=yield u.complete();return yield Ji(s,h.Ia,void 0),yield function(m,y){let C=Q(m);return C.persistence.runTransaction("Save bundle","readwrite",b=>C.Gr.saveBundleMetadata(b,y))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return xr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Tb=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Eh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return qF(this.persistence,new f_,t.initialUser,this.serializer)}Ga(t){return new d_(h_.Zr,this.serializer)}Wa(t){return new __}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var S_=class n extends Tb{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Sv(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield gD(this.Ja.syncEngine),yield Tc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return qF(this.persistence,new f_,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new BC(r,e.asyncQueue,t)}Ha(e,t){let r=new iC(t,this.persistence);return new rC(e.asyncQueue,r)}Ga(e){let t=iD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new nb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ZF(),Um(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new __}},Sb=class n extends S_{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Sv(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Qd&&(this.sharedClientState.syncEngine={no:AW.bind(null,t),ro:MW.bind(null,t),io:NW.bind(null,t),Qi:RW.bind(null,t),eo:SW.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield xW(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=ZF();if(!Qd.D(t))throw new j(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=iD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qd(t,e.asyncQueue,r,e.clientId,e.initialUser)}},mD=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bW.bind(null,this.syncEngine),yield gb(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new yb}()}createDatastore(t){let r=Eh(t.databaseInfo.databaseId),i=function(o){return new cb(o)}(t.databaseInfo);return function(o,a,l,u){return new hb(o,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,l){return new pb(i,s,o,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>xO(this.syncEngine,r,0),function(){return y_.D()?new y_:new ab}())}createSyncEngine(t,r){return function(s,o,a,l,u,d,h){let g=new bb(s,o,a,l,u,d);return h&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(s){return N(this,null,function*(){let o=Q(s);U("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Dc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function MO(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var wc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ct("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ab=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Vt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new wb(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var xb=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return N(this,null,function*(){let o=Q(i),a={documents:s.map(h=>ah(o.serializer,h))},l=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Me.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{let g=V8(o.serializer,h);u.set(g.key.toString(),g)});let d=[];return s.forEach(h=>{let g=u.get(h.toString());ne(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new to(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Y.fromPath(r);this.mutations.push(new nh(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let s=Q(r),o={writes:i.map(a=>lh(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Me.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Z();t=ae.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new j(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ae.min())?wt.exists(!1):wt.updateTime(t):wt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ae.min()))throw new j(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wt.updateTime(t)}return wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Rb=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new hh(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new xb(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!_h(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!IF(t)}return!1}};var Mb=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>N(this,null,function*(){U("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ac(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function GI(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield zF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function NO(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _D(n);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>TO(e.remoteStore,i)),n._onlineComponents=e})}function _D(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield GI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;xr("Error using user provided cache. Falling back to memory cache: "+t),yield GI(n,new Tb)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield GI(n,new Tb);return n._offlineComponents})}function $_(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield NO(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield NO(n,new mD))),n._onlineComponents})}function lL(n){return _D(n).then(e=>e.persistence)}function yD(n){return _D(n).then(e=>e.localStore)}function cL(n){return $_(n).then(e=>e.remoteStore)}function vD(n){return $_(n).then(e=>e.syncEngine)}function kW(n){return $_(n).then(e=>e.datastore)}function Ec(n){return N(this,null,function*(){let e=yield $_(n),t=e.eventManager;return t.onListen=pW.bind(null,e.syncEngine),t.onUnlisten=mW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_W.bind(null,e.syncEngine),t})}function OW(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield lL(n),t=yield cL(n);return e.setNetworkEnabled(!0),function(i){let s=Q(i);return s.L_.delete(0),Ih(s)}(t)}))}function FW(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield lL(n),t=yield cL(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let s=Q(i);s.L_.add(0),yield Dc(s),s.q_.set("Offline")})}(t)}))}function LW(n,e){let t=new Vt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield function(u,d){let h=Q(u);return h.persistence.runTransaction("read document","readonly",g=>h.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Ac(a,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield yD(n),e,t)})),t.promise}function uL(n,e,t={}){let r=new Vt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,l,u){let d=new wc({next:g=>{d.Za(),o.enqueueAndForget(()=>cD(s,h));let m=g.docs.has(a);!m&&g.fromCache?u.reject(new j(k.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?u.reject(new j(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new fh(bc(a.path),d,{includeMetadataChanges:!0,_a:!0});return lD(s,h)}(yield Ec(n),n.asyncQueue,e,t,r)})),r.promise}function VW(n,e){let t=new Vt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield p_(i,s,!0),l=new T_(s,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){let l=Ac(a,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield yD(n),e,t)})),t.promise}function dL(n,e,t={}){let r=new Vt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,l,u){let d=new wc({next:g=>{d.Za(),o.enqueueAndForget(()=>cD(s,h)),g.fromCache&&l.source==="server"?u.reject(new j(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new fh(a,d,{includeMetadataChanges:!0,_a:!0});return lD(s,h)}(yield Ec(n),n.asyncQueue,e,t,r)})),r.promise}function jW(n,e){let t=new wc(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){Q(i).Y_.add(s),s.next()}(yield Ec(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){Q(i).Y_.delete(s)}(yield Ec(n),t)}))}}function UW(n,e,t,r){let i=function(o,a){let l;return l=typeof o=="string"?bF().encode(o):o,function(d,h){return new Ab(d,h)}(function(d,h){if(d instanceof Uint8Array)return MO(d,h);if(d instanceof ArrayBuffer)return MO(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Eh(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){PW(yield vD(n),i,r)}))}function BW(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let s=Q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield yD(n),e)}))}function hL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var PO=new Map;function wD(n,e,t){if(!t)throw new j(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ED(n,e,t,r){if(e===!0&&r===!0)throw new j(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kO(n){if(!Y.isDocumentKey(n))throw new j(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OO(n){if(Y.isDocumentKey(n))throw new j(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function H_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z()}function Pe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=H_(n);throw new j(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fL(n,e){if(e<=0)throw new j(k.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var A_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ED("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ua=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WI;switch(r.type){case"firstParty":return new ZI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=PO.get(t);r&&(U("ComponentProvider","Removing Datastore"),PO.delete(t),r.terminate())}(this),Promise.resolve()}};function pL(n,e,t,r={}){var i;let s=(n=Pe(n,ua))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=kt.MOCK_USER;else{a=La(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new j(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new kt(u)}n._authCredentials=new KI(new Bm(a,l))}}var en=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},li=class n extends en{constructor(e,t,r){super(e,t,bc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ID(n,e,...t){if(n=de(n),wD("collection","path",e),n instanceof ua){let r=Me.fromString(e,...t);return OO(r),new li(n,null,r)}{if(!(n instanceof et||n instanceof li))throw new j(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return OO(r),new li(n.firestore,null,r)}}function gL(n,e){if(n=Pe(n,ua),wD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new en(n,null,function(r){return new Rr(Me.emptyPath(),r)}(e))}function Ch(n,e,...t){if(n=de(n),arguments.length===1&&(e=$m.newId()),wD("doc","path",e),n instanceof ua){let r=Me.fromString(e,...t);return kO(r),new et(n,null,new Y(r))}{if(!(n instanceof et||n instanceof li))throw new j(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return kO(r),new et(n.firestore,n instanceof li?n.converter:null,new Y(r))}}function CD(n,e){return n=de(n),e=de(e),(n instanceof et||n instanceof li)&&(e instanceof et||e instanceof li)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bD(n,e){return n=de(n),e=de(e),n instanceof en&&e instanceof en&&n.firestore===e.firestore&&vh(n._query,e._query)&&n.converter===e.converter}var x_=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hh(this,"async_queue_retry"),this.Vu=()=>{let r=Um();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Um();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Um();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Vt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!io(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ct("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=mb.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Nb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Pb=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var mL=-1,ft=class extends ua{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new x_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new x_(e),this._firestoreClient=void 0,yield e}})}};function tn(n){if(n._terminated)throw new j(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_L(n),n._firestoreClient}function _L(n){var e,t,r;let i=n._freezeSettings(),s=function(a,l,u,d){return new sC(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hL(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Mb(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function yL(n,e){xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return wL(n,mD.provider,{build:r=>new S_(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function vL(n){return N(this,null,function*(){xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();wL(n,mD.provider,{build:t=>new Sb(t,e.cacheSizeBytes)})})}function wL(n,e,t){if((n=Pe(n,ft))._firestoreClient||n._terminated)throw new j(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new j(k.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},_L(n)}function EL(n){if(n._initialized&&!n._terminated)throw new j(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Vt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Ks.D())return Promise.resolve();let i=r+"main";yield Ks.delete(i)})}(iD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function IL(n){return function(t){let r=new Vt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return IW(yield vD(t),r)})),r.promise}(tn(n=Pe(n,ft)))}function CL(n){return OW(tn(n=Pe(n,ft)))}function bL(n){return FW(tn(n=Pe(n,ft)))}function DL(n,e){let t=tn(n=Pe(n,ft)),r=new Pb;return UW(t,n._databaseId,e,r),r}function TL(n,e){return BW(tn(n=Pe(n,ft)),e).then(t=>t?new en(n,null,t.query):null)}var hi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tt.fromBase64String(e))}catch(t){throw new j(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zi=class{constructor(e){this._methodName=e}};var da=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var ph=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var $W=/^__.*__$/,kb=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new eo(e,this.data,t,this.fieldTransforms)}},R_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function SL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var M_=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return N_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(SL(this.Cu)&&$W.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Ob=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Eh(e)}Qu(e,t,r,i=!1){return new M_({Cu:e,methodName:t,qu:r,path:bt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ga(n){let e=n._freezeSettings(),t=Eh(n._databaseId);return new Ob(n._databaseId,!!e.ignoreUndefinedProperties,t)}function q_(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);SD("Data must be an object, but it was:",o,r);let a=RL(r,o),l,u;if(s.merge)l=new Gn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let g=Ub(e,h,t);if(!o.contains(g))throw new j(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);NL(d,g)||d.push(g)}l=new Gn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new kb(new cn(a),l,u)}var gh=class n extends Zi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function AL(n,e,t){return new M_({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Fb=class n extends Zi{_toFieldTransform(e){return new aa(e.path,new Xs)}isEqual(e){return e instanceof n}},Lb=class n extends Zi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=AL(this,e,!0),r=this.Ku.map(s=>ma(s,t)),i=new Qi(r);return new aa(e.path,i)}isEqual(e){return e instanceof n&&Rv(this.Ku,e.Ku)}},Vb=class n extends Zi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=AL(this,e,!0),r=this.Ku.map(s=>ma(s,t)),i=new Yi(r);return new aa(e.path,i)}isEqual(e){return e instanceof n&&Rv(this.Ku,e.Ku)}},jb=class n extends Zi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Js(e.serializer,gF(e.serializer,this.$u));return new aa(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function DD(n,e,t,r){let i=n.Qu(1,e,t);SD("Data must be an object, but it was:",i,r);let s=[],o=cn.empty();pa(r,(l,u)=>{let d=AD(e,l,t);u=de(u);let h=i.Nu(d);if(u instanceof gh)s.push(d);else{let g=ma(u,h);g!=null&&(s.push(d),o.set(d,g))}});let a=new Gn(s);return new R_(o,a,i.fieldTransforms)}function TD(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[Ub(e,r,t)],l=[i];if(s.length%2!=0)throw new j(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Ub(e,s[g])),l.push(s[g+1]);let u=[],d=cn.empty();for(let g=a.length-1;g>=0;--g)if(!NL(u,a[g])){let m=a[g],y=l[g];y=de(y);let C=o.Nu(m);if(y instanceof gh)u.push(m);else{let b=ma(y,C);b!=null&&(u.push(m),d.set(m,b))}}let h=new Gn(u);return new R_(d,h,o.fieldTransforms)}function xL(n,e,t,r=!1){return ma(t,n.Qu(r?4:3,e))}function ma(n,e){if(ML(n=de(n)))return SD("Unsupported field value:",e,n),RL(n,e);if(n instanceof Zi)return function(r,i){if(!SL(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let l=ma(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=de(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ht.fromDate(r);return{timestampValue:hc(i.serializer,s)}}if(r instanceof ht){let s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hc(i.serializer,s)}}if(r instanceof da)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hi)return{bytesValue:DF(i.serializer,r._byteString)};if(r instanceof et){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ph)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return eD(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${H_(r)}`)}(n,e)}function RL(n,e){let t={};return ZO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(n,(r,i)=>{let s=ma(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function ML(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof da||n instanceof hi||n instanceof et||n instanceof Zi||n instanceof ph)}function SD(n,e,t){if(!ML(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=H_(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Ub(n,e,t){if((e=de(e))instanceof Nr)return e._internalPath;if(typeof e=="string")return AD(n,e);throw N_("Field path arguments must be of type string or ",n,!1,void 0,t)}var HW=new RegExp("[~\\*/\\[\\]]");function AD(n,e,t){if(e.search(HW)>=0)throw N_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nr(...e.split("."))._internalPath}catch{throw N_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function N_(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(k.INVALID_ARGUMENT,a+n+l)}function NL(n,e){return n.some(t=>t.isEqual(e))}var ha=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Bb=class extends ha{data(){return super.data()}};function z_(n,e){return typeof e=="string"?AD(n,e):e instanceof Nr?e._internalPath:e._delegate._internalPath}function PL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mh=class{},fa=class extends mh{};function es(n,e,...t){let r=[];e instanceof mh&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof $b).length,a=s.filter(l=>l instanceof P_).length;if(o>1||o>0&&a>0)throw new j(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var P_=class n extends fa{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return HL(e._query,t),new en(e.firestore,e.converter,yC(e._query,t))}_parse(e){let t=ga(e.firestore);return function(s,o,a,l,u,d,h){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){LO(h,d);let m=[];for(let y of h)m.push(FO(l,s,y));g={arrayValue:{values:m}}}else g=FO(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||LO(h,d),g=xL(a,o,h,d==="in"||d==="not-in");return xe.create(u,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function kL(n,e,t){let r=e,i=z_("where",n);return P_._create(i,r,t)}var $b=class n extends mh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Be.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let l of a)HL(o,l),o=yC(o,l)}(e._query,t),new en(e.firestore,e.converter,yC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Hb=class n extends fa{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new j(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sa(s,o)}(e._query,this._field,this._direction);return new en(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Rr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function OL(n,e="asc"){let t=e,r=z_("orderBy",n);return Hb._create(r,t)}var k_=class n extends fa{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new en(e.firestore,e.converter,Xm(e._query,this._limit,this._limitType))}};function FL(n){return fL("limit",n),k_._create("limit",n,"F")}function LL(n){return fL("limitToLast",n),k_._create("limitToLast",n,"L")}var O_=class n extends fa{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=$L(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,s){return new Rr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function VL(...n){return O_._create("startAt",n,!0)}function jL(...n){return O_._create("startAfter",n,!1)}var F_=class n extends fa{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=$L(e,this.type,this._docOrFields,this._inclusive);return new en(e.firestore,e.converter,function(i,s){return new Rr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function UL(...n){return F_._create("endBefore",n,!1)}function BL(...n){return F_._create("endAt",n,!0)}function $L(n,e,t,r){if(t[0]=de(t[0]),t[0]instanceof ha)return function(s,o,a,l,u){if(!l)throw new j(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of ic(s))if(h.field.isKeyField())d.push(ia(o,l.key));else{let g=l.data.field(h.field);if(V_(g))throw new j(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=h.field.canonicalString();throw new j(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new ui(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ga(n.firestore);return function(o,a,l,u,d,h){let g=o.explicitOrderBy;if(d.length>g.length)throw new j(k.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let y=0;y<d.length;y++){let C=d[y];if(g[y].field.isKeyField()){if(typeof C!="string")throw new j(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof C}`);if(!Xb(o)&&C.indexOf("/")!==-1)throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${C}' contains a slash.`);let b=o.path.child(Me.fromString(C));if(!Y.isDocumentKey(b))throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let V=new Y(b);m.push(ia(a,V))}else{let b=xL(l,u,C);m.push(b)}}return new ui(m,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FO(n,e,t){if(typeof(t=de(t))=="string"){if(t==="")throw new j(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xb(e)&&t.indexOf("/")!==-1)throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Me.fromString(t));if(!Y.isDocumentKey(r))throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ia(n,new Y(r))}if(t instanceof et)return ia(n,t._key);throw new j(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H_(t)}.`)}function LO(n,e){if(!Array.isArray(n)||n.length===0)throw new j(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HL(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ic=class{convertValue(e,t="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return pa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new ph(s)}convertGeoPoint(e){return new da(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Yb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jd(e));default:return null}}convertTimestamp(e){let t=Ki(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Me.fromString(e);ne(FF(r));let i=new Ys(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(t)||Ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function G_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var qb=class extends Ic{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}};var Wi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hr=class extends ha{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(z_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Gs=class extends hr{data(e={}){return super.data(e)}},Pr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gs(this._firestore,this._userDataWriter,r.key,r,new Wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let l=new Gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new Gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:qW(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function qW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}function xD(n,e){return n instanceof hr&&e instanceof hr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pr&&e instanceof Pr&&n._firestore===e._firestore&&bD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function qL(n){n=Pe(n,et);let e=Pe(n.firestore,ft);return uL(tn(e),n._key).then(t=>PD(e,n,t))}var Xi=class extends Ic{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}};function zL(n){n=Pe(n,et);let e=Pe(n.firestore,ft),t=tn(e),r=new Xi(e);return LW(t,n._key).then(i=>new hr(e,r,n._key,i,new Wi(i!==null&&i.hasLocalMutations,!0),n.converter))}function GL(n){n=Pe(n,et);let e=Pe(n.firestore,ft);return uL(tn(e),n._key,{source:"server"}).then(t=>PD(e,n,t))}function WL(n){n=Pe(n,en);let e=Pe(n.firestore,ft),t=tn(e),r=new Xi(e);return PL(n._query),dL(t,n._query).then(i=>new Pr(e,r,n,i))}function KL(n){n=Pe(n,en);let e=Pe(n.firestore,ft),t=tn(e),r=new Xi(e);return VW(t,n._query).then(i=>new Pr(e,r,n,i))}function QL(n){n=Pe(n,en);let e=Pe(n.firestore,ft),t=tn(e),r=new Xi(e);return dL(t,n._query,{source:"server"}).then(i=>new Pr(e,r,n,i))}function RD(n,e,t){n=Pe(n,et);let r=Pe(n.firestore,ft),i=G_(n.converter,e,t);return xc(r,[q_(ga(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,wt.none())])}function MD(n,e,t,...r){n=Pe(n,et);let i=Pe(n.firestore,ft),s=ga(i),o;return o=typeof(e=de(e))=="string"||e instanceof Nr?TD(s,"updateDoc",n._key,e,t,r):DD(s,"updateDoc",n._key,e),xc(i,[o.toMutation(n._key,wt.exists(!0))])}function YL(n){return xc(Pe(n.firestore,ft),[new to(n._key,wt.none())])}function ZL(n,e){let t=Pe(n.firestore,ft),r=Ch(n),i=G_(n.converter,e);return xc(t,[q_(ga(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,wt.exists(!1))]).then(()=>r)}function ND(n,...e){var t,r,i;n=de(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nb(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Nb(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,d;if(n instanceof et)u=Pe(n.firestore,ft),d=bc(n._key.path),l={next:h=>{e[o]&&e[o](PD(u,n,h))},error:e[o+1],complete:e[o+2]};else{let h=Pe(n,en);u=Pe(h.firestore,ft),d=h._query;let g=new Xi(u);l={next:m=>{e[o]&&e[o](new Pr(u,g,h,m))},error:e[o+1],complete:e[o+2]},PL(n._query)}return function(g,m,y,C){let b=new wc(C),V=new fh(m,b,y);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return lD(yield Ec(g),V)})),()=>{b.Za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return cD(yield Ec(g),V)}))}}(tn(u),d,a,l)}function XL(n,e){return jW(tn(n=Pe(n,ft)),Nb(e)?e:{next:e})}function xc(n,e){return function(r,i){let s=new Vt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return yW(yield vD(r),i,s)})),s.promise}(tn(n),e)}function PD(n,e,t){let r=t.docs.get(e._key),i=new Xi(n);return new hr(n,i,e._key,r,new Wi(t.hasPendingWrites,t.fromCache),e.converter)}var zW={maxAttempts:5};var L_=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ga(e)}set(e,t,r){this._verifyNotCommitted();let i=qs(e,this._firestore),s=G_(i.converter,t,r),o=q_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,wt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=qs(e,this._firestore),o;return o=typeof(t=de(t))=="string"||t instanceof Nr?TD(this._dataReader,"WriteBatch.update",s._key,t,r,i):DD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,wt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=qs(e,this._firestore);return this._mutations=this._mutations.concat(new to(t._key,wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qs(n,e){if((n=de(n)).firestore!==e)throw new j(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var zb=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ga(t)}get(t){let r=qs(t,this._firestore),i=new qb(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Z();let o=s[0];if(o.isFoundDocument())return new ha(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ha(this._firestore,i,r._key,null,r.converter);throw Z()})}set(t,r,i){let s=qs(t,this._firestore),o=G_(s.converter,r,i),a=q_(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=qs(t,this._firestore),a;return a=typeof(r=de(r))=="string"||r instanceof Nr?TD(this._dataReader,"Transaction.update",o._key,r,i,s):DD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=qs(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=qs(e,this._firestore),r=new Xi(this._firestore);return super.get(e).then(i=>new hr(this._firestore,r,t._key,i._document,new Wi(!1,!1),t.converter))}};function JL(n,e,t){n=Pe(n,ft);let r=Object.assign(Object.assign({},zW),t);return function(s){if(s.maxAttempts<1)throw new j(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let l=new Vt;return s.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let u=yield kW(s);new Rb(s.asyncQueue,u,a,o,l).au()})),l.promise}(tn(n),i=>e(new zb(n,i)),r)}function eV(){return new gh("deleteField")}function tV(){return new Fb("serverTimestamp")}function nV(...n){return new Lb("arrayUnion",n)}function rV(...n){return new Vb("arrayRemove",n)}function iV(n){return new jb("increment",n)}(function(e,t=!0){(function(i){Cc=i})(Va),bi(new Kt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ft(new QI(r.getProvider("auth-internal")),new JI(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new j(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ys(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Rn(Ok,"4.7.3",e),Rn(Ok,"4.7.3","esm2017")})();var GW="@firebase/firestore-compat",WW="0.3.38";function jD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sV(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function oV(){if(!XO())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}var W_=class n{constructor(e){this._delegate=e}static fromBase64String(e){return oV(),new n(hi.fromBase64String(e))}static fromUint8Array(e){return sV(),new n(hi.fromUint8Array(e))}toBase64(){return oV(),this._delegate.toBase64()}toUint8Array(){return sV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function kD(n){return KW(n,["next","error","complete"])}function KW(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var OD=class{enableIndexedDbPersistence(e,t){return yL(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return vL(e._delegate)}clearIndexedDbPersistence(e){return EL(e._delegate)}},K_=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ys||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){pL(this._delegate,e,t,r)}enableNetwork(){return CL(this._delegate)}disableNetwork(){return bL(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ED("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return IL(this._delegate)}onSnapshotsInSync(e){return XL(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nc(this,ID(this._delegate,e))}catch(t){throw bn(t,"collection()","Firestore.collection()")}}doc(e){try{return new fi(this,Ch(this._delegate,e))}catch(t){throw bn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wa(this,gL(this._delegate,e))}catch(t){throw bn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return JL(this._delegate,t=>e(new Q_(this,t)))}batch(){return tn(this._delegate),new Y_(new L_(this._delegate,e=>xc(this._delegate,e)))}loadBundle(e){return DL(this._delegate,e)}namedQuery(e){return TL(this._delegate,e).then(t=>t?new wa(this,t):null)}},Rc=class extends Ic{constructor(e){super(),this.firestore=e}convertBytes(e){return new W_(new hi(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return fi.forKey(t,this.firestore,null)}};function QW(n){jO(n)}var Q_=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rc(e)}get(e){let t=_a(e);return this._delegate.get(t).then(r=>new ya(this._firestore,new hr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=_a(e);return r?(jD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=_a(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=_a(e);return this._delegate.delete(t),this}},Y_=class{constructor(e){this._delegate=e}set(e,t,r){let i=_a(e);return r?(jD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=_a(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=_a(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Mc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Gs(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new va(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new Rc(e),t),i.set(t,s)),s}};Mc.INSTANCES=new WeakMap;var fi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new et(t._delegate,r,new Y(e)))}static forKey(e,t,r){return new n(t,new et(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Nc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nc(this.firestore,ID(this._delegate,e))}catch(t){throw bn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=de(e),e instanceof et?CD(this._delegate,e):!1}set(e,t){t=jD("DocumentReference.set",t);try{return t?RD(this._delegate,e,t):RD(this._delegate,e)}catch(r){throw bn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?MD(this._delegate,e):MD(this._delegate,e,t,...r)}catch(i){throw bn(i,"updateDoc()","DocumentReference.update()")}}delete(){return YL(this._delegate)}onSnapshot(...e){let t=aV(e),r=lV(e,i=>new ya(this.firestore,new hr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ND(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=zL(this._delegate):e?.source==="server"?t=GL(this._delegate):t=qL(this._delegate),t.then(r=>new ya(this.firestore,new hr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Mc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function bn(n,e,t){return n.message=n.message.replace(e,t),n}function aV(n){for(let e of n)if(typeof e=="object"&&!kD(e))return e;return{}}function lV(n,e){var t,r;let i;return kD(n[0])?i=n[0]:kD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ya=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xD(this._delegate,e._delegate)}},va=class extends ya{data(e){let t=this._delegate.data(e);return this._delegate._converter||UO(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},wa=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rc(e)}where(e,t,r){try{return new n(this.firestore,es(this._delegate,kL(e,t,r)))}catch(i){throw bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,es(this._delegate,OL(e,t)))}catch(r){throw bn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,es(this._delegate,FL(e)))}catch(t){throw bn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,es(this._delegate,LL(e)))}catch(t){throw bn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,es(this._delegate,VL(...e)))}catch(t){throw bn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,es(this._delegate,jL(...e)))}catch(t){throw bn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,es(this._delegate,UL(...e)))}catch(t){throw bn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,es(this._delegate,BL(...e)))}catch(t){throw bn(t,"endAt()","Query.endAt()")}}isEqual(e){return bD(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=KL(this._delegate):e?.source==="server"?t=QL(this._delegate):t=WL(this._delegate),t.then(r=>new bh(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=aV(e),r=lV(e,i=>new bh(this.firestore,new Pr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ND(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Mc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},FD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new va(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},bh=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new va(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new va(this._firestore,r))})}isEqual(e){return xD(this._delegate,e._delegate)}},Nc=class n extends wa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new fi(this.firestore,e):null}doc(e){try{return e===void 0?new fi(this.firestore,Ch(this._delegate)):new fi(this.firestore,Ch(this._delegate,e))}catch(t){throw bn(t,"doc()","CollectionReference.doc()")}}add(e){return ZL(this._delegate,e).then(t=>new fi(this.firestore,t))}isEqual(e){return CD(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Mc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function _a(n){return Pe(n,et)}var LD=class n{constructor(...e){this._delegate=new Nr(...e)}static documentId(){return new n(bt.keyField().canonicalString())}isEqual(e){return e=de(e),e instanceof Nr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var VD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=tV();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=eV();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=nV(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=rV(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=iV(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var YW={Firestore:K_,GeoPoint:da,Timestamp:ht,Blob:W_,Transaction:Q_,WriteBatch:Y_,DocumentReference:fi,DocumentSnapshot:ya,Query:wa,QueryDocumentSnapshot:va,QuerySnapshot:bh,CollectionReference:Nc,FieldPath:LD,FieldValue:VD,setLogLevel:QW,CACHE_SIZE_UNLIMITED:mL};function ZW(n,e){n.INTERNAL.registerComponent(new Kt("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},YW)))}function XW(n){ZW(n,(e,t)=>new K_(e,t,new OD)),n.registerVersion(GW,WW)}XW(ct);function JW(n,e=Si){return new ve(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function cV(n,e){return JW(n,e)}function e7(n,e){return cV(n,e).pipe(To(void 0),Pu(),re(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function $D(n,e){return cV(n,e).pipe(re(t=>({payload:t,type:"query"})))}var Z_=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=pV(r,t);return new J_(i,s,this.afs)}snapshotChanges(){return e7(this.ref,this.afs.schedulers.outsideAngular).pipe(st)}valueChanges(e={}){return this.snapshotChanges().pipe(re(({payload:t})=>e.idField?ye(q({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return be(this.ref.get(e)).pipe(st)}};function X_(n,e){return $D(n,e).pipe(To(void 0),Pu(),re(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{let u=s.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function uV(n,e,t){return X_(n,t).pipe(jr((r,i)=>t7(r,i.map(s=>s.payload),e),[]),Mu(),re(r=>r.map(i=>({type:i.type,payload:i}))))}function t7(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=n7(n,r))}),n}function UD(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function n7(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return UD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return UD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UD(n,e.oldIndex,1);break}return n}function dV(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var J_=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=X_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(re(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(To(void 0),Pu(),Zt(([r,i])=>i.length>0||!r),re(([,r])=>r),st)}auditTrail(e){return this.stateChanges(e).pipe(jr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=dV(e);return uV(this.query,t,this.afs.schedulers.outsideAngular).pipe(st)}valueChanges(e={}){return $D(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.payload.docs.map(r=>e.idField?ye(q({},r.data()),{[e.idField]:r.id}):r.data())),st)}get(e){return be(this.query.get(e)).pipe(st)}add(e){return this.ref.add(e)}doc(e){return new Z_(this.ref.doc(e),this.afs)}},BD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?X_(this.query,this.afs.schedulers.outsideAngular).pipe(st):X_(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zt(t=>t.length>0),st)}auditTrail(e){return this.stateChanges(e).pipe(jr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=dV(e);return uV(this.query,t,this.afs.schedulers.outsideAngular).pipe(st)}valueChanges(e={}){return $D(this.query,this.afs.schedulers.outsideAngular).pipe(re(r=>r.payload.docs.map(i=>e.idField?q({[e.idField]:i.id},i.data()):i.data())),st)}get(e){return be(this.query.get(e)).pipe(st)}},hV=new K("angularfire2.enableFirestorePersistence"),fV=new K("angularfire2.firestore.persistenceSettings"),r7=new K("angularfire2.firestore.settings"),i7=new K("angularfire2.firestore.use-emulator");function pV(n,e=t=>t){return{query:e(n),ref:n}}var s7=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,u,d,h,g,m,y,C,b,V,B){this.schedulers=l;let O=qi(t,a,r),z=d;h&&Ld(O,a,g,y,C,b,m,V),[this.firestore,this.persistenceEnabled$]=js(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let oe=a.runOutsideAngular(()=>O.firestore());if(s&&oe.settings(s),z&&oe.useEmulator(...z),i&&!Ho(o)){let J=()=>{try{return be(oe.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),se(!1)}};return[oe,a.runOutsideAngular(J)]}else return[oe,se(!1)]},[s,z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=pV(i,r),a=this.schedulers.ngZone.run(()=>s);return new J_(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new BD(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Z_(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(ni),L(ri,8),L(hV,8),L(r7,8),L(Bt),L(De),L(Ls),L(fV,8),L(i7,8),L(Ko,8),L(Md,8),L(Nd,8),L(Pd,8),L(kd,8),L(Od,8),L(Fd,8),L(Tr,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),gV=(()=>{class n{constructor(){ct.registerVersion("angularfire",Sr.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hV,useValue:!0},{provide:fV,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ze({providers:[s7]})}return n})();var bV="firebasestorage.googleapis.com",DV="storageBucket",o7=2*60*1e3,a7=10*60*1e3,l7=1e3;var pt=class n extends Rf{constructor(e,t,r=0){super(HD(e),`Firebase Storage: ${t} (${HD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return HD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},at=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(at||{});function HD(n){return"storage/"+n}function ZD(){let n="An unknown error occurred, please check the error payload for server response.";return new pt(at.UNKNOWN,n)}function c7(n){return new pt(at.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function u7(n){return new pt(at.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function d7(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(at.UNAUTHENTICATED,n)}function h7(){return new pt(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function f7(n){return new pt(at.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function TV(){return new pt(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SV(){return new pt(at.CANCELED,"User canceled the upload/download.")}function p7(n){return new pt(at.INVALID_URL,"Invalid URL '"+n+"'.")}function g7(n){return new pt(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function m7(){return new pt(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DV+"' property when initializing the app?")}function AV(){return new pt(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _7(){return new pt(at.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y7(){return new pt(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v7(n){return new pt(at.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ea(n){return new pt(at.INVALID_ARGUMENT,n)}function xV(){return new pt(at.APP_DELETED,"The Firebase app was deleted.")}function XD(n){return new pt(at.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Th(n,e){return new pt(at.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Dh(n){throw new pt(at.INTERNAL_ERROR,"Internal error: "+n)}var Dn=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw g7(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(z){z.path_=decodeURIComponent(z.path)}let d="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${i}/o${g}`,"i"),y={bucket:1,path:3},C=t===bV?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",V=new RegExp(`^https?://${C}/${i}/${b}`,"i"),O=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:u},{regex:V,indices:{bucket:1,path:2},postModify:u}];for(let z=0;z<O.length;z++){let oe=O[z],J=oe.regex.exec(e);if(J){let I=J[oe.indices.bucket],v=J[oe.indices.path];v||(v=""),r=new n(I,v),oe.postModify(r);break}}if(r==null)throw p7(e);return r}},zD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function w7(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,n(m,l())},b)}function g(){s&&clearTimeout(s)}function m(b,...V){if(u){g();return}if(b){g(),d.call(null,b,...V);return}if(l()||o){g(),d.call(null,b,...V);return}r<64&&(r*=2);let O;a===1?(a=2,O=0):O=(r+Math.random())*1e3,h(O)}let y=!1;function C(b){y||(y=!0,g(),!u&&(i!==null?(b||(a=2),clearTimeout(i),h(0)):b||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,C(!0)},t),C}function E7(n){n(!1)}function I7(n){return n!==void 0}function C7(n){return typeof n=="function"}function b7(n){return typeof n=="object"&&!Array.isArray(n)}function ny(n){return typeof n=="string"||n instanceof String}function mV(n){return JD()&&n instanceof Blob}function JD(){return typeof Blob<"u"}function GD(n,e,t,r){if(r<e)throw Ea(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ea(`Invalid value for '${n}'. Expected ${t} or less.`)}function oo(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function RV(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Oc=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Oc||{});function MV(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var WD=class{constructor(e,t,r,i,s,o,a,l,u,d,h,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new kc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Oc.NO_ERROR,l=s.getStatus();if(!a||MV(l,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===Oc.ABORT;r(!1,new kc(!1,null,d));return}let u=this.successCodes_.indexOf(l)!==-1;r(!0,new kc(u,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());I7(l)?s(l):s()}catch(l){o(l)}else if(a!==null){let l=ZD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){let l=this.appDelete_?xV():SV();o(l)}else{let l=TV();o(l)}};this.canceled_?t(!1,new kc(!1,null,!0)):this.backoffId_=w7(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},kc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function D7(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function T7(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function S7(n,e){e&&(n["X-Firebase-GMPID"]=e)}function A7(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function x7(n,e,t,r,i,s,o=!0){let a=RV(n.urlParams),l=n.url+a,u=Object.assign({},n.headers);return S7(u,e),D7(u,t),T7(u,s),A7(u,r),new WD(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function R7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M7(...n){let e=R7();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(JD())return new Blob(n);throw new pt(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function N7(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function P7(n){if(typeof atob>"u")throw v7("base-64");return atob(n)}var Wn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Sh=class{constructor(e,t){this.data=e,this.contentType=t||null}};function eT(n,e){switch(n){case Wn.RAW:return new Sh(NV(e));case Wn.BASE64:case Wn.BASE64URL:return new Sh(PV(n,e));case Wn.DATA_URL:return new Sh(O7(e),F7(e))}throw ZD()}function NV(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function k7(n){let e;try{e=decodeURIComponent(n)}catch{throw Th(Wn.DATA_URL,"Malformed data URL.")}return NV(e)}function PV(n,e){switch(n){case Wn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Th(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Th(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=P7(e)}catch(i){throw i.message.includes("polyfill")?i:Th(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var ty=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Th(Wn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=L7(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function O7(n){let e=new ty(n);return e.base64?PV(Wn.BASE64,e.rest):k7(e.rest)}function F7(n){return new ty(n).contentType}function L7(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Fc=class n{constructor(e,t){let r=0,i="";mV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(mV(this.data_)){let r=this.data_,i=N7(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(JD()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(M7.apply(null,t))}else{let t=e.map(o=>ny(o)?eT(Wn.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function tT(n){let e;try{e=JSON.parse(n)}catch{return null}return b7(e)?e:null}function V7(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function j7(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function kV(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function U7(n,e){return e}var nn=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||U7}},ey=null;function B7(n){return!ny(n)||n.length<2?n:kV(n)}function ry(){if(ey)return ey;let n=[];n.push(new nn("bucket")),n.push(new nn("generation")),n.push(new nn("metageneration")),n.push(new nn("name","fullPath",!0));function e(s,o){return B7(o)}let t=new nn("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new nn("size");return i.xform=r,n.push(i),n.push(new nn("timeCreated")),n.push(new nn("updated")),n.push(new nn("md5Hash",null,!0)),n.push(new nn("cacheControl",null,!0)),n.push(new nn("contentDisposition",null,!0)),n.push(new nn("contentEncoding",null,!0)),n.push(new nn("contentLanguage",null,!0)),n.push(new nn("contentType",null,!0)),n.push(new nn("metadata","customMetadata",!0)),ey=n,ey}function $7(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new Dn(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function H7(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return $7(r,n),r}function OV(n,e,t){let r=tT(e);return r===null?null:H7(n,r,t)}function q7(n,e,t,r){let i=tT(e);if(i===null||!ny(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let d=n.bucket,h=n.fullPath,g="/b/"+o(d)+"/o/"+o(h),m=oo(g,t,r),y=RV({alt:"media",token:u});return m+y})[0]}function nT(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var _V="prefixes",yV="items";function z7(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[_V])for(let i of t[_V]){let s=i.replace(/\/$/,""),o=n._makeStorageReference(new Dn(e,s));r.prefixes.push(o)}if(t[yV])for(let i of t[yV]){let s=n._makeStorageReference(new Dn(e,i.name));r.items.push(s)}return r}function G7(n,e,t){let r=tT(t);return r===null?null:z7(n,e,r)}var kr=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function gi(n){if(!n)throw ZD()}function iy(n,e){function t(r,i){let s=OV(n,i,e);return gi(s!==null),s}return t}function W7(n,e){function t(r,i){let s=G7(n,e,i);return gi(s!==null),s}return t}function K7(n,e){function t(r,i){let s=OV(n,i,e);return gi(s!==null),q7(s,i,n.host,n._protocol)}return t}function jc(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=h7():i=d7():t.getStatus()===402?i=u7(n.bucket):t.getStatus()===403?i=f7(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function sy(n){let e=jc(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=c7(n.path)),s.serverResponse=i.serverResponse,s}return t}function FV(n,e,t){let r=e.fullServerUrl(),i=oo(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new kr(i,s,iy(n,t),o);return a.errorHandler=sy(e),a}function Q7(n,e,t,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),a=oo(o,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new kr(a,l,W7(n,e.bucket),u);return d.urlParams=s,d.errorHandler=jc(e),d}function Y7(n,e,t){let r=e.fullServerUrl(),i=oo(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new kr(i,s,K7(n,t),o);return a.errorHandler=sy(e),a}function Z7(n,e,t,r){let i=e.fullServerUrl(),s=oo(i,n.host,n._protocol),o="PATCH",a=nT(t,r),l={"Content-Type":"application/json; charset=utf-8"},u=n.maxOperationRetryTime,d=new kr(s,o,iy(n,r),u);return d.headers=l,d.body=a,d.errorHandler=sy(e),d}function X7(n,e){let t=e.fullServerUrl(),r=oo(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(l,u){}let a=new kr(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=sy(e),a}function J7(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function LV(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=J7(null,e)),r}function eK(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let O="";for(let z=0;z<2;z++)O=O+Math.random().toString().slice(2);return O}let l=a();o["Content-Type"]="multipart/related; boundary="+l;let u=LV(e,r,i),d=nT(u,t),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+l+"--",m=Fc.getBlob(h,r,g);if(m===null)throw AV();let y={name:u.fullPath},C=oo(s,n.host,n._protocol),b="POST",V=n.maxUploadRetryTime,B=new kr(C,b,iy(n,t),V);return B.urlParams=y,B.headers=o,B.body=m.uploadData(),B.errorHandler=jc(e),B}var Lc=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function rT(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{gi(!1)}return gi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function tK(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o=LV(e,r,i),a={name:o.fullPath},l=oo(s,n.host,n._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=nT(o,t),g=n.maxUploadRetryTime;function m(C){rT(C);let b;try{b=C.getResponseHeader("X-Goog-Upload-URL")}catch{gi(!1)}return gi(ny(b)),b}let y=new kr(l,u,m,g);return y.urlParams=a,y.headers=d,y.body=h,y.errorHandler=jc(e),y}function nK(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function s(u){let d=rT(u,["active","final"]),h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gi(!1)}h||gi(!1);let g=Number(h);return gi(!isNaN(g)),new Lc(g,r.size(),d==="final")}let o="POST",a=n.maxUploadRetryTime,l=new kr(t,o,s,a);return l.headers=i,l.errorHandler=jc(e),l}var vV=256*1024;function rK(n,e,t,r,i,s,o,a){let l=new Lc(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw _7();let u=l.total-l.current,d=u;i>0&&(d=Math.min(d,i));let h=l.current,g=h+d,m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";let y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},C=r.slice(h,g);if(C===null)throw AV();function b(z,oe){let J=rT(z,["active","final"]),I=l.current+d,v=r.size(),w;return J==="final"?w=iy(e,s)(z,oe):w=null,new Lc(I,v,J==="final",w)}let V="POST",B=e.maxUploadRetryTime,O=new kr(t,V,b,B);return O.headers=y,O.body=C.uploadData(),O.progressCallback=a||null,O.errorHandler=jc(n),O}var VV={STATE_CHANGED:"state_changed"},un={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qD(n){switch(n){case"running":case"pausing":case"canceling":return un.RUNNING;case"paused":return un.PAUSED;case"success":return un.SUCCESS;case"canceled":return un.CANCELED;case"error":return un.ERROR;default:return un.ERROR}}var KD=class{constructor(e,t,r){if(C7(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Pc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var wV=null,QD=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Dh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},YD=class extends QD{initXhr(){this.xhr_.responseType="text"}};function pi(){return wV?wV():new YD}var Ah=class{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ry(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(at.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(MV(i.status,[]))if(s)i=TV();else{this.sleepTime=Math.max(this.sleepTime*2,l7),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(at.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=tK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,pi,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=nK(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,pi,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=vV*this._chunkMultiplier,t=new Lc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=rK(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let a=this._ref.storage._makeRequest(o,pi,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){vV*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=FV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,pi,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=eK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,pi,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=SV(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=qD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let s=new KD(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(qD(this._state)){case un.SUCCESS:Pc(this._resolve.bind(null,this.snapshot))();break;case un.CANCELED:case un.ERROR:let t=this._reject;Pc(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qD(this._state)){case un.RUNNING:case un.PAUSED:e.next&&Pc(e.next.bind(e,this.snapshot))();break;case un.SUCCESS:e.complete&&Pc(e.complete.bind(e))();break;case un.CANCELED:case un.ERROR:e.error&&Pc(e.error.bind(e,this._error))();break;default:e.error&&Pc(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Vc=class n{constructor(e,t){this._service=e,t instanceof Dn?this._location=t:this._location=Dn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kV(this._location.path)}get storage(){return this._service}get parent(){let e=V7(this._location.path);if(e===null)return null;let t=new Dn(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XD(e)}};function iK(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ah(n,new Fc(e),t)}function sK(n){let e={prefixes:[],items:[]};return jV(n,e).then(()=>e)}function jV(n,e,t){return N(this,null,function*(){let i=yield UV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield jV(n,e,i.nextPageToken))})}function UV(n,e){e!=null&&typeof e.maxResults=="number"&&GD("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=Q7(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,pi)}function oK(n){n._throwIfRoot("getMetadata");let e=FV(n.storage,n._location,ry());return n.storage.makeRequestWithTokens(e,pi)}function aK(n,e){n._throwIfRoot("updateMetadata");let t=Z7(n.storage,n._location,e,ry());return n.storage.makeRequestWithTokens(t,pi)}function lK(n){n._throwIfRoot("getDownloadURL");let e=Y7(n.storage,n._location,ry());return n.storage.makeRequestWithTokens(e,pi).then(t=>{if(t===null)throw y7();return t})}function cK(n){n._throwIfRoot("deleteObject");let e=X7(n.storage,n._location);return n.storage.makeRequestWithTokens(e,pi)}function BV(n,e){let t=j7(n._location.path,e),r=new Dn(n._location.bucket,t);return new Vc(n.storage,r)}function uK(n){return/^[A-Za-z]+:\/\//.test(n)}function dK(n,e){return new Vc(n,e)}function $V(n,e){if(n instanceof xh){let t=n;if(t._bucket==null)throw m7();let r=new Vc(t,t._bucket);return e!=null?$V(r,e):r}else return e!==void 0?BV(n,e):n}function hK(n,e){if(e&&uK(e)){if(n instanceof xh)return dK(n,e);throw Ea("To use ref(service, url), the first argument must be a Storage instance.")}else return $V(n,e)}function EV(n,e){let t=e?.[DV];return t==null?null:Dn.makeFromBucketSpec(t,n)}function fK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:La(i,n.app.options.projectId))}var xh=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=bV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o7,this._maxUploadRetryTime=a7,this._requests=new Set,i!=null?this._bucket=Dn.makeFromBucketSpec(i,this._host):this._bucket=EV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=EV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){GD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){GD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return N(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return N(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new zD(xV());{let o=x7(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return N(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},IV="@firebase/storage",CV="0.13.2";var pK="storage";function HV(n,e,t){return n=de(n),iK(n,e,t)}function qV(n){return n=de(n),oK(n)}function zV(n,e){return n=de(n),aK(n,e)}function GV(n,e){return n=de(n),UV(n,e)}function WV(n){return n=de(n),sK(n)}function KV(n){return n=de(n),lK(n)}function QV(n){return n=de(n),cK(n)}function iT(n,e){return n=de(n),hK(n,e)}function YV(n,e){return BV(n,e)}function ZV(n,e,t,r={}){fK(n,e,t,r)}function gK(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xh(t,r,i,e,Va)}function mK(){bi(new Kt(pK,gK,"PUBLIC").setMultipleInstances(!0)),Rn(IV,CV,""),Rn(IV,CV,"esm2017")}mK();var Uc=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var oy=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Uc(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Uc(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(typeof t=="function"?s=o=>t(new Uc(o,this,this._ref)):s={next:t.next?o=>t.next(new Uc(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}},ay=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ia(e,this._service))}get items(){return this._delegate.items.map(e=>new Ia(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Ia=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=YV(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new oy(HV(this._delegate,e,t),this)}putString(e,t=Wn.RAW,r){this._throwIfRoot("putString");let i=eT(t,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new oy(new Ah(this._delegate,new Fc(i.data,!0),s),this)}listAll(){return WV(this._delegate).then(e=>new ay(e,this.storage))}list(e){return GV(this._delegate,e||void 0).then(t=>new ay(t,this.storage))}getMetadata(){return qV(this._delegate)}updateMetadata(e){return zV(this._delegate,e)}getDownloadURL(){return KV(this._delegate)}delete(){return this._throwIfRoot("delete"),QV(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw XD(e)}};var ly=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XV(e))throw Ea("ref() expected a child path but got a URL, use refFromURL instead.");return new Ia(iT(this._delegate,e),this)}refFromURL(e){if(!XV(e))throw Ea("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Dn.makeFromUrl(e,this._delegate.host)}catch{throw Ea("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ia(iT(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){ZV(this._delegate,e,t,r)}};function XV(n){return/^[A-Za-z]+:\/\//.test(n)}var _K="@firebase/storage-compat",yK="0.3.12";var vK="storage-compat";function wK(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ly(t,r)}function EK(n){let e={TaskState:un,TaskEvent:VV,StringFormat:Wn,Storage:ly,Reference:Ia};n.INTERNAL.registerComponent(new Kt(vK,wK,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(_K,yK)}EK(ct);function IK(n){return new ve(e=>{let t=o=>e.next(o),r=o=>e.error(o),i=()=>e.complete();t(n.snapshot);let s=n.on("state_changed",t);return n.then(o=>{t(o),i()},o=>{t(n.snapshot),r(o)}),function(){s()}}).pipe(Jv(0))}function JV(n){let e=IK(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(re(t=>t.bytesTransferred/t.totalBytes*100))}}function cy(n){return{getDownloadURL:()=>se(void 0).pipe(DI,qe(()=>n.getDownloadURL()),st),getMetadata:()=>se(void 0).pipe(DI,qe(()=>n.getMetadata()),st),delete:()=>be(n.delete()),child:e=>cy(n.child(e)),updateMetadata:e=>be(n.updateMetadata(e)),put:(e,t)=>{let r=n.put(e,t);return JV(r)},putString:(e,t,r)=>{let i=n.putString(e,t,r);return JV(i)},list:e=>be(n.list(e)),listAll:()=>be(n.listAll())}}var CK=new K("angularfire2.storageBucket"),bK=new K("angularfire2.storage.maxUploadRetryTime"),DK=new K("angularfire2.storage.maxOperationRetryTime"),TK=new K("angularfire2.storage.use-emulator"),SK=(()=>{class n{storage;constructor(t,r,i,s,o,a,l,u,d,h){let g=qi(t,o,r);this.storage=js(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{let m=o.runOutsideAngular(()=>g.storage(i||void 0)),y=d;return y&&m.useEmulator(...y),l&&m.setMaxUploadRetryTime(l),u&&m.setMaxOperationRetryTime(u),m},[l,u])}ref(t){return cy(this.storage.ref(t))}refFromURL(t){return cy(this.storage.refFromURL(t))}upload(t,r,i){let s=this.storage.ref(t);return cy(s).put(r,i)}static \u0275fac=function(r){return new(r||n)(L(ni),L(ri,8),L(CK,8),L(Bt),L(De),L(Ls),L(bK,8),L(DK,8),L(TK,8),L(Tr,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var AK=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ze({})}return n})(),e2=(()=>{class n{constructor(){ct.registerVersion("angularfire",Sr.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ze({providers:[SK],imports:[AK]})}return n})();var t2="@firebase/database",n2="1.0.8";var mS="";function _S(n){mS=n}var hT=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),St(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Mf(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var fT=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Xn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var P2=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hT(e)}}catch{}return new fT},ba=P2("localStorage"),pT=P2("sessionStorage");var qc=new ls("@firebase/database"),k2=function(){let n=1;return function(){return n++}}(),O2=function(n){let e=dx(n),t=new ux;t.update(e);let r=t.digest();return Af.encodeByteArray(r)},Jh=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jh.apply(null,r):typeof r=="object"?e+=St(r):e+=r,e+=" "}return e},Da=null,r2=!0,F2=function(n,e){H(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(qc.logLevel=Jn.VERBOSE,Da=qc.log.bind(qc),e&&pT.set("logging_enabled",!0)):typeof n=="function"?Da=n:(Da=null,pT.remove("logging_enabled"))},zt=function(...n){if(r2===!0&&(r2=!1,Da===null&&pT.get("logging_enabled")===!0&&F2(!0)),Da){let e=Jh.apply(null,n);Da(e)}},ef=function(n){return function(...e){zt(n,...e)}},gT=function(...n){let e="FIREBASE INTERNAL ERROR: "+Jh(...n);qc.error(e)},yi=function(...n){let e=`FIREBASE FATAL ERROR: ${Jh(...n)}`;throw qc.error(e),new Error(e)},dn=function(...n){let e="FIREBASE WARNING: "+Jh(...n);qc.warn(e)},xK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&dn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ly=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},RK=function(n){if(Lr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},uo="[MIN_NAME]",ts="[MAX_NAME]",Sa=function(n,e){if(n===e)return 0;if(n===uo||e===ts)return-1;if(e===uo||n===ts)return 1;{let t=i2(n),r=i2(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},MK=function(n,e){return n===e?0:n<e?-1:1},Rh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+St(e))},yS=function(n){if(typeof n!="object"||n===null)return St(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=St(e[r]),t+=":",t+=yS(n[e[r]]);return t+="}",t},L2=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Gt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var V2=function(n){H(!Ly(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(l=t;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let d=u.join(""),h="";for(l=0;l<64;l+=8){let g=parseInt(d.substr(l,8),2).toString(16);g.length===1&&(g="0"+g),h=h+g}return h.toLowerCase()},NK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kK(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var OK=new RegExp("^-?(0*)\\d{1,10}$"),FK=-2147483648,LK=2147483647,i2=function(n){if(OK.test(n)){let e=Number(n);if(e>=FK&&e<=LK)return e}return null},Jc=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw dn("Exception was thrown by user callback.",t),e},Math.floor(0))}},VK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kh=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var mT=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){dn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var _T=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dn(e)}},Oh=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),dy="5",j2="v",U2="s",B2="r",$2="f",H2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q2="ls",z2="p",yT="ac",G2="websocket",W2="long_polling";var hy=class{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ba.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ba.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function jK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function K2(n,e,t){H(typeof e=="string","typeof type must == string"),H(typeof t=="object","typeof params must == object");let r;if(e===G2)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===W2)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jK(n)&&(t.ns=n.namespace);let i=[];return Gt(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var vT=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Xn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ix(this.counters_)}};var sT={},oT={};function vS(n){let e=n.toString();return sT[e]||(sT[e]=new vT),sT[e]}function UK(n,e){let t=n.toString();return oT[t]||(oT[t]=e()),oT[t]}var wT=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Jc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var s2="start",BK="close",$K="pLPCommand",HK="pRTLPCB",Q2="id",Y2="pw",Z2="ser",qK="cb",zK="seg",GK="ts",WK="d",KK="dframe",X2=1870,J2=30,QK=X2-J2,YK=25e3,ZK=3e4,jh=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ef(e),this.stats_=vS(t),this.urlFn=l=>(this.appCheckToken&&(l[yT]=this.appCheckToken),K2(t,W2,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZK)),RK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ET((...s)=>{let[o,a,l,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===s2)this.id=a,this.password=l;else if(o===BK)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[s2]="t",r[Z2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[qK]=this.scriptTagHolder.uniqueCallbackIdentifier),r[j2]=dy,this.transportSessionId&&(r[U2]=this.transportSessionId),this.lastSessionId&&(r[q2]=this.lastSessionId),this.applicationId&&(r[z2]=this.applicationId),this.appCheckToken&&(r[yT]=this.appCheckToken),typeof location<"u"&&location.hostname&&H2.test(location.hostname)&&(r[B2]=$2);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Lr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!NK()&&!PK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=St(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=rx(t),i=L2(r,QK);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Lr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[KK]="t",r[Q2]=e,r[Y2]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=St(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},ET=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Lr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=k2(),window[$K+this.uniqueCallbackIdentifier]=e,window[HK+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){zt("frame writing exception"),a.stack&&zt(a.stack),zt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Q2]=this.myID,e[Y2]=this.myPW,e[Z2]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+J2+r.length<=X2;){let o=this.pendingSegs.shift();r=r+"&"+zK+i+"="+o.seg+"&"+GK+i+"="+o.ts+"&"+WK+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(YK)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Lr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var XK=16384,JK=45e3,fy=null;typeof MozWebSocket<"u"?fy=MozWebSocket:typeof WebSocket<"u"&&(fy=WebSocket);var $c=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ef(this.connId),this.stats_=vS(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[j2]=dy,!Lr()&&typeof location<"u"&&location.hostname&&H2.test(location.hostname)&&(a[B2]=$2),r&&(a[U2]=r),i&&(a[q2]=i),s&&(a[yT]=s),o&&(a[z2]=o),K2(t,G2,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ba.set("previous_websocket_failure",!0);try{let i;if(Lr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${dy}/${mS}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new fy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&fy!==null&&!n.forceDisallow_}static previouslyFailed(){return ba.isInMemoryStorage||ba.get("previous_websocket_failure")===!0}markConnectionHealthy(){ba.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Mf(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(H(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=St(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=L2(r,XK);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JK))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),ej=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[jh,$c]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=$c&&$c.isAvailable(),i=r&&!$c.previouslyFailed();if(t.webSocketOnly&&(r||dn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$c];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),eQ=6e4,tQ=5e3,nQ=10*1024,rQ=100*1024,aT="t",o2="d",iQ="s",a2="r",sQ="e",l2="o",c2="a",u2="n",d2="p",oQ="h",IT=class{constructor(e,t,r,i,s,o,a,l,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ef("c:"+this.id+":"),this.transportManager_=new ej(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=kh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rQ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nQ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(aT in e){let t=e[aT];t===c2?this.upgradeIfSecondaryHealthy_():t===a2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===l2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Rh("t",e),r=Rh("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:d2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:c2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:u2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Rh("t",e),r=Rh("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Rh(aT,e);if(o2 in e){let r=e[o2];if(t===oQ){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===u2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===iQ?this.onConnectionShutdown_(r):t===a2?this.onReset_(r):t===sQ?gT("Server Error: "+r):t===l2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gT("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dy!==r&&dn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),kh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eQ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tQ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:d2,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ba.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var py=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var gy=class{constructor(e){this.allowedEvents_=e,this.listeners_={},H(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){H(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var my=class n extends gy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Av()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return H(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var h2=32,f2=768,Fe=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Oe(){return new Fe("")}function Ie(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ho(n){return n.pieces_.length-n.pieceNum_}function Ye(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Fe(n.pieces_,e)}function wS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function aQ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Uh(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function tj(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Fe(e,0)}function lt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Fe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Fe(t,0)}function Ce(n){return n.pieceNum_>=n.pieces_.length}function Tn(n,e){let t=Ie(n),r=Ie(e);if(t===null)return e;if(t===r)return Tn(Ye(n),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lQ(n,e){let t=Uh(n,0),r=Uh(e,0);for(let i=0;i<t.length&&i<r.length;i++){let s=Sa(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function ES(n,e){if(ho(n)!==ho(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function fr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ho(n)>ho(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var CT=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Uh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Du(this.parts_[r]);nj(this)}};function cQ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Du(e),nj(n)}function uQ(n){let e=n.parts_.pop();n.byteLength_-=Du(e),n.parts_.length>0&&(n.byteLength_-=1)}function nj(n){if(n.byteLength_>f2)throw new Error(n.errorPrefix_+"has a key path longer than "+f2+" bytes ("+n.byteLength_+").");if(n.parts_.length>h2)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+h2+") or object contains a cycle "+Ca(n))}function Ca(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var bT=class n extends gy{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return H(e==="visible","Unknown event type: "+e),[this.visible_]}};var Mh=1e3,dQ=60*5*1e3,p2=30*1e3,hQ=1.3,fQ=3e4,pQ="server_kill",g2=3,IS=(()=>{class n extends py{constructor(t,r,i,s,o,a,l,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=ef("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mh,this.maxReconnectDelay_=dQ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Lr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bT.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&my.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(St(o)),H(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Ut,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),H(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),H(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let u=l.d,d=l.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Xn(t,"w")){let i=as(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();dn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||lx(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=p2)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=ax(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),H(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+St(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):gT("Unrecognized action received from server: "+St(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){H(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Mh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fQ&&(this.reconnectDelay_=Mh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hQ)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,u=function(){l?l.close():(a=!0,i())},d=function(g){H(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(g)};this.realtime_={close:u,sendRequest:d};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,m]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=m&&m.token,l=new IT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,y=>{dn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(pQ)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&dn(g),u())}}})}interrupt(t){zt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Nf(this.interruptReasons_)&&(this.reconnectDelay_=Mh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>yS(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Fe(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){zt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=g2&&(this.reconnectDelay_=p2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=g2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Lr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+mS.replace(/\./g,"-")]=1,Av()?t["framework.cordova"]=1:sx()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=my.getInstance().currentlyOnline();return Nf(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Te=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var zc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Te(uo,e),i=new Te(uo,t);return this.compare(r,i)!==0}minPost(){return Te.MIN}};var uy,_y=class extends zc{static get __EMPTY_NODE(){return uy}static set __EMPTY_NODE(e){uy=e}compare(e,t){return Sa(e.name,t.name)}isDefinedOn(e){throw Fa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Te.MIN}maxPost(){return new Te(ts,uy)}makePost(e,t){return H(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,uy)}toString(){return".key"}},_i=new _y;var Hc=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Or=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??pr.EMPTY_NODE,this.right=o??pr.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return pr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),DT=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Or(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},pr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Or.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Or.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Hc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Hc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Hc(this.root_,null,this.comparator_,!0,e)}};pr.EMPTY_NODE=new DT;function gQ(n,e){return Sa(n.name,e.name)}function CS(n,e){return Sa(n,e)}var TT;function mQ(n){TT=n}var rj=function(n){return typeof n=="number"?"number:"+V2(n):"string:"+n},ij=function(n){if(n.isLeafNode()){let e=n.val();H(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Xn(e,".sv"),"Priority must be a string or number.")}else H(n===TT||n.isEmpty(),"priority of unexpected type.");H(n===TT||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var m2,Gc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,H(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ij(this.priorityNode_)}static set __childrenNodeConstructor(t){m2=t}static get __childrenNodeConstructor(){return m2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ce(t)?this:Ie(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Ie(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(H(i!==".priority"||ho(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rj(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=V2(this.value_):t+=this.value_,this.lazyHash_=O2(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(H(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return H(s>=0,"Unknown leaf type: "+r),H(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),sj,oj;function _Q(n){sj=n}function yQ(n){oj=n}var ST=class extends zc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Sa(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(ts,new Gc("[PRIORITY-POST]",oj))}makePost(e,t){let r=sj(e);return new Te(t,new Gc("[PRIORITY-POST]",r))}toString(){return".priority"}},tt=new ST;var vQ=Math.log(2),AT=class{constructor(e){let t=s=>parseInt(Math.log(s)/vQ,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},yy=function(n,e,t,r){n.sort(e);let i=function(l,u){let d=u-l,h,g;if(d===0)return null;if(d===1)return h=n[l],g=t?t(h):h,new Or(g,h.node,Or.BLACK,null,null);{let m=parseInt(d/2,10)+l,y=i(l,m),C=i(m+1,u);return h=n[m],g=t?t(h):h,new Or(g,h.node,Or.BLACK,y,C)}},s=function(l){let u=null,d=null,h=n.length,g=function(y,C){let b=h-y,V=h;h-=y;let B=i(b+1,V),O=n[b],z=t?t(O):O;m(new Or(z,O.node,C,null,B))},m=function(y){u?(u.left=y,u=y):(d=y,u=y)};for(let y=0;y<l.count;++y){let C=l.nextBitIsOne(),b=Math.pow(2,l.count-(y+1));C?g(b,Or.BLACK):(g(b,Or.BLACK),g(b,Or.RED))}return d},o=new AT(n.length),a=s(o);return new pr(r||e,a)};var lT,Bc={},Wc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return H(Bc&&tt,"ChildrenNode.ts has not been loaded"),lT=lT||new n({".priority":Bc},{".priority":tt}),lT}get(e){let t=as(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof pr?t:null}hasIndex(e){return Xn(this.indexSet_,e.toString())}addIndex(e,t){H(e!==_i,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Te.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=yy(r,e.getCompare()):a=Bc;let l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new n(d,u)}addToIndexes(e,t){let r=bu(this.indexes_,(i,s)=>{let o=as(this.indexSet_,s);if(H(o,"Missing index implementation for "+s),i===Bc)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(Te.Wrap),u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),yy(a,o.getCompare())}else return Bc;else{let a=t.get(e.name),l=i;return a&&(l=l.remove(new Te(e.name,a))),l.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=bu(this.indexes_,i=>{if(i===Bc)return i;{let s=t.get(e.name);return s?i.remove(new Te(e.name,s)):i}});return new n(r,this.indexSet_)}};var Nh,me=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ij(this.priorityNode_),this.children_.isEmpty()&&H(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Nh||(Nh=new n(new pr(CS),null,Wc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nh}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Nh:r}}getChild(t){let r=Ie(t);return r===null?this:this.getImmediateChild(r).getChild(Ye(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(H(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Te(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Nh:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Ie(t);if(i===null)return r;{H(Ie(t)!==".priority"||ho(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ye(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(tt,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+rj(this.getPriority().val())+":"),this.forEachChild(tt,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":O2(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Te(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Te(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Te(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tf?-1:0}withIndex(t){if(t===_i||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===_i||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(tt),s=r.getIterator(tt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===_i?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),xT=class extends me{constructor(){super(new pr(CS),me.EMPTY_NODE,Wc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return me.EMPTY_NODE}isEmpty(){return!1}},tf=new xT;Object.defineProperties(Te,{MIN:{value:new Te(uo,me.EMPTY_NODE)},MAX:{value:new Te(ts,tf)}});_y.__EMPTY_NODE=me.EMPTY_NODE;Gc.__childrenNodeConstructor=me;mQ(tf);yQ(tf);var wQ=!0;function gt(n,e=null){if(n===null)return me.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),H(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Gc(t,gt(e))}if(!(n instanceof Array)&&wQ){let t=[],r=!1;if(Gt(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=gt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Te(o,l)))}}),t.length===0)return me.EMPTY_NODE;let s=yy(t,gQ,o=>o.name,CS);if(r){let o=yy(t,tt.getCompare());return new me(s,gt(e),new Wc({".priority":o},{".priority":tt}))}else return new me(s,gt(e),Wc.Default)}else{let t=me.EMPTY_NODE;return Gt(n,(r,i)=>{if(Xn(n,r)&&r.substring(0,1)!=="."){let s=gt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(gt(e))}}_Q(gt);var Bh=class extends zc{constructor(e){super(),this.indexPath_=e,H(!Ce(e)&&Ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Sa(e.name,t.name):s}makePost(e,t){let r=gt(e),i=me.EMPTY_NODE.updateChild(this.indexPath_,r);return new Te(t,i)}maxPost(){let e=me.EMPTY_NODE.updateChild(this.indexPath_,tf);return new Te(ts,e)}toString(){return Uh(this.indexPath_,0).join("/")}};var RT=class extends zc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Sa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,t){let r=gt(e);return new Te(t,r)}toString(){return".value"}},bS=new RT;function aj(n){return{type:"value",snapshotNode:n}}function Kc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $h(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Hh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function EQ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var qh=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){H(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange($h(t,a)):H(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Kc(t,r)):o.trackChildChange(Hh(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tt,(i,s)=>{t.hasChild(i)||r.trackChildChange($h(i,s))}),t.isLeafNode()||t.forEachChild(tt,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Hh(i,s,o))}else r.trackChildChange(Kc(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?me.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var vy=class n{constructor(e){this.indexedFilter_=new qh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Te(t,r))||(r=me.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=me.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(me.EMPTY_NODE);let s=this;return t.forEachChild(tt,(o,a)=>{s.matches(new Te(o,a))||(i=i.updateImmediateChild(o,me.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var MT=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Te(t,r))||(r=me.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=me.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=me.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(me.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,me.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let h=this.index_.getCompare();o=(g,m)=>h(m,g)}else o=this.index_.getCompare();let a=e;H(a.numChildren()===this.limit_,"");let l=new Te(t,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){let h=a.getImmediateChild(t),g=i.getChildAfterChild(this.index_,u,this.reverse_);for(;g!=null&&(g.name===t||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);let m=g==null?1:o(g,l);if(d&&!r.isEmpty()&&m>=0)return s?.trackChildChange(Hh(t,r,h)),a.updateImmediateChild(t,r);{s?.trackChildChange($h(t,h));let C=a.updateImmediateChild(t,me.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Kc(g.name,g.node)),C.updateImmediateChild(g.name,g.node)):C}}else return r.isEmpty()?e:d&&o(u,l)>=0?(s!=null&&(s.trackChildChange($h(u.name,u.node)),s.trackChildChange(Kc(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,me.EMPTY_NODE)):e}};var zh=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return H(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return H(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uo}hasEnd(){return this.endSet_}getIndexEndValue(){return H(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return H(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return H(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function IQ(n){return n.loadsAllData()?new qh(n.getIndex()):n.hasLimit()?new MT(n):new vy(n)}function CQ(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function bQ(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function NT(n,e,t){let r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function DQ(n,e,t){let r;return n.index_===_i||t?r=NT(n,e,t):r=NT(n,e,ts),r.startAfterSet_=!0,r}function PT(n,e,t){let r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function TQ(n,e,t){let r;return n.index_===_i||t?r=PT(n,e,t):r=PT(n,e,uo),r.endBeforeSet_=!0,r}function Vy(n,e){let t=n.copy();return t.index_=e,t}function _2(n){let e={};if(n.isDefault())return e;let t;if(n.index_===tt?t="$priority":n.index_===bS?t="$value":n.index_===_i?t="$key":(H(n.index_ instanceof Bh,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=St(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=St(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+St(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=St(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+St(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function y2(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==tt&&(e.i=n.index_.toString()),e}var kT=class n extends py{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ef("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(H(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let l=_2(e._queryParams);this.restRequest_(s+".json",l,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),as(this.listens_,o)===a){let g;u?u===401?g="permission_denied":g="rest_error:"+u:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=_2(e._queryParams),r=e._path.toString(),i=new Ut;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cx(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Mf(a.responseText)}catch{dn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&dn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var OT=class{constructor(){this.rootNode_=me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function wy(){return{value:null,children:new Map}}function eu(n,e,t){if(Ce(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Ie(e);n.children.has(r)||n.children.set(r,wy());let i=n.children.get(r);e=Ye(e),eu(i,e,t)}}function FT(n,e){if(Ce(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(tt,(r,i)=>{eu(n,new Fe(r),i)}),FT(n,e)}}else if(n.children.size>0){let t=Ie(e);return e=Ye(e),n.children.has(t)&&FT(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function LT(n,e,t){n.value!==null?t(e,n.value):SQ(n,(r,i)=>{let s=new Fe(e.toString()+"/"+r);LT(i,s,t)})}function SQ(n,e){n.children.forEach((t,r)=>{e(r,t)})}var VT=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Gt(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var v2=10*1e3,AQ=30*1e3,xQ=5*60*1e3,jT=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new VT(e);let r=v2+(AQ-v2)*Math.random();kh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Gt(e,(i,s)=>{s>0&&Xn(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),kh(this.reportStats_.bind(this),Math.floor(Math.random()*2*xQ))}};var mi=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(mi||{});function DS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function TS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function SS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var UT=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=mi.ACK_USER_WRITE,this.source=DS()}operationForChild(e){if(Ce(this.path)){if(this.affectedTree.value!=null)return H(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Fe(e));return new n(Oe(),t,this.revert)}}else return H(Ie(this.path)===e,"operationForChild called for unrelated child."),new n(Ye(this.path),this.affectedTree,this.revert)}};var Ey=class n{constructor(e,t){this.source=e,this.path=t,this.type=mi.LISTEN_COMPLETE}operationForChild(e){return Ce(this.path)?new n(this.source,Oe()):new n(this.source,Ye(this.path))}};var Qc=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=mi.OVERWRITE}operationForChild(e){return Ce(this.path)?new n(this.source,Oe(),this.snap.getImmediateChild(e)):new n(this.source,Ye(this.path),this.snap)}};var Gh=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=mi.MERGE}operationForChild(e){if(Ce(this.path)){let t=this.children.subtree(new Fe(e));return t.isEmpty()?null:t.value?new Qc(this.source,Oe(),t.value):new n(this.source,Oe(),t)}else return H(Ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var vi=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;let t=Ie(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var BT=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function RQ(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(EQ(o.childName,o.snapshotNode))}),Ph(n,i,"child_removed",e,r,t),Ph(n,i,"child_added",e,r,t),Ph(n,i,"child_moved",s,r,t),Ph(n,i,"child_changed",e,r,t),Ph(n,i,"value",e,r,t),i}function Ph(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,l)=>NQ(n,a,l)),o.forEach(a=>{let l=MQ(n,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,n.query_))})})}function MQ(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function NQ(n,e,t){if(e.childName==null||t.childName==null)throw Fa("Should only compare child_ events.");let r=new Te(e.childName,e.snapshotNode),i=new Te(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function jy(n,e){return{eventCache:n,serverCache:e}}function Fh(n,e,t,r){return jy(new vi(e,t,r),n.serverCache)}function lj(n,e,t,r){return jy(n.eventCache,new vi(e,t,r))}function Iy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ta(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var cT,PQ=()=>(cT||(cT=new pr(MK)),cT),Sn=class n{constructor(e,t=PQ()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Gt(e,(r,i)=>{t=t.set(new Fe(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Oe(),value:this.value};if(Ce(e))return null;{let r=Ie(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ye(e),t);return s!=null?{path:lt(new Fe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ce(e))return this;{let t=Ie(e),r=this.children.get(t);return r!==null?r.subtree(Ye(e)):new n(null)}}set(e,t){if(Ce(e))return new n(t,this.children);{let r=Ie(e),s=(this.children.get(r)||new n(null)).set(Ye(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(Ce(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Ie(e),r=this.children.get(t);if(r){let i=r.remove(Ye(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(Ce(e))return this.value;{let t=Ie(e),r=this.children.get(t);return r?r.get(Ye(e)):null}}setTree(e,t){if(Ce(e))return t;{let r=Ie(e),s=(this.children.get(r)||new n(null)).setTree(Ye(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Oe(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(lt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Oe(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Ce(e))return null;{let s=Ie(e),o=this.children.get(s);return o?o.findOnPath_(Ye(e),lt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Oe(),t)}foreachOnPath_(e,t,r){if(Ce(e))return this;{this.value&&r(t,this.value);let i=Ie(e),s=this.children.get(i);return s?s.foreachOnPath_(Ye(e),lt(t,i),r):new n(null)}}foreach(e){this.foreach_(Oe(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Fr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Sn(null))}};function Lh(n,e,t){if(Ce(e))return new Fr(new Sn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Tn(i,e);return s=s.updateChild(o,t),new Fr(n.writeTree_.set(i,s))}else{let i=new Sn(t),s=n.writeTree_.setTree(e,i);return new Fr(s)}}}function $T(n,e,t){let r=n;return Gt(t,(i,s)=>{r=Lh(r,lt(e,i),s)}),r}function w2(n,e){if(Ce(e))return Fr.empty();{let t=n.writeTree_.setTree(e,new Sn(null));return new Fr(t)}}function HT(n,e){return Aa(n,e)!=null}function Aa(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Tn(t.path,e)):null}function E2(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(tt,(r,i)=>{e.push(new Te(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Te(r,i.value))}),e}function lo(n,e){if(Ce(e))return n;{let t=Aa(n,e);return t!=null?new Fr(new Sn(t)):new Fr(n.writeTree_.subtree(e))}}function qT(n){return n.writeTree_.isEmpty()}function Yc(n,e){return cj(Oe(),n.writeTree_,e)}function cj(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(H(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=cj(lt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(lt(n,".priority"),r)),t}}function Uy(n,e){return fj(e,n)}function kQ(n,e,t,r,i){H(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Lh(n.visibleWrites,e,t)),n.lastWriteId=r}function OQ(n,e,t,r){H(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=$T(n.visibleWrites,e,t),n.lastWriteId=r}function FQ(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function LQ(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);H(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&VQ(a,r.path)?i=!1:fr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return jQ(n),!0;if(r.snap)n.visibleWrites=w2(n.visibleWrites,r.path);else{let a=r.children;Gt(a,l=>{n.visibleWrites=w2(n.visibleWrites,lt(r.path,l))})}return!0}else return!1}function VQ(n,e){if(n.snap)return fr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&fr(lt(n.path,t),e))return!0;return!1}function jQ(n){n.visibleWrites=uj(n.allWrites,UQ,Oe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function UQ(n){return n.visible}function uj(n,e,t){let r=Fr.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)fr(t,o)?(a=Tn(t,o),r=Lh(r,a,s.snap)):fr(o,t)&&(a=Tn(o,t),r=Lh(r,Oe(),s.snap.getChild(a)));else if(s.children){if(fr(t,o))a=Tn(t,o),r=$T(r,a,s.children);else if(fr(o,t))if(a=Tn(o,t),Ce(a))r=$T(r,Oe(),s.children);else{let l=as(s.children,Ie(a));if(l){let u=l.getChild(Ye(a));r=Lh(r,Oe(),u)}}}else throw Fa("WriteRecord should have .snap or .children")}}return r}function dj(n,e,t,r,i){if(!r&&!i){let s=Aa(n.visibleWrites,e);if(s!=null)return s;{let o=lo(n.visibleWrites,e);if(qT(o))return t;if(t==null&&!HT(o,Oe()))return null;{let a=t||me.EMPTY_NODE;return Yc(o,a)}}}else{let s=lo(n.visibleWrites,e);if(!i&&qT(s))return t;if(!i&&t==null&&!HT(s,Oe()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(fr(u.path,e)||fr(e,u.path))},a=uj(n.allWrites,o,e),l=t||me.EMPTY_NODE;return Yc(a,l)}}}function BQ(n,e,t){let r=me.EMPTY_NODE,i=Aa(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=lo(n.visibleWrites,e);return t.forEachChild(tt,(o,a)=>{let l=Yc(lo(s,new Fe(o)),a);r=r.updateImmediateChild(o,l)}),E2(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=lo(n.visibleWrites,e);return E2(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function $Q(n,e,t,r,i){H(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=lt(e,t);if(HT(n.visibleWrites,s))return null;{let o=lo(n.visibleWrites,s);return qT(o)?i.getChild(t):Yc(o,i.getChild(t))}}function HQ(n,e,t,r){let i=lt(e,t),s=Aa(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=lo(n.visibleWrites,i);return Yc(o,r.getNode().getImmediateChild(t))}else return null}function qQ(n,e){return Aa(n.visibleWrites,e)}function zQ(n,e,t,r,i,s,o){let a,l=lo(n.visibleWrites,e),u=Aa(l,Oe());if(u!=null)a=u;else if(t!=null)a=Yc(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],h=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),m=g.getNext();for(;m&&d.length<i;)h(m,r)!==0&&d.push(m),m=g.getNext();return d}else return[]}function GQ(){return{visibleWrites:Fr.empty(),allWrites:[],lastWriteId:-1}}function Cy(n,e,t,r){return dj(n.writeTree,n.treePath,e,t,r)}function AS(n,e){return BQ(n.writeTree,n.treePath,e)}function I2(n,e,t,r){return $Q(n.writeTree,n.treePath,e,t,r)}function by(n,e){return qQ(n.writeTree,lt(n.treePath,e))}function WQ(n,e,t,r,i,s){return zQ(n.writeTree,n.treePath,e,t,r,i,s)}function xS(n,e,t){return HQ(n.writeTree,n.treePath,e,t)}function hj(n,e){return fj(lt(n.treePath,e),n.writeTree)}function fj(n,e){return{treePath:n,writeTree:e}}var zT=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;H(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),H(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Hh(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,$h(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Kc(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Hh(r,e.snapshotNode,i.oldSnap));else throw Fa("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var GT=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},pj=new GT,Wh=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new vi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xS(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ta(this.viewCache_),s=WQ(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function KQ(n){return{filter:n}}function QQ(n,e){H(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),H(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function YQ(n,e,t,r,i){let s=new zT,o,a;if(t.type===mi.OVERWRITE){let u=t;u.source.fromUser?o=WT(n,e,u.path,u.snap,r,i,s):(H(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ce(u.path),o=Dy(n,e,u.path,u.snap,r,i,a,s))}else if(t.type===mi.MERGE){let u=t;u.source.fromUser?o=XQ(n,e,u.path,u.children,r,i,s):(H(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=KT(n,e,u.path,u.children,r,i,a,s))}else if(t.type===mi.ACK_USER_WRITE){let u=t;u.revert?o=tY(n,e,u.path,r,i,s):o=JQ(n,e,u.path,u.affectedTree,r,i,s)}else if(t.type===mi.LISTEN_COMPLETE)o=eY(n,e,t.path,r,s);else throw Fa("Unknown operation type: "+t.type);let l=s.getChanges();return ZQ(e,o,l),{viewCache:o,changes:l}}function ZQ(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Iy(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(aj(Iy(e)))}}function gj(n,e,t,r,i,s){let o=e.eventCache;if(by(r,t)!=null)return e;{let a,l;if(Ce(t))if(H(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Ta(e),d=u instanceof me?u:me.EMPTY_NODE,h=AS(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{let u=Cy(r,Ta(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=Ie(t);if(u===".priority"){H(ho(t)===1,"Can't have a priority with additional path components");let d=o.getNode();l=e.serverCache.getNode();let h=I2(r,t,d,l);h!=null?a=n.filter.updatePriority(d,h):a=o.getNode()}else{let d=Ye(t),h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();let g=I2(r,t,o.getNode(),l);g!=null?h=o.getNode().getImmediateChild(u).updateChild(d,g):h=o.getNode().getImmediateChild(u)}else h=xS(r,u,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),u,h,d,i,s):a=o.getNode()}}return Fh(e,a,o.isFullyInitialized()||Ce(t),n.filter.filtersNodes())}}function Dy(n,e,t,r,i,s,o,a){let l=e.serverCache,u,d=o?n.filter:n.filter.getIndexedFilter();if(Ce(t))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){let m=l.getNode().updateChild(t,r);u=d.updateFullNode(l.getNode(),m,null)}else{let m=Ie(t);if(!l.isCompleteForPath(t)&&ho(t)>1)return e;let y=Ye(t),b=l.getNode().getImmediateChild(m).updateChild(y,r);m===".priority"?u=d.updatePriority(l.getNode(),b):u=d.updateChild(l.getNode(),m,b,y,pj,null)}let h=lj(e,u,l.isFullyInitialized()||Ce(t),d.filtersNodes()),g=new Wh(i,h,s);return gj(n,h,t,i,g,a)}function WT(n,e,t,r,i,s,o){let a=e.eventCache,l,u,d=new Wh(i,e,s);if(Ce(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Fh(e,u,!0,n.filter.filtersNodes());else{let h=Ie(t);if(h===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),l=Fh(e,u,a.isFullyInitialized(),a.isFiltered());else{let g=Ye(t),m=a.getNode().getImmediateChild(h),y;if(Ce(g))y=r;else{let C=d.getCompleteChild(h);C!=null?wS(g)===".priority"&&C.getChild(tj(g)).isEmpty()?y=C:y=C.updateChild(g,r):y=me.EMPTY_NODE}if(m.equals(y))l=e;else{let C=n.filter.updateChild(a.getNode(),h,y,g,d,o);l=Fh(e,C,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function C2(n,e){return n.eventCache.isCompleteForChild(e)}function XQ(n,e,t,r,i,s,o){let a=e;return r.foreach((l,u)=>{let d=lt(t,l);C2(e,Ie(d))&&(a=WT(n,a,d,u,i,s,o))}),r.foreach((l,u)=>{let d=lt(t,l);C2(e,Ie(d))||(a=WT(n,a,d,u,i,s,o))}),a}function b2(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function KT(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Ce(t)?u=r:u=new Sn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((h,g)=>{if(d.hasChild(h)){let m=e.serverCache.getNode().getImmediateChild(h),y=b2(n,m,g);l=Dy(n,l,new Fe(h),y,i,s,o,a)}}),u.children.inorderTraversal((h,g)=>{let m=!e.serverCache.isCompleteForChild(h)&&g.value===null;if(!d.hasChild(h)&&!m){let y=e.serverCache.getNode().getImmediateChild(h),C=b2(n,y,g);l=Dy(n,l,new Fe(h),C,i,s,o,a)}}),l}function JQ(n,e,t,r,i,s,o){if(by(i,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ce(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Dy(n,e,t,l.getNode().getChild(t),i,s,a,o);if(Ce(t)){let u=new Sn(null);return l.getNode().forEachChild(_i,(d,h)=>{u=u.set(new Fe(d),h)}),KT(n,e,t,u,i,s,a,o)}else return e}else{let u=new Sn(null);return r.foreach((d,h)=>{let g=lt(t,d);l.isCompleteForPath(g)&&(u=u.set(d,l.getNode().getChild(g)))}),KT(n,e,t,u,i,s,a,o)}}function eY(n,e,t,r,i){let s=e.serverCache,o=lj(e,s.getNode(),s.isFullyInitialized()||Ce(t),s.isFiltered());return gj(n,o,t,r,pj,i)}function tY(n,e,t,r,i,s){let o;if(by(r,t)!=null)return e;{let a=new Wh(r,e,i),l=e.eventCache.getNode(),u;if(Ce(t)||Ie(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Cy(r,Ta(e));else{let h=e.serverCache.getNode();H(h instanceof me,"serverChildren would be complete if leaf node"),d=AS(r,h)}d=d,u=n.filter.updateFullNode(l,d,s)}else{let d=Ie(t),h=xS(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?u=n.filter.updateChild(l,d,h,Ye(t),a,s):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(l,d,me.EMPTY_NODE,Ye(t),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Cy(r,Ta(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||by(r,Oe())!=null,Fh(e,u,o,n.filter.filtersNodes())}}var QT=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new qh(r.getIndex()),s=IQ(r);this.processor_=KQ(s);let o=t.serverCache,a=t.eventCache,l=i.updateFullNode(me.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(me.EMPTY_NODE,a.getNode(),null),d=new vi(l,o.isFullyInitialized(),i.filtersNodes()),h=new vi(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=jy(h,d),this.eventGenerator_=new BT(this.query_)}get query(){return this.query_}};function nY(n){return n.viewCache_.serverCache.getNode()}function rY(n){return Iy(n.viewCache_)}function iY(n,e){let t=Ta(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ce(e)&&!t.getImmediateChild(Ie(e)).isEmpty())?t.getChild(e):null}function D2(n){return n.eventRegistrations_.length===0}function sY(n,e){n.eventRegistrations_.push(e)}function T2(n,e,t){let r=[];if(t){H(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function S2(n,e,t,r){e.type===mi.MERGE&&e.source.queryId!==null&&(H(Ta(n.viewCache_),"We should always have a full cache before handling merges"),H(Iy(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=YQ(n.processor_,i,e,t,r);return QQ(n.processor_,s.viewCache),H(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,mj(n,s.changes,s.viewCache.eventCache.getNode(),null)}function oY(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(tt,(s,o)=>{r.push(Kc(s,o))}),t.isFullyInitialized()&&r.push(aj(t.getNode())),mj(n,r,t.getNode(),e)}function mj(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return RQ(n.eventGenerator_,e,t,i)}var Ty,Sy=class{constructor(){this.views=new Map}};function aY(n){H(!Ty,"__referenceConstructor has already been defined"),Ty=n}function lY(){return H(Ty,"Reference.ts has not been loaded"),Ty}function cY(n){return n.views.size===0}function RS(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return H(s!=null,"SyncTree gave us an op for an invalid query."),S2(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(S2(o,e,t,r));return s}}function _j(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Cy(t,i?r:null),l=!1;a?l=!0:r instanceof me?(a=AS(t,r),l=!1):(a=me.EMPTY_NODE,l=!1);let u=jy(new vi(a,l,!1),new vi(r,i,!1));return new QT(e,u)}return o}function uY(n,e,t,r,i,s){let o=_j(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),sY(o,t),oY(o,t)}function dY(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=fo(n);if(i==="default")for(let[l,u]of n.views.entries())o=o.concat(T2(u,t,r)),D2(u)&&(n.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{let l=n.views.get(i);l&&(o=o.concat(T2(l,t,r)),D2(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!fo(n)&&s.push(new(lY())(e._repo,e._path)),{removed:s,events:o}}function yj(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function co(n,e){let t=null;for(let r of n.views.values())t=t||iY(r,e);return t}function vj(n,e){if(e._queryParams.loadsAllData())return By(n);{let r=e._queryIdentifier;return n.views.get(r)}}function wj(n,e){return vj(n,e)!=null}function fo(n){return By(n)!=null}function By(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Ay;function hY(n){H(!Ay,"__referenceConstructor has already been defined"),Ay=n}function fY(){return H(Ay,"Reference.ts has not been loaded"),Ay}var pY=1,xy=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Sn(null),this.pendingWriteTree_=GQ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function MS(n,e,t,r,i){return kQ(n.pendingWriteTree_,e,t,r,i),i?tu(n,new Qc(DS(),e,t)):[]}function gY(n,e,t,r){OQ(n.pendingWriteTree_,e,t,r);let i=Sn.fromObject(t);return tu(n,new Gh(DS(),e,i))}function ao(n,e,t=!1){let r=FQ(n.pendingWriteTree_,e);if(LQ(n.pendingWriteTree_,e)){let s=new Sn(null);return r.snap!=null?s=s.set(Oe(),!0):Gt(r.children,o=>{s=s.set(new Fe(o),!0)}),tu(n,new UT(r.path,s,t))}else return[]}function nf(n,e,t){return tu(n,new Qc(TS(),e,t))}function mY(n,e,t){let r=Sn.fromObject(t);return tu(n,new Gh(TS(),e,r))}function _Y(n,e){return tu(n,new Ey(TS(),e))}function yY(n,e,t){let r=NS(n,t);if(r){let i=PS(r),s=i.path,o=i.queryId,a=Tn(s,e),l=new Ey(SS(o),a);return kS(n,s,l)}else return[]}function Ry(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||wj(o,e))){let l=dY(o,e,t,r);cY(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let u=l.removed;if(a=l.events,!i){let d=u.findIndex(g=>g._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(s,(g,m)=>fo(m));if(d&&!h){let g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){let m=EY(g);for(let y=0;y<m.length;++y){let C=m[y],b=C.query,V=bj(n,C);n.listenProvider_.startListening(Vh(b),Kh(n,b),V.hashFn,V.onComplete)}}}!h&&u.length>0&&!r&&(d?n.listenProvider_.stopListening(Vh(e),null):u.forEach(g=>{let m=n.queryToTagMap.get(Hy(g));n.listenProvider_.stopListening(Vh(g),m)}))}IY(n,u)}return a}function Ej(n,e,t,r){let i=NS(n,r);if(i!=null){let s=PS(i),o=s.path,a=s.queryId,l=Tn(o,e),u=new Qc(SS(a),l,t);return kS(n,o,u)}else return[]}function vY(n,e,t,r){let i=NS(n,r);if(i){let s=PS(i),o=s.path,a=s.queryId,l=Tn(o,e),u=Sn.fromObject(t),d=new Gh(SS(a),l,u);return kS(n,o,d)}else return[]}function YT(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(g,m)=>{let y=Tn(g,i);s=s||co(m,y),o=o||fo(m)});let a=n.syncPointTree_.get(i);a?(o=o||fo(a),s=s||co(a,Oe())):(a=new Sy,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=me.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((m,y)=>{let C=co(y,Oe());C&&(s=s.updateImmediateChild(m,C))}));let u=wj(a,e);if(!u&&!e._queryParams.loadsAllData()){let g=Hy(e);H(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");let m=CY();n.queryToTagMap.set(g,m),n.tagToQueryMap.set(m,g)}let d=Uy(n.pendingWriteTree_,i),h=uY(a,e,t,d,s,l);if(!u&&!o&&!r){let g=vj(a,e);h=h.concat(bY(n,e,g))}return h}function $y(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=Tn(o,e),u=co(a,l);if(u)return u});return dj(i,e,s,t,!0)}function wY(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(u,d)=>{let h=Tn(u,t);r=r||co(d,h)});let i=n.syncPointTree_.get(t);i?r=r||co(i,Oe()):(i=new Sy,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new vi(r,!0,!1):null,a=Uy(n.pendingWriteTree_,e._path),l=_j(i,e,a,s?o.getNode():me.EMPTY_NODE,s);return rY(l)}function tu(n,e){return Ij(e,n.syncPointTree_,null,Uy(n.pendingWriteTree_,Oe()))}function Ij(n,e,t,r){if(Ce(n.path))return Cj(n,e,t,r);{let i=e.get(Oe());t==null&&i!=null&&(t=co(i,Oe()));let s=[],o=Ie(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let u=t?t.getImmediateChild(o):null,d=hj(r,o);s=s.concat(Ij(a,l,u,d))}return i&&(s=s.concat(RS(i,n,r,t))),s}}function Cj(n,e,t,r){let i=e.get(Oe());t==null&&i!=null&&(t=co(i,Oe()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,u=hj(r,o),d=n.operationForChild(o);d&&(s=s.concat(Cj(d,a,l,u)))}),i&&(s=s.concat(RS(i,n,r,t))),s}function bj(n,e){let t=e.query,r=Kh(n,t);return{hashFn:()=>(nY(e)||me.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?yY(n,t._path,r):_Y(n,t._path);{let s=kK(i,t);return Ry(n,t,null,s)}}}}function Kh(n,e){let t=Hy(e);return n.queryToTagMap.get(t)}function Hy(n){return n._path.toString()+"$"+n._queryIdentifier}function NS(n,e){return n.tagToQueryMap.get(e)}function PS(n){let e=n.indexOf("$");return H(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Fe(n.substr(0,e))}}function kS(n,e,t){let r=n.syncPointTree_.get(e);H(r,"Missing sync point for query tag that we're tracking");let i=Uy(n.pendingWriteTree_,e);return RS(r,t,i,null)}function EY(n){return n.fold((e,t,r)=>{if(t&&fo(t))return[By(t)];{let i=[];return t&&(i=yj(t)),Gt(r,(s,o)=>{i=i.concat(o)}),i}})}function Vh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(fY())(n._repo,n._path):n}function IY(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Hy(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function CY(){return pY++}function bY(n,e,t){let r=e._path,i=Kh(n,e),s=bj(n,t),o=n.listenProvider_.startListening(Vh(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)H(!fo(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((u,d,h)=>{if(!Ce(u)&&d&&fo(d))return[By(d).query];{let g=[];return d&&(g=g.concat(yj(d).map(m=>m.query))),Gt(h,(m,y)=>{g=g.concat(y)}),g}});for(let u=0;u<l.length;++u){let d=l[u];n.listenProvider_.stopListening(Vh(d),Kh(n,d))}}return o}var ZT=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},XT=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=lt(this.path_,e);return new n(this.syncTree_,t)}node(){return $y(this.syncTree_,this.path_)}},DY=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},A2=function(n,e,t){if(!n||typeof n!="object")return n;if(H(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return TY(n[".sv"],e,t);if(typeof n[".sv"]=="object")return SY(n[".sv"],e);H(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},TY=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:H(!1,"Unexpected server value: "+n)}},SY=function(n,e,t){n.hasOwnProperty("increment")||H(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&H(!1,"Unexpected increment value: "+r);let i=e.node();if(H(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},Dj=function(n,e,t,r){return FS(e,new XT(t,n),r)},OS=function(n,e,t){return FS(n,new ZT(e),t)};function FS(n,e,t){let r=n.getPriority().val(),i=A2(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=A2(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Gc(a,gt(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Gc(i))),o.forEachChild(tt,(a,l)=>{let u=FS(l,e.getImmediateChild(a),t);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}var Qh=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function qy(n,e){let t=e instanceof Fe?e:new Fe(e),r=n,i=Ie(t);for(;i!==null;){let s=as(r.node.children,i)||{children:{},childCount:0};r=new Qh(i,r,s),t=Ye(t),i=Ie(t)}return r}function xa(n){return n.node.value}function LS(n,e){n.node.value=e,JT(n)}function Tj(n){return n.node.childCount>0}function AY(n){return xa(n)===void 0&&!Tj(n)}function zy(n,e){Gt(n.node.children,(t,r)=>{e(new Qh(t,n,r))})}function Sj(n,e,t,r){t&&!r&&e(n),zy(n,i=>{Sj(i,e,!0,r)}),t&&r&&e(n)}function xY(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function rf(n){return new Fe(n.parent===null?n.name:rf(n.parent)+"/"+n.name)}function JT(n){n.parent!==null&&RY(n.parent,n.name,n)}function RY(n,e,t){let r=AY(t),i=Xn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,JT(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,JT(n))}var MY=/[\[\].#$\/\u0000-\u001F\u007F]/,NY=/[\[\].#$\u0000-\u001F\u007F]/,uT=10*1024*1024,Gy=function(n){return typeof n=="string"&&n.length!==0&&!MY.test(n)},Aj=function(n){return typeof n=="string"&&n.length!==0&&!NY.test(n)},PY=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Aj(n)},Yh=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Ly(n)||n&&typeof n=="object"&&Xn(n,".sv")},wi=function(n,e,t,r){r&&e===void 0||sf(xn(n,"value"),e,t)},sf=function(n,e,t){let r=t instanceof Fe?new CT(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ca(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ca(r)+" with contents = "+e.toString());if(Ly(e))throw new Error(n+"contains "+e.toString()+" "+Ca(r));if(typeof e=="string"&&e.length>uT/3&&Du(e)>uT)throw new Error(n+"contains a string greater than "+uT+" utf8 bytes "+Ca(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Gt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Gy(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ca(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cQ(r,o),sf(n,a,r),uQ(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ca(r)+" in addition to actual children.")}},kY=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let s=Uh(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Gy(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(lQ);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&fr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},xj=function(n,e,t,r){if(r&&e===void 0)return;let i=xn(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];Gt(e,(o,a)=>{let l=new Fe(o);if(sf(i,a,lt(t,l)),wS(l)===".priority"&&!Yh(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),kY(i,s)},VS=function(n,e,t){if(!(t&&e===void 0)){if(Ly(e))throw new Error(xn(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Yh(e))throw new Error(xn(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},of=function(n,e,t,r){if(!(r&&t===void 0)&&!Gy(t))throw new Error(xn(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},nu=function(n,e,t,r){if(!(r&&t===void 0)&&!Aj(t))throw new Error(xn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},OY=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),nu(n,e,t,r)},Kn=function(n,e){if(Ie(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Rj=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Gy(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!PY(t))throw new Error(xn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var eS=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Wy(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!ES(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Mj(n,e,t){Wy(n,t),Nj(n,r=>ES(r,e))}function Qn(n,e,t){Wy(n,t),Nj(n,r=>fr(r,e)||fr(e,r))}function Nj(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(FY(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function FY(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Da&&zt("event: "+t.toString()),Jc(r)}}}var Pj="repo_interrupt",LY=25,tS=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wy(),this.transactionQueueTree_=new Qh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function VY(n,e,t){if(n.stats_=vS(n.repoInfo_),n.forceRestClient_||VK())n.server_=new kT(n.repoInfo_,(r,i,s,o)=>{x2(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>R2(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{St(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new IS(n.repoInfo_,e,(r,i,s,o)=>{x2(n,r,i,s,o)},r=>{R2(n,r)},r=>{jY(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=UK(n.repoInfo_,()=>new jT(n.stats_,n.server_)),n.infoData_=new OT,n.infoSyncTree_=new xy({startListening:(r,i,s,o)=>{let a=[],l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=nf(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),jS(n,"connected",!1),n.serverSyncTree_=new xy({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{let u=o(a,l);Qn(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function kj(n){let t=n.infoData_.getNode(new Fe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function af(n){return DY({timestamp:kj(n)})}function x2(n,e,t,r,i){n.dataUpdateCount++;let s=new Fe(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let l=bu(t,u=>gt(u));o=vY(n.serverSyncTree_,s,l,i)}else{let l=gt(t);o=Ej(n.serverSyncTree_,s,l,i)}else if(r){let l=bu(t,u=>gt(u));o=mY(n.serverSyncTree_,s,l)}else{let l=gt(t);o=nf(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Zc(n,s)),Qn(n.eventQueue_,a,o)}function R2(n,e){jS(n,"connected",e),e===!1&&$Y(n)}function jY(n,e){Gt(e,(t,r)=>{jS(n,t,r)})}function jS(n,e,t){let r=new Fe("/.info/"+e),i=gt(t);n.infoData_.updateSnapshot(r,i);let s=nf(n.infoSyncTree_,r,i);Qn(n.eventQueue_,r,s)}function Ky(n){return n.nextWriteId_++}function UY(n,e,t){let r=wY(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=gt(i).withIndex(e._queryParams.getIndex());YT(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=nf(n.serverSyncTree_,e._path,s);else{let a=Kh(n.serverSyncTree_,e);o=Ej(n.serverSyncTree_,e._path,s,a)}return Qn(n.eventQueue_,e._path,o),Ry(n.serverSyncTree_,e,t,null,!0),s},i=>(ru(n,"get for query "+St(e)+" failed: "+i),Promise.reject(new Error(i))))}function US(n,e,t,r,i){ru(n,"set",{path:e.toString(),value:t,priority:r});let s=af(n),o=gt(t,r),a=$y(n.serverSyncTree_,e),l=OS(o,a,s),u=Ky(n),d=MS(n.serverSyncTree_,e,l,u,!0);Wy(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(g,m)=>{let y=g==="ok";y||dn("set at "+e+" failed: "+g);let C=ao(n.serverSyncTree_,u,!y);Qn(n.eventQueue_,e,C),po(n,i,g,m)});let h=$S(n,e);Zc(n,h),Qn(n.eventQueue_,h,[])}function BY(n,e,t,r){ru(n,"update",{path:e.toString(),value:t});let i=!0,s=af(n),o={};if(Gt(t,(a,l)=>{i=!1,o[a]=Dj(lt(e,a),gt(l),n.serverSyncTree_,s)}),i)zt("update() called with empty data.  Don't do anything."),po(n,r,"ok",void 0);else{let a=Ky(n),l=gY(n.serverSyncTree_,e,o,a);Wy(n.eventQueue_,l),n.server_.merge(e.toString(),t,(u,d)=>{let h=u==="ok";h||dn("update at "+e+" failed: "+u);let g=ao(n.serverSyncTree_,a,!h),m=g.length>0?Zc(n,e):e;Qn(n.eventQueue_,m,g),po(n,r,u,d)}),Gt(t,u=>{let d=$S(n,lt(e,u));Zc(n,d)}),Qn(n.eventQueue_,e,[])}}function $Y(n){ru(n,"onDisconnectEvents");let e=af(n),t=wy();LT(n.onDisconnect_,Oe(),(i,s)=>{let o=Dj(i,s,n.serverSyncTree_,e);eu(t,i,o)});let r=[];LT(t,Oe(),(i,s)=>{r=r.concat(nf(n.serverSyncTree_,i,s));let o=$S(n,i);Zc(n,o)}),n.onDisconnect_=wy(),Qn(n.eventQueue_,Oe(),r)}function HY(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&FT(n.onDisconnect_,e),po(n,t,r,i)})}function M2(n,e,t,r){let i=gt(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&eu(n.onDisconnect_,e,i),po(n,r,s,o)})}function qY(n,e,t,r,i){let s=gt(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&eu(n.onDisconnect_,e,s),po(n,i,o,a)})}function zY(n,e,t,r){if(Nf(t)){zt("onDisconnect().update() called with empty data.  Don't do anything."),po(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{i==="ok"&&Gt(t,(o,a)=>{let l=gt(a);eu(n.onDisconnect_,lt(e,o),l)}),po(n,r,i,s)})}function GY(n,e,t){let r;Ie(e._path)===".info"?r=YT(n.infoSyncTree_,e,t):r=YT(n.serverSyncTree_,e,t),Mj(n.eventQueue_,e._path,r)}function nS(n,e,t){let r;Ie(e._path)===".info"?r=Ry(n.infoSyncTree_,e,t):r=Ry(n.serverSyncTree_,e,t),Mj(n.eventQueue_,e._path,r)}function Oj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Pj)}function WY(n){n.persistentConnection_&&n.persistentConnection_.resume(Pj)}function ru(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zt(t,...e)}function po(n,e,t,r){e&&Jc(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function KY(n,e,t,r,i,s){ru(n,"transaction on "+e);let o={path:e,update:t,onComplete:r,status:null,order:k2(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=BS(n,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{sf("transaction failed: Data returned ",l,o.path),o.status=0;let u=qy(n.transactionQueueTree_,e),d=xa(u)||[];d.push(o),LS(u,d);let h;typeof l=="object"&&l!==null&&Xn(l,".priority")?(h=as(l,".priority"),H(Yh(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=($y(n.serverSyncTree_,e)||me.EMPTY_NODE).getPriority().val();let g=af(n),m=gt(l,h),y=OS(m,a,g);o.currentOutputSnapshotRaw=m,o.currentOutputSnapshotResolved=y,o.currentWriteId=Ky(n);let C=MS(n.serverSyncTree_,e,y,o.currentWriteId,o.applyLocally);Qn(n.eventQueue_,e,C),Qy(n,n.transactionQueueTree_)}}function BS(n,e,t){return $y(n.serverSyncTree_,e,t)||me.EMPTY_NODE}function Qy(n,e=n.transactionQueueTree_){if(e||Yy(n,e),xa(e)){let t=Lj(n,e);H(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&QY(n,rf(e),t)}else Tj(e)&&zy(e,t=>{Qy(n,t)})}function QY(n,e,t){let r=t.map(u=>u.currentWriteId),i=BS(n,e,r),s=i,o=i.hash();for(let u=0;u<t.length;u++){let d=t[u];H(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let h=Tn(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;n.server_.put(l.toString(),a,u=>{ru(n,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){let h=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(ao(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&h.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();Yy(n,qy(n.transactionQueueTree_,e)),Qy(n,n.transactionQueueTree_),Qn(n.eventQueue_,e,d);for(let g=0;g<h.length;g++)Jc(h[g])}else{if(u==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{dn("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=u}Zc(n,e)}},o)}function Zc(n,e){let t=Fj(n,e),r=rf(t),i=Lj(n,t);return YY(n,i,r),r}function YY(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],u=Tn(t,l.path),d=!1,h;if(H(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,i=i.concat(ao(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=LY)d=!0,h="maxretry",i=i.concat(ao(n.serverSyncTree_,l.currentWriteId,!0));else{let g=BS(n,l.path,o);l.currentInputSnapshot=g;let m=e[a].update(g.val());if(m!==void 0){sf("transaction failed: Data returned ",m,l.path);let y=gt(m);typeof m=="object"&&m!=null&&Xn(m,".priority")||(y=y.updatePriority(g.getPriority()));let b=l.currentWriteId,V=af(n),B=OS(y,g,V);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=B,l.currentWriteId=Ky(n),o.splice(o.indexOf(b),1),i=i.concat(MS(n.serverSyncTree_,l.path,B,l.currentWriteId,l.applyLocally)),i=i.concat(ao(n.serverSyncTree_,b,!0))}else d=!0,h="nodata",i=i.concat(ao(n.serverSyncTree_,l.currentWriteId,!0))}Qn(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Yy(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Jc(r[a]);Qy(n,n.transactionQueueTree_)}function Fj(n,e){let t,r=n.transactionQueueTree_;for(t=Ie(e);t!==null&&xa(r)===void 0;)r=qy(r,t),e=Ye(e),t=Ie(e);return r}function Lj(n,e){let t=[];return Vj(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Vj(n,e,t){let r=xa(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zy(e,i=>{Vj(n,i,t)})}function Yy(n,e){let t=xa(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,LS(e,t.length>0?t:void 0)}zy(e,r=>{Yy(n,r)})}function $S(n,e){let t=rf(Fj(n,e)),r=qy(n.transactionQueueTree_,e);return xY(r,i=>{dT(n,i)}),dT(n,r),Sj(r,i=>{dT(n,i)}),t}function dT(n,e){let t=xa(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(H(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(H(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(ao(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?LS(e,void 0):t.length=s+1,Qn(n.eventQueue_,rf(e),i);for(let o=0;o<r.length;o++)Jc(r[o])}}function ZY(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function XY(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):dn(`Invalid query segment '${t}' in query '${n}'`)}return e}var rS=function(n,e){let t=JY(n),r=t.namespace;t.domain==="firebase.com"&&yi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||xK();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new hy(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Fe(t.pathString)}},JY=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(d,h)),d<h&&(i=ZY(n.substring(d,h)));let g=XY(n.substring(Math.min(n.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;let m=e.slice(0,u);if(m.toLowerCase()==="localhost")t="localhost";else if(m.split(".").length<=2)t=m;else{let y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var N2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eZ=function(){let n=0,e=[];return function(t){let r=t===n;n=t;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=N2.charAt(t%64),t=Math.floor(t/64);H(t===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=N2.charAt(e[i]);return H(o.length===20,"nextPushId: Length should be 20."),o}}();var My=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+St(this.snapshot.exportVal())}},Ny=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Zh=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return H(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Py=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new Ut;return HY(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Kn("OnDisconnect.remove",this._path);let e=new Ut;return M2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Kn("OnDisconnect.set",this._path),wi("OnDisconnect.set",e,this._path,!1);let t=new Ut;return M2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Kn("OnDisconnect.setWithPriority",this._path),wi("OnDisconnect.setWithPriority",e,this._path,!1),VS("OnDisconnect.setWithPriority",t,!1);let r=new Ut;return qY(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Kn("OnDisconnect.update",this._path),xj("OnDisconnect.update",e,this._path,!1);let t=new Ut;return zY(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var An=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ce(this._path)?null:wS(this._path)}get ref(){return new Yn(this._repo,this._path)}get _queryIdentifier(){let e=y2(this._queryParams),t=yS(e);return t==="{}"?"default":t}get _queryObject(){return y2(this._queryParams)}isEqual(e){if(e=de(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=ES(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+aQ(this._path)}};function Zy(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function mo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===_i){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==uo)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ts)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===tt){if(e!=null&&!Yh(e)||t!=null&&!Yh(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(H(n.getIndex()instanceof Bh||n.getIndex()===bS,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xy(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yn=class n extends An{constructor(e,t){super(e,t,new zh,!1)}get parent(){let e=tj(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Xc=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Fe(e),r=go(this.ref,e);return new n(this._node.getChild(t),r,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,go(this.ref,r),tt)))}hasChild(e){let t=new Fe(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function HS(n,e){return n=de(n),n._checkNotDeleted("ref"),e!==void 0?go(n._root,e):n._root}function qS(n,e){n=de(n),n._checkNotDeleted("refFromURL");let t=rS(e,n._repo.repoInfo_.nodeAdmin);Rj("refFromURL",t);let r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&yi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),HS(n,t.path.toString())}function go(n,e){return n=de(n),Ie(n._path)===null?OY("child","path",e,!1):nu("child","path",e,!1),new Yn(n._repo,lt(n._path,e))}function jj(n,e){n=de(n),Kn("push",n._path),wi("push",e,n._path,!0);let t=kj(n._repo),r=eZ(t),i=go(n,r),s=go(n,r),o;return e!=null?o=Jy(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Uj(n){return Kn("remove",n._path),Jy(n,null)}function Jy(n,e){n=de(n),Kn("set",n._path),wi("set",e,n._path,!1);let t=new Ut;return US(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Bj(n,e){n=de(n),Kn("setPriority",n._path),VS("setPriority",e,!1);let t=new Ut;return US(n._repo,lt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function $j(n,e,t){if(Kn("setWithPriority",n._path),wi("setWithPriority",e,n._path,!1),VS("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let r=new Ut;return US(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}function Hj(n,e){xj("update",e,n._path,!1);let t=new Ut;return BY(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function qj(n){n=de(n);let e=new Zh(()=>{}),t=new Xh(e);return UY(n._repo,n,t).then(r=>new Xc(r,new Yn(n._repo,n._path),n._queryParams.getIndex()))}var Xh=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new My("value",this,new Xc(e.snapshotNode,new Yn(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ny(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},ky=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ny(this,e,t):null}createEvent(e,t){H(e.childName!=null,"Child events should have a childName.");let r=go(new Yn(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new My(e.type,this,new Xc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function lf(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let l=t,u=(d,h)=>{nS(n._repo,n,a),l(d,h)};u.userCallback=t.userCallback,u.context=t.context,t=u}let o=new Zh(t,s||void 0),a=e==="value"?new Xh(o):new ky(e,o);return GY(n._repo,n,a),()=>nS(n._repo,n,a)}function ev(n,e,t,r){return lf(n,"value",e,t,r)}function zS(n,e,t,r){return lf(n,"child_added",e,t,r)}function GS(n,e,t,r){return lf(n,"child_changed",e,t,r)}function WS(n,e,t,r){return lf(n,"child_moved",e,t,r)}function KS(n,e,t,r){return lf(n,"child_removed",e,t,r)}function QS(n,e,t){let r=null,i=t?new Zh(t):null;e==="value"?r=new Xh(i):e&&(r=new ky(e,i)),nS(n._repo,n,r)}var Zn=class{},Oy=class extends Zn{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){wi("endAt",this._value,e._path,!0);let t=PT(e._queryParams,this._value,this._key);if(Xy(t),mo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new An(e._repo,e._path,t,e._orderByCalled)}};function zj(n,e){return of("endAt","key",e,!0),new Oy(n,e)}var iS=class extends Zn{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){wi("endBefore",this._value,e._path,!1);let t=TQ(e._queryParams,this._value,this._key);if(Xy(t),mo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new An(e._repo,e._path,t,e._orderByCalled)}};function Gj(n,e){return of("endBefore","key",e,!0),new iS(n,e)}var Fy=class extends Zn{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){wi("startAt",this._value,e._path,!0);let t=NT(e._queryParams,this._value,this._key);if(Xy(t),mo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new An(e._repo,e._path,t,e._orderByCalled)}};function Wj(n=null,e){return of("startAt","key",e,!0),new Fy(n,e)}var sS=class extends Zn{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){wi("startAfter",this._value,e._path,!1);let t=DQ(e._queryParams,this._value,this._key);if(Xy(t),mo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new An(e._repo,e._path,t,e._orderByCalled)}};function Kj(n,e){return of("startAfter","key",e,!0),new sS(n,e)}var oS=class extends Zn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new An(e._repo,e._path,CQ(e._queryParams,this._limit),e._orderByCalled)}};function Qj(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oS(n)}var aS=class extends Zn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new An(e._repo,e._path,bQ(e._queryParams,this._limit),e._orderByCalled)}};function Yj(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aS(n)}var lS=class extends Zn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Zy(e,"orderByChild");let t=new Fe(this._path);if(Ce(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Bh(t),i=Vy(e._queryParams,r);return mo(i),new An(e._repo,e._path,i,!0)}};function Zj(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nu("orderByChild","path",n,!1),new lS(n)}var cS=class extends Zn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Zy(e,"orderByKey");let t=Vy(e._queryParams,_i);return mo(t),new An(e._repo,e._path,t,!0)}};function Xj(){return new cS}var uS=class extends Zn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Zy(e,"orderByPriority");let t=Vy(e._queryParams,tt);return mo(t),new An(e._repo,e._path,t,!0)}};function Jj(){return new uS}var dS=class extends Zn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Zy(e,"orderByValue");let t=Vy(e._queryParams,bS);return mo(t),new An(e._repo,e._path,t,!0)}};function eU(){return new dS}var hS=class extends Zn{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(wi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Oy(this._value,this._key)._apply(new Fy(this._value,this._key)._apply(e))}};function tU(n,e){return of("equalTo","key",e,!0),new hS(n,e)}function gr(n,...e){let t=de(n);for(let r of e)t=r._apply(t);return t}aY(Yn);hY(Yn);var tZ="FIREBASE_DATABASE_EMULATOR_HOST",fS={},nZ=!1;function rZ(n,e,t,r){n.repoInfo_=new hy(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function YS(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=rS(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[tZ]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=rS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let d=i&&l?new Oh(Oh.OWNER):new _T(n.name,n.options,e);Rj("Invalid Firebase Database URL",o),Ce(o.path)||yi("Database URL must point to the root of a Firebase Database (not including a child path).");let h=sZ(a,n,d,new mT(n.name,t));return new pS(h,n)}function iZ(n,e){let t=fS[e];(!t||t[n.key]!==n)&&yi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Oj(n),delete t[n.key]}function sZ(n,e,t,r){let i=fS[e.name];i||(i={},fS[e.name]=i);let s=i[n.toURLString()];return s&&yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new tS(n,nZ,t,r),i[n.toURLString()]=s,s}var pS=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VY(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yn(this._repo,Oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iZ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yi("Cannot call "+e+" on a deleted database.")}};function nU(){ej.IS_TRANSPORT_INITIALIZED&&dn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function rU(){nU(),jh.forceDisallow()}function iU(){nU(),$c.forceDisallow(),jh.forceAllow()}function sU(n,e,t,r={}){n=de(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&yi("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Oh(Oh.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:La(r.mockUserToken,n.app.options.projectId);s=new Oh(o)}rZ(i,e,t,s)}function oU(n){n=de(n),n._checkNotDeleted("goOffline"),Oj(n._repo)}function aU(n){n=de(n),n._checkNotDeleted("goOnline"),WY(n._repo)}function lU(n,e){F2(n,e)}function oZ(n){_S(Va),bi(new Kt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return YS(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Rn(t2,n2,n),Rn(t2,n2,"esm2017")}var aZ={".sv":"timestamp"};function cU(){return aZ}function uU(n){return{".sv":{increment:n}}}var gS=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function dU(n,e,t){var r;if(n=de(n),Kn("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let i=(r=t?.applyLocally)!==null&&r!==void 0?r:!0,s=new Ut,o=(l,u,d)=>{let h=null;l?s.reject(l):(h=new Xc(d,new Yn(n._repo,n._path),tt),s.resolve(new gS(u,h)))},a=ev(n,()=>{});return KY(n._repo,n._path,e,o,a,i),s.promise}IS.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};IS.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};oZ();var lZ="@firebase/database-compat",cZ="1.0.8";var uZ=new ls("@firebase/database-compat"),hU=function(n){let e="FIREBASE WARNING: "+n;uZ.warn(e)};var dZ=function(n,e,t,r){if(!(r&&t===void 0)&&typeof t!="boolean")throw new Error(xn(n,e)+"must be a boolean.")},hZ=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(xn(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var ZS=class{constructor(e){this._delegate=e}cancel(e){ce("OnDisconnect.cancel",0,1,arguments.length),Ft("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){ce("OnDisconnect.remove",0,1,arguments.length),Ft("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){ce("OnDisconnect.set",1,2,arguments.length),Ft("OnDisconnect.set","onComplete",t,!0);let r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){ce("OnDisconnect.setWithPriority",2,3,arguments.length),Ft("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if(ce("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,hU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ft("OnDisconnect.update","onComplete",t,!0);let r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}};var XS=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return ce("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Ra=class n{constructor(e,t){this._database=e,this._delegate=t}val(){return ce("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ce("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ce("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ce("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return ce("DataSnapshot.child",0,1,arguments.length),e=String(e),nu("DataSnapshot.child","path",e,!1),new n(this._database,this._delegate.child(e))}hasChild(e){return ce("DataSnapshot.hasChild",1,1,arguments.length),nu("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return ce("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return ce("DataSnapshot.forEach",1,1,arguments.length),Ft("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new n(this._database,t)))}hasChildren(){return ce("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ce("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ce("DataSnapshot.ref",0,0,arguments.length),new ns(this._database,this._delegate.ref)}get ref(){return this.getRef()}},tv=class n{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;ce("Query.on",2,4,arguments.length),Ft("Query.on","callback",t,!1);let o=n.getCancelAndContextArgs_("Query.on",r,i),a=(u,d)=>{t.call(o.context,new Ra(this.database,u),d)};a.userCallback=t,a.context=o.context;let l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return ev(this._delegate,a,l),t;case"child_added":return zS(this._delegate,a,l),t;case"child_removed":return KS(this._delegate,a,l),t;case"child_changed":return GS(this._delegate,a,l),t;case"child_moved":return WS(this._delegate,a,l),t;default:throw new Error(xn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(ce("Query.off",0,3,arguments.length),hZ("Query.off",e,!0),Ft("Query.off","callback",t,!0),Mv("Query.off","context",r,!0),t){let i=()=>{};i.userCallback=t,i.context=r,QS(this._delegate,e,i)}else QS(this._delegate,e)}get(){return qj(this._delegate).then(e=>new Ra(this.database,e))}once(e,t,r,i){ce("Query.once",1,4,arguments.length),Ft("Query.once","callback",t,!0);let s=n.getCancelAndContextArgs_("Query.once",r,i),o=new Ut,a=(u,d)=>{let h=new Ra(this.database,u);t&&t.call(s.context,h,d),o.resolve(h)};a.userCallback=t,a.context=s.context;let l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":ev(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":zS(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":KS(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":GS(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":WS(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(xn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return ce("Query.limitToFirst",1,1,arguments.length),new n(this.database,gr(this._delegate,Qj(e)))}limitToLast(e){return ce("Query.limitToLast",1,1,arguments.length),new n(this.database,gr(this._delegate,Yj(e)))}orderByChild(e){return ce("Query.orderByChild",1,1,arguments.length),new n(this.database,gr(this._delegate,Zj(e)))}orderByKey(){return ce("Query.orderByKey",0,0,arguments.length),new n(this.database,gr(this._delegate,Xj()))}orderByPriority(){return ce("Query.orderByPriority",0,0,arguments.length),new n(this.database,gr(this._delegate,Jj()))}orderByValue(){return ce("Query.orderByValue",0,0,arguments.length),new n(this.database,gr(this._delegate,eU()))}startAt(e=null,t){return ce("Query.startAt",0,2,arguments.length),new n(this.database,gr(this._delegate,Wj(e,t)))}startAfter(e=null,t){return ce("Query.startAfter",0,2,arguments.length),new n(this.database,gr(this._delegate,Kj(e,t)))}endAt(e=null,t){return ce("Query.endAt",0,2,arguments.length),new n(this.database,gr(this._delegate,zj(e,t)))}endBefore(e=null,t){return ce("Query.endBefore",0,2,arguments.length),new n(this.database,gr(this._delegate,Gj(e,t)))}equalTo(e,t){return ce("Query.equalTo",1,2,arguments.length),new n(this.database,gr(this._delegate,tU(e,t)))}toString(){return ce("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ce("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(ce("Query.isEqual",1,1,arguments.length),!(e instanceof n)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){let i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,Ft(e,"cancel",i.cancel,!0),i.context=r,Mv(e,"context",i.context,!0);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(xn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new ns(this.database,new Yn(this._delegate._repo,this._delegate._path))}},ns=class n extends tv{constructor(e,t){super(e,new An(t._repo,t._path,new zh,!1)),this.database=e,this._delegate=t}getKey(){return ce("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return ce("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new n(this.database,go(this._delegate,e))}getParent(){ce("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new n(this.database,e):null}getRoot(){return ce("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(e,t){ce("Reference.set",1,2,arguments.length),Ft("Reference.set","onComplete",t,!0);let r=Jy(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if(ce("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,hU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Kn("Reference.update",this._delegate._path),Ft("Reference.update","onComplete",t,!0);let r=Hj(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){ce("Reference.setWithPriority",2,3,arguments.length),Ft("Reference.setWithPriority","onComplete",r,!0);let i=$j(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){ce("Reference.remove",0,1,arguments.length),Ft("Reference.remove","onComplete",e,!0);let t=Uj(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){ce("Reference.transaction",1,3,arguments.length),Ft("Reference.transaction","transactionUpdate",e,!1),Ft("Reference.transaction","onComplete",t,!0),dZ("Reference.transaction","applyLocally",r,!0);let i=dU(this._delegate,e,{applyLocally:r}).then(s=>new XS(s.committed,new Ra(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){ce("Reference.setPriority",1,2,arguments.length),Ft("Reference.setPriority","onComplete",t,!0);let r=Bj(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){ce("Reference.push",0,2,arguments.length),Ft("Reference.push","onComplete",t,!0);let r=jj(this._delegate,e),i=r.then(o=>new n(this.database,o));t&&i.then(()=>t(null),o=>t(o));let s=new n(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Kn("Reference.onDisconnect",this._delegate._path),new ZS(new Py(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Ma=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:rU,forceLongPolling:iU}}useEmulator(e,t,r={}){sU(this._delegate,e,t,r)}ref(e){if(ce("database.ref",0,1,arguments.length),e instanceof ns){let t=qS(this._delegate,e.toString());return new ns(this,t)}else{let t=HS(this._delegate,e);return new ns(this,t)}}refFromURL(e){ce("database.refFromURL",1,1,arguments.length);let r=qS(this._delegate,e);return new ns(this,r)}goOffline(){return ce("database.goOffline",0,0,arguments.length),oU(this._delegate)}goOnline(){return ce("database.goOnline",0,0,arguments.length),aU(this._delegate)}};Ma.ServerValue={TIMESTAMP:cU(),increment:n=>uU(n)};function fZ({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){_S(t);let a=new Nv("database-standalone"),l=new Pf("auth-internal",a);l.setComponent(new Kt("auth-internal",()=>r,"PRIVATE"));let u;return i&&(u=new Pf("app-check-internal",a),u.setComponent(new Kt("app-check-internal",()=>i,"PRIVATE"))),{instance:new Ma(YS(n,l,u,e,o),n),namespace:s}}var pZ=Object.freeze({__proto__:null,initStandalone:fZ});var gZ=Ma.ServerValue;function mZ(n){n.INTERNAL.registerComponent(new Kt("database-compat",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Ma(i,r)},"PUBLIC").setServiceProps({Reference:ns,Query:tv,Database:Ma,DataSnapshot:Ra,enableLogging:lU,INTERNAL:pZ,ServerValue:gZ}).setMultipleInstances(!0)),n.registerVersion(lZ,cZ)}mZ(ct);function cf(n,e,t="on",r=Si){return new ve(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),t==="once"&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),t==="on"?{unsubscribe(){s!=null&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(re(i=>{let{snapshot:s,prevKey:o}=i,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),ku())}function _Z(n){return typeof n=="string"}function yZ(n){return typeof n.exportVal=="function"}function _U(n){return n==null}function yU(n){return typeof n.set=="function"}function fU(n,e){return yU(e)?e:n.ref(e)}function vU(n,e){if(_Z(n))return e.stringCase();if(yU(n))return e.firebaseCase();if(yZ(n))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function wU(n){return(_U(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function EU(n,e,t){e=wU(e);let r=e.map(i=>cf(n,i,"on",t));return Za(...r)}function vZ(n,e,t){let r=EU(n,e).pipe(jr((i,s)=>[...i,s],[]));return EZ(n,r,t)}function wZ(n,e){return cf(n,"value","on",e).pipe(re(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}function EZ(n,e,t){return wZ(n,t).pipe(sw(e),re(([i,s])=>{let o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),rw(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),re(i=>i.actions))}function pU(n,e){return function(r,i){return vU(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function IZ(n){return function(t){return t?vU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function CZ(n,e,t){return cf(n,"value","once",t).pipe(qe(r=>{let i=[se(r)];return e.forEach(s=>i.push(cf(n,s,"on",t))),Za(...i).pipe(jr(DZ,[]))}),Mu())}function IU(n,e){let t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function bZ(n,e){if(_U(e))return 0;{let t=IU(n,e);return t===-1?n.length:t+1}}function DZ(n,e){let{payload:t,prevKey:r,key:i}=e,s=IU(n,i),o=bZ(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let u={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,u],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key),n.splice(o,0,e));else{if(r==null)return[e,...n];n=n.slice(),n.splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function gU(n,e,t){return e=wU(e),CZ(n,e,t)}function TZ(n,e){let t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:pU(r,"update"),set:pU(r,"set"),push:i=>r.push(i),remove:IZ(r),snapshotChanges(i){return gU(n,i,t).pipe(st)},stateChanges(i){return EU(n,i,t).pipe(st)},auditTrail(i){return vZ(n,i,t).pipe(st)},valueChanges(i,s){return gU(n,i,t).pipe(re(a=>a.map(l=>s&&s.idField?ye(q({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),st)}}}function mU(n,e){return function(){return cf(n,"value","on",e)}}function SZ(n,e){return{query:n,snapshotChanges(){return mU(n,e.schedulers.outsideAngular)().pipe(st)},update(t){return n.ref.update(t)},set(t){return n.ref.set(t)},remove(){return n.ref.remove()},valueChanges(){return mU(n,e.schedulers.outsideAngular)().pipe(st,re(r=>r.payload.exists()?r.payload.val():null))}}}var AZ=new K("angularfire2.realtimeDatabaseURL"),xZ=new K("angularfire2.database.use-emulator"),RZ=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,u,d,h,g,m,y,C,b){this.schedulers=a;let V=l,B=qi(t,o,r);u&&Ld(B,o,d,g,m,y,h,C),this.database=js(`${B.name}.database.${i}`,"AngularFireDatabase",B.name,()=>{let O=o.runOutsideAngular(()=>B.database(i||void 0));return V&&O.useEmulator(...V),O},[V])}list(t,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>fU(this.database,t)),s=i;return r&&(s=r(i)),TZ(s,this)}object(t){let r=this.schedulers.ngZone.runOutsideAngular(()=>fU(this.database,t));return SZ(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(L(ni),L(ri,8),L(AZ,8),L(Bt),L(De),L(Ls),L(xZ,8),L(Ko,8),L(Md,8),L(Nd,8),L(Pd,8),L(kd,8),L(Od,8),L(Fd,8),L(Tr,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),CU=(()=>{class n{constructor(){ct.registerVersion("angularfire",Sr.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ze({providers:[RZ]})}return n})();var bU={production:!1,firebase:{apiKey:"AIzaSyD48b8tBW4FZ9WQBBSFYpqS1XEiyHdhx70",authDomain:"rog-movies.firebaseapp.com",projectId:"rog-movies",storageBucket:"rog-movies.appspot.com",messagingSenderId:"331623619456",appId:"1:331623619456:web:dae15b40eb0bd1ae24ff65",measurementId:"G-K3XLMQ7NB7"}};var DU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n,bootstrap:[Nk]});static \u0275inj=Ze({imports:[kP,ak,Mk,ok,Ck.initializeApp(bU.firebase),bk,gV,e2,CU]})}return n})();PP().bootstrapModule(DU,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
